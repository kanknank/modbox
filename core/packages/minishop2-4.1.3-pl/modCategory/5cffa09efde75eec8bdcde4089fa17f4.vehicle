<?php return array (
  'unique_key' => 'category',
  'preserve_keys' => false,
  'update_object' => true,
  'related_objects' => 
  array (
    'Chunks' => 
    array (
      '7fab95144417cae65d9cd6bdcb31655b' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"msProduct.content","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<h1 class=\\"text-center text-md-left\\">[[*pagetitle]]<\\/h1>\\r\\n<div class=\\"text-center text-md-left mb-2 mb-md-0\\">\\r\\n    [[+new:isnot=``:then=`<span class=\\"badge badge-secondary badge-pill col-auto\\">[[%ms2_frontend_new]]<\\/span>`]]\\r\\n    [[+popular:isnot=``:then=`<span class=\\"badge badge-secondary badge-pill col-auto\\">[[%ms2_frontend_popular]]<\\/span>`]]\\r\\n    [[+favorite:isnot=``:then=`<span class=\\"badge badge-secondary badge-pill col-auto\\">[[%ms2_frontend_favorite]]<\\/span>`]]\\r\\n<\\/div>\\r\\n<div id=\\"msProduct\\" class=\\"row align-items-center\\" itemtype=\\"http:\\/\\/schema.org\\/Product\\" itemscope>\\r\\n    <meta itemprop=\\"name\\" content=\\"[[*pagetitle]]\\">\\r\\n    <meta itemprop=\\"description\\" content=\\"[[*description:default=`[[*pagetitle]]`]]\\">\\r\\n    <div class=\\"col-12 col-md-6\\">\\r\\n        [[!msGallery]]\\r\\n    <\\/div>\\r\\n    <div class=\\"col-12 col-md-6\\" itemtype=\\"http:\\/\\/schema.org\\/AggregateOffer\\" itemprop=\\"offers\\" itemscope>\\r\\n        <meta itemprop=\\"category\\" content=\\"[[#[[*parent]].pagetitle]]\\">\\r\\n        <meta itemprop=\\"offerCount\\" content=\\"1\\">\\r\\n        <meta itemprop=\\"price\\" content=\\"[[+price:replace=` ==`]]\\">\\r\\n        <meta itemprop=\\"lowPrice\\" content=\\"[[+price:replace=` ==`]]\\">\\r\\n        <meta itemprop=\\"priceCurrency\\" content=\\"RUR\\">\\r\\n\\r\\n        <form class=\\"form-horizontal ms2_form\\" method=\\"post\\">\\r\\n            <input type=\\"hidden\\" name=\\"id\\" value=\\"[[*id]]\\"\\/>\\r\\n\\r\\n            <div class=\\"form-group row align-items-center\\">\\r\\n                <label class=\\"col-6 col-md-3 text-right text-md-left col-form-label\\">[[%ms2_product_article]]:<\\/label>\\r\\n                <div class=\\"col-6 col-md-9\\">\\r\\n                    [[+article:default=`-`]]\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n            <div class=\\"form-group row align-items-center\\">\\r\\n                <label class=\\"col-6 col-md-3 text-right text-md-left col-form-label\\">[[%ms2_product_price]]:<\\/label>\\r\\n                <div class=\\"col-6 col-md-9\\">\\r\\n                    [[+price]] [[%ms2_frontend_currency]]\\r\\n                    [[+old_price:gt=`0`:then=`\\r\\n                    <span class=\\"old_price ml-2\\">[[+old_price]] [[%ms2_frontend_currency]]<\\/span>\\r\\n                    `:else=``]]\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n            <div class=\\"form-group row align-items-center\\">\\r\\n                <label class=\\"col-6 col-md-3 text-right text-md-left col-form-label\\" for=\\"product_price\\">[[%ms2_cart_count]]:<\\/label>\\r\\n                <div class=\\"col-6 col-md-9\\">\\r\\n                    <div class=\\"input-group\\">\\r\\n                        <input type=\\"number\\" name=\\"count\\" id=\\"product_price\\" class=\\"form-control col-md-6\\" value=\\"1\\"\\/>\\r\\n                        <div class=\\"input-group-append\\">\\r\\n                            <span class=\\"input-group-text\\">[[%ms2_frontend_count_unit]]<\\/span>\\r\\n                        <\\/div>\\r\\n                    <\\/div>\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n            <div class=\\"form-group row align-items-center\\">\\r\\n                <label class=\\"col-6 col-md-3 text-right text-md-left col-form-label\\">[[%ms2_product_weight]]:<\\/label>\\r\\n                <div class=\\"col-6 col-md-9\\">\\r\\n                    [[+weight]] [[%ms2_frontend_weight_unit]]\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n\\r\\n            <div class=\\"form-group row align-items-center\\">\\r\\n                <label class=\\"col-6 col-md-3 text-right text-md-left col-form-label\\">[[%ms2_product_made_in]]:<\\/label>\\r\\n                <div class=\\"col-6 col-md-9\\">\\r\\n                    [[+made_in:default=`-`]]\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n\\r\\n            [[msOptions?options=`color,size`]]\\r\\n\\r\\n            [[msProductOptions]]\\r\\n\\r\\n            <div class=\\"form-group row align-items-center\\">\\r\\n                <div class=\\"col-12 offset-md-3 col-md-9 text-center text-md-left\\">\\r\\n                    <button type=\\"submit\\" class=\\"btn btn-primary\\" name=\\"ms2_action\\" value=\\"cart\\/add\\">\\r\\n                        [[%ms2_frontend_add_to_cart]]\\r\\n                    <\\/button>\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n        <\\/form>\\r\\n\\r\\n    <\\/div>\\r\\n<\\/div>\\r\\n<div class=\\"mt-3\\">\\r\\n    [[*content]]\\r\\n<\\/div>\\r\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_product_content.tpl","content":"<h1 class=\\"text-center text-md-left\\">[[*pagetitle]]<\\/h1>\\r\\n<div class=\\"text-center text-md-left mb-2 mb-md-0\\">\\r\\n    [[+new:isnot=``:then=`<span class=\\"badge badge-secondary badge-pill col-auto\\">[[%ms2_frontend_new]]<\\/span>`]]\\r\\n    [[+popular:isnot=``:then=`<span class=\\"badge badge-secondary badge-pill col-auto\\">[[%ms2_frontend_popular]]<\\/span>`]]\\r\\n    [[+favorite:isnot=``:then=`<span class=\\"badge badge-secondary badge-pill col-auto\\">[[%ms2_frontend_favorite]]<\\/span>`]]\\r\\n<\\/div>\\r\\n<div id=\\"msProduct\\" class=\\"row align-items-center\\" itemtype=\\"http:\\/\\/schema.org\\/Product\\" itemscope>\\r\\n    <meta itemprop=\\"name\\" content=\\"[[*pagetitle]]\\">\\r\\n    <meta itemprop=\\"description\\" content=\\"[[*description:default=`[[*pagetitle]]`]]\\">\\r\\n    <div class=\\"col-12 col-md-6\\">\\r\\n        [[!msGallery]]\\r\\n    <\\/div>\\r\\n    <div class=\\"col-12 col-md-6\\" itemtype=\\"http:\\/\\/schema.org\\/AggregateOffer\\" itemprop=\\"offers\\" itemscope>\\r\\n        <meta itemprop=\\"category\\" content=\\"[[#[[*parent]].pagetitle]]\\">\\r\\n        <meta itemprop=\\"offerCount\\" content=\\"1\\">\\r\\n        <meta itemprop=\\"price\\" content=\\"[[+price:replace=` ==`]]\\">\\r\\n        <meta itemprop=\\"lowPrice\\" content=\\"[[+price:replace=` ==`]]\\">\\r\\n        <meta itemprop=\\"priceCurrency\\" content=\\"RUR\\">\\r\\n\\r\\n        <form class=\\"form-horizontal ms2_form\\" method=\\"post\\">\\r\\n            <input type=\\"hidden\\" name=\\"id\\" value=\\"[[*id]]\\"\\/>\\r\\n\\r\\n            <div class=\\"form-group row align-items-center\\">\\r\\n                <label class=\\"col-6 col-md-3 text-right text-md-left col-form-label\\">[[%ms2_product_article]]:<\\/label>\\r\\n                <div class=\\"col-6 col-md-9\\">\\r\\n                    [[+article:default=`-`]]\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n            <div class=\\"form-group row align-items-center\\">\\r\\n                <label class=\\"col-6 col-md-3 text-right text-md-left col-form-label\\">[[%ms2_product_price]]:<\\/label>\\r\\n                <div class=\\"col-6 col-md-9\\">\\r\\n                    [[+price]] [[%ms2_frontend_currency]]\\r\\n                    [[+old_price:gt=`0`:then=`\\r\\n                    <span class=\\"old_price ml-2\\">[[+old_price]] [[%ms2_frontend_currency]]<\\/span>\\r\\n                    `:else=``]]\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n            <div class=\\"form-group row align-items-center\\">\\r\\n                <label class=\\"col-6 col-md-3 text-right text-md-left col-form-label\\" for=\\"product_price\\">[[%ms2_cart_count]]:<\\/label>\\r\\n                <div class=\\"col-6 col-md-9\\">\\r\\n                    <div class=\\"input-group\\">\\r\\n                        <input type=\\"number\\" name=\\"count\\" id=\\"product_price\\" class=\\"form-control col-md-6\\" value=\\"1\\"\\/>\\r\\n                        <div class=\\"input-group-append\\">\\r\\n                            <span class=\\"input-group-text\\">[[%ms2_frontend_count_unit]]<\\/span>\\r\\n                        <\\/div>\\r\\n                    <\\/div>\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n            <div class=\\"form-group row align-items-center\\">\\r\\n                <label class=\\"col-6 col-md-3 text-right text-md-left col-form-label\\">[[%ms2_product_weight]]:<\\/label>\\r\\n                <div class=\\"col-6 col-md-9\\">\\r\\n                    [[+weight]] [[%ms2_frontend_weight_unit]]\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n\\r\\n            <div class=\\"form-group row align-items-center\\">\\r\\n                <label class=\\"col-6 col-md-3 text-right text-md-left col-form-label\\">[[%ms2_product_made_in]]:<\\/label>\\r\\n                <div class=\\"col-6 col-md-9\\">\\r\\n                    [[+made_in:default=`-`]]\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n\\r\\n            [[msOptions?options=`color,size`]]\\r\\n\\r\\n            [[msProductOptions]]\\r\\n\\r\\n            <div class=\\"form-group row align-items-center\\">\\r\\n                <div class=\\"col-12 offset-md-3 col-md-9 text-center text-md-left\\">\\r\\n                    <button type=\\"submit\\" class=\\"btn btn-primary\\" name=\\"ms2_action\\" value=\\"cart\\/add\\">\\r\\n                        [[%ms2_frontend_add_to_cart]]\\r\\n                    <\\/button>\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n        <\\/form>\\r\\n\\r\\n    <\\/div>\\r\\n<\\/div>\\r\\n<div class=\\"mt-3\\">\\r\\n    [[*content]]\\r\\n<\\/div>\\r\\n"}',
        'guid' => '757b1700b9dbd15acd2cd0a283754f0a',
        'native_key' => 0,
        'signature' => '310c8455de9c4a3644d69cc5aad0fac6',
      ),
      '2689325404b95e3b875afffe4e228b75' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"msProduct.content.fenom","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<h1 class=\\"text-center text-md-left\\">{$_modx->resource.pagetitle}<\\/h1>\\r\\n<div class=\\"text-center text-md-left mb-2 mb-md-0\\">\\r\\n    {if $_modx->resource.new?}\\r\\n        <span class=\\"badge badge-secondary badge-pill col-auto\\">{\'ms2_frontend_new\' | lexicon}<\\/span>\\r\\n    {\\/if}\\r\\n    {if $_modx->resource.popular?}\\r\\n        <span class=\\"badge badge-secondary badge-pill col-auto\\">{\'ms2_frontend_popular\' | lexicon}<\\/span>\\r\\n    {\\/if}\\r\\n    {if $_modx->resource.favorite?}\\r\\n        <span class=\\"badge badge-secondary badge-pill col-auto\\">{\'ms2_frontend_favorite\' | lexicon}<\\/span>\\r\\n    {\\/if}\\r\\n<\\/div>\\r\\n<div id=\\"msProduct\\" class=\\"row align-items-center\\" itemtype=\\"http:\\/\\/schema.org\\/Product\\" itemscope>\\r\\n    <meta itemprop=\\"name\\" content=\\"{$_modx->resource.pagetitle}\\">\\r\\n    <meta itemprop=\\"description\\" content=\\"{$_modx->resource.description ?: $_modx->resource.pagetitle}\\">\\r\\n    <div class=\\"col-12 col-md-6\\">\\r\\n        {\'!msGallery\' | snippet : []}\\r\\n    <\\/div>\\r\\n    <div class=\\"col-12 col-md-6\\" itemtype=\\"http:\\/\\/schema.org\\/AggregateOffer\\" itemprop=\\"offers\\" itemscope>\\r\\n        <meta itemprop=\\"category\\" content=\\"{$_modx->resource.parent | resource: \\"pagetitle\\"}\\">\\r\\n        <meta itemprop=\\"offerCount\\" content=\\"1\\">\\r\\n        <meta itemprop=\\"price\\" content=\\"{$price | replace:\\" \\":\\"\\"}\\">\\r\\n        <meta itemprop=\\"lowPrice\\" content=\\"{$price | replace:\\" \\":\\"\\"}\\">\\r\\n        <meta itemprop=\\"priceCurrency\\" content=\\"RUR\\">\\r\\n\\r\\n        <form class=\\"form-horizontal ms2_form\\" method=\\"post\\">\\r\\n            <input type=\\"hidden\\" name=\\"id\\" value=\\"{$_modx->resource.id}\\"\\/>\\r\\n\\r\\n            <div class=\\"form-group row align-items-center\\">\\r\\n                <label class=\\"col-6 col-md-3 text-right text-md-left col-form-label\\">{\'ms2_product_article\' | lexicon}:<\\/label>\\r\\n                <div class=\\"col-6 col-md-9\\">\\r\\n                    {$article ?: \'-\'}\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n            <div class=\\"form-group row align-items-center\\">\\r\\n                <label class=\\"col-6 col-md-3 text-right text-md-left col-form-label\\">{\'ms2_product_price\' | lexicon}:<\\/label>\\r\\n                <div class=\\"col-6 col-md-9\\">\\r\\n                    {$price} {\'ms2_frontend_currency\' | lexicon}\\r\\n                    {if $old_price != 0}\\r\\n                    <span class=\\"old_price ml-2\\">{$old_price} {\'ms2_frontend_currency\' | lexicon}<\\/span>\\r\\n                    {\\/if}\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n            <div class=\\"form-group row align-items-center\\">\\r\\n                <label class=\\"col-6 col-md-3 text-right text-md-left col-form-label\\" for=\\"product_price\\">{\'ms2_cart_count\' | lexicon}:<\\/label>\\r\\n                <div class=\\"col-6 col-md-9\\">\\r\\n                    <div class=\\"input-group\\">\\r\\n                        <input type=\\"number\\" name=\\"count\\" id=\\"product_price\\" class=\\"form-control col-md-6\\" value=\\"1\\"\\/>\\r\\n                        <div class=\\"input-group-append\\">\\r\\n                            <span class=\\"input-group-text\\">{\'ms2_frontend_count_unit\' | lexicon}<\\/span>\\r\\n                        <\\/div>\\r\\n                    <\\/div>\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n            <div class=\\"form-group row align-items-center\\">\\r\\n                <label class=\\"col-6 col-md-3 text-right text-md-left col-form-label\\">{\'ms2_product_weight\' | lexicon}:<\\/label>\\r\\n                <div class=\\"col-6 col-md-9\\">\\r\\n                    {$weight} {\'ms2_frontend_weight_unit\' | lexicon}\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n\\r\\n            <div class=\\"form-group row align-items-center\\">\\r\\n                <label class=\\"col-6 col-md-3 text-right text-md-left col-form-label\\">{\'ms2_product_made_in\' | lexicon}:<\\/label>\\r\\n                <div class=\\"col-6 col-md-9\\">\\r\\n                    {$made_in ?: \'-\'}\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n\\r\\n            {\'msOptions\' | snippet : [\\r\\n                \'options\' => \'color,size\'\\r\\n            ]}\\r\\n\\r\\n            {\'msProductOptions\' | snippet : []}\\r\\n\\r\\n            <div class=\\"form-group row align-items-center\\">\\r\\n                <div class=\\"col-12 offset-md-3 col-md-9 text-center text-md-left\\">\\r\\n                    <button type=\\"submit\\" class=\\"btn btn-primary\\" name=\\"ms2_action\\" value=\\"cart\\/add\\">\\r\\n                        {\'ms2_frontend_add_to_cart\' | lexicon}\\r\\n                    <\\/button>\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n        <\\/form>\\r\\n\\r\\n    <\\/div>\\r\\n<\\/div>\\r\\n<div class=\\"mt-3\\">\\r\\n    {$_modx->resource.content}\\r\\n<\\/div>\\r\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_product_content_fenom.tpl","content":"<h1 class=\\"text-center text-md-left\\">{$_modx->resource.pagetitle}<\\/h1>\\r\\n<div class=\\"text-center text-md-left mb-2 mb-md-0\\">\\r\\n    {if $_modx->resource.new?}\\r\\n        <span class=\\"badge badge-secondary badge-pill col-auto\\">{\'ms2_frontend_new\' | lexicon}<\\/span>\\r\\n    {\\/if}\\r\\n    {if $_modx->resource.popular?}\\r\\n        <span class=\\"badge badge-secondary badge-pill col-auto\\">{\'ms2_frontend_popular\' | lexicon}<\\/span>\\r\\n    {\\/if}\\r\\n    {if $_modx->resource.favorite?}\\r\\n        <span class=\\"badge badge-secondary badge-pill col-auto\\">{\'ms2_frontend_favorite\' | lexicon}<\\/span>\\r\\n    {\\/if}\\r\\n<\\/div>\\r\\n<div id=\\"msProduct\\" class=\\"row align-items-center\\" itemtype=\\"http:\\/\\/schema.org\\/Product\\" itemscope>\\r\\n    <meta itemprop=\\"name\\" content=\\"{$_modx->resource.pagetitle}\\">\\r\\n    <meta itemprop=\\"description\\" content=\\"{$_modx->resource.description ?: $_modx->resource.pagetitle}\\">\\r\\n    <div class=\\"col-12 col-md-6\\">\\r\\n        {\'!msGallery\' | snippet : []}\\r\\n    <\\/div>\\r\\n    <div class=\\"col-12 col-md-6\\" itemtype=\\"http:\\/\\/schema.org\\/AggregateOffer\\" itemprop=\\"offers\\" itemscope>\\r\\n        <meta itemprop=\\"category\\" content=\\"{$_modx->resource.parent | resource: \\"pagetitle\\"}\\">\\r\\n        <meta itemprop=\\"offerCount\\" content=\\"1\\">\\r\\n        <meta itemprop=\\"price\\" content=\\"{$price | replace:\\" \\":\\"\\"}\\">\\r\\n        <meta itemprop=\\"lowPrice\\" content=\\"{$price | replace:\\" \\":\\"\\"}\\">\\r\\n        <meta itemprop=\\"priceCurrency\\" content=\\"RUR\\">\\r\\n\\r\\n        <form class=\\"form-horizontal ms2_form\\" method=\\"post\\">\\r\\n            <input type=\\"hidden\\" name=\\"id\\" value=\\"{$_modx->resource.id}\\"\\/>\\r\\n\\r\\n            <div class=\\"form-group row align-items-center\\">\\r\\n                <label class=\\"col-6 col-md-3 text-right text-md-left col-form-label\\">{\'ms2_product_article\' | lexicon}:<\\/label>\\r\\n                <div class=\\"col-6 col-md-9\\">\\r\\n                    {$article ?: \'-\'}\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n            <div class=\\"form-group row align-items-center\\">\\r\\n                <label class=\\"col-6 col-md-3 text-right text-md-left col-form-label\\">{\'ms2_product_price\' | lexicon}:<\\/label>\\r\\n                <div class=\\"col-6 col-md-9\\">\\r\\n                    {$price} {\'ms2_frontend_currency\' | lexicon}\\r\\n                    {if $old_price != 0}\\r\\n                    <span class=\\"old_price ml-2\\">{$old_price} {\'ms2_frontend_currency\' | lexicon}<\\/span>\\r\\n                    {\\/if}\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n            <div class=\\"form-group row align-items-center\\">\\r\\n                <label class=\\"col-6 col-md-3 text-right text-md-left col-form-label\\" for=\\"product_price\\">{\'ms2_cart_count\' | lexicon}:<\\/label>\\r\\n                <div class=\\"col-6 col-md-9\\">\\r\\n                    <div class=\\"input-group\\">\\r\\n                        <input type=\\"number\\" name=\\"count\\" id=\\"product_price\\" class=\\"form-control col-md-6\\" value=\\"1\\"\\/>\\r\\n                        <div class=\\"input-group-append\\">\\r\\n                            <span class=\\"input-group-text\\">{\'ms2_frontend_count_unit\' | lexicon}<\\/span>\\r\\n                        <\\/div>\\r\\n                    <\\/div>\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n            <div class=\\"form-group row align-items-center\\">\\r\\n                <label class=\\"col-6 col-md-3 text-right text-md-left col-form-label\\">{\'ms2_product_weight\' | lexicon}:<\\/label>\\r\\n                <div class=\\"col-6 col-md-9\\">\\r\\n                    {$weight} {\'ms2_frontend_weight_unit\' | lexicon}\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n\\r\\n            <div class=\\"form-group row align-items-center\\">\\r\\n                <label class=\\"col-6 col-md-3 text-right text-md-left col-form-label\\">{\'ms2_product_made_in\' | lexicon}:<\\/label>\\r\\n                <div class=\\"col-6 col-md-9\\">\\r\\n                    {$made_in ?: \'-\'}\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n\\r\\n            {\'msOptions\' | snippet : [\\r\\n                \'options\' => \'color,size\'\\r\\n            ]}\\r\\n\\r\\n            {\'msProductOptions\' | snippet : []}\\r\\n\\r\\n            <div class=\\"form-group row align-items-center\\">\\r\\n                <div class=\\"col-12 offset-md-3 col-md-9 text-center text-md-left\\">\\r\\n                    <button type=\\"submit\\" class=\\"btn btn-primary\\" name=\\"ms2_action\\" value=\\"cart\\/add\\">\\r\\n                        {\'ms2_frontend_add_to_cart\' | lexicon}\\r\\n                    <\\/button>\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n        <\\/form>\\r\\n\\r\\n    <\\/div>\\r\\n<\\/div>\\r\\n<div class=\\"mt-3\\">\\r\\n    {$_modx->resource.content}\\r\\n<\\/div>\\r\\n"}',
        'guid' => 'ce6a444b7eaa46457a3a82abd0c68c6a',
        'native_key' => 0,
        'signature' => '0f362b38067f59c326466ee0255a5fb7',
      ),
      'ef3710ebcc9faf2580378176ebb07e3d' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msProducts.row","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"ms2_product mb-5 mb-md-3\\" itemtype=\\"http:\\/\\/schema.org\\/Product\\" itemscope>\\r\\n    <meta itemprop=\\"description\\" content=\\"{$description = $description ?: $pagetitle}\\">\\r\\n    <meta itemprop=\\"name\\" content=\\"{$pagetitle}\\">\\r\\n\\r\\n    <form method=\\"post\\" class=\\"ms2_form d-flex flex-column flex-md-row align-items-center no-gutters\\">\\r\\n        <input type=\\"hidden\\" name=\\"id\\" value=\\"{$id}\\">\\r\\n        <input type=\\"hidden\\" name=\\"count\\" value=\\"1\\">\\r\\n        <input type=\\"hidden\\" name=\\"options\\" value=\\"[]\\">\\r\\n        <div class=\\"col-md-2 text-center text-md-left\\">\\r\\n            <a href=\\"{$id | url}\\">\\r\\n                {if $thumb?}\\r\\n                    <img src=\\"{$thumb}\\" class=\\"mw-100\\" alt=\\"{$pagetitle}\\" title=\\"{$pagetitle}\\" itemprop=\\"image\\"\\/>\\r\\n                {else}\\r\\n                    <img src=\\"{\'assets_url\' | option}components\\/minishop2\\/img\\/web\\/ms2_small.png\\"\\r\\n                        srcset=\\"{\'assets_url\' | option}components\\/minishop2\\/img\\/web\\/ms2_small@2x.png 2x\\"\\r\\n                        class=\\"mw-100\\" alt=\\"{$pagetitle}\\" title=\\"{$pagetitle}\\"\\/>\\r\\n                {\\/if}\\r\\n            <\\/a>\\r\\n        <\\/div>\\r\\n        <div class=\\"col-md-10 d-flex flex-column flex-md-row align-items-center no-gutters\\" itemtype=\\"http:\\/\\/schema.org\\/AggregateOffer\\" itemprop=\\"offers\\" itemscope>\\r\\n            <meta itemprop=\\"category\\" content=\\"{$parent | resource: \\"pagetitle\\"}\\">\\r\\n            <meta itemprop=\\"name\\" content=\\"{$pagetitle}\\">\\r\\n            <meta itemprop=\\"offerCount\\" content=\\"1\\">\\r\\n            <meta itemprop=\\"price\\" content=\\"{$price | replace:\\" \\":\\"\\"}\\">\\r\\n            <meta itemprop=\\"lowPrice\\" content=\\"{$price | replace:\\" \\":\\"\\"}\\">\\r\\n            <meta itemprop=\\"priceCurrency\\" content=\\"RUR\\">\\r\\n\\r\\n            <div class=\\"col-12 col-md-8 mt-2 mt-md-0 flex-grow-1\\">\\r\\n                <div class=\\"d-flex justify-content-around justify-content-md-start\\">\\r\\n                    <a href=\\"{$id | url}\\" class=\\"font-weight-bold\\">{$pagetitle}<\\/a>\\r\\n                    <span class=\\"price ml-md-3\\">{$price} {\'ms2_frontend_currency\' | lexicon}<\\/span>\\r\\n                    {if $old_price?}\\r\\n                        <span class=\\"old_price ml-md-3\\">{$old_price} {\'ms2_frontend_currency\' | lexicon}<\\/span>\\r\\n                    {\\/if}\\r\\n                <\\/div>\\r\\n                <div class=\\"flags mt-2 d-flex justify-content-around justify-content-md-start\\">\\r\\n                    {if $new?}\\r\\n                        <span class=\\"badge badge-secondary badge-pill mr-md-1\\">{\'ms2_frontend_new\' | lexicon}<\\/span>\\r\\n                    {\\/if}\\r\\n                    {if $popular?}\\r\\n                        <span class=\\"badge badge-secondary badge-pill mr-md-1\\">{\'ms2_frontend_popular\' | lexicon}<\\/span>\\r\\n                    {\\/if}\\r\\n                    {if $favorite?}\\r\\n                        <span class=\\"badge badge-secondary badge-pill mr-md-1\\">{\'ms2_frontend_favorite\' | lexicon}<\\/span>\\r\\n                    {\\/if}\\r\\n                <\\/div>\\r\\n                {if $introtext}\\r\\n                    <div class=\\"mt-2 text-center text-md-left\\">\\r\\n                        <small>{$introtext | truncate : 200}<\\/small>\\r\\n                    <\\/div>\\r\\n                {\\/if}\\r\\n            <\\/div>\\r\\n            <div class=\\"col-12 col-md-4 mt-2 mt-md-0 text-center text-md-right\\">\\r\\n                <button class=\\"btn btn-primary\\" type=\\"submit\\" name=\\"ms2_action\\" value=\\"cart\\/add\\">\\r\\n                    {\'ms2_frontend_add_to_cart\' | lexicon}\\r\\n                <\\/button>\\r\\n            <\\/div>\\r\\n        <\\/div>\\r\\n    <\\/form>\\r\\n<\\/div>\\r\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_products_row.tpl","content":"<div class=\\"ms2_product mb-5 mb-md-3\\" itemtype=\\"http:\\/\\/schema.org\\/Product\\" itemscope>\\r\\n    <meta itemprop=\\"description\\" content=\\"{$description = $description ?: $pagetitle}\\">\\r\\n    <meta itemprop=\\"name\\" content=\\"{$pagetitle}\\">\\r\\n\\r\\n    <form method=\\"post\\" class=\\"ms2_form d-flex flex-column flex-md-row align-items-center no-gutters\\">\\r\\n        <input type=\\"hidden\\" name=\\"id\\" value=\\"{$id}\\">\\r\\n        <input type=\\"hidden\\" name=\\"count\\" value=\\"1\\">\\r\\n        <input type=\\"hidden\\" name=\\"options\\" value=\\"[]\\">\\r\\n        <div class=\\"col-md-2 text-center text-md-left\\">\\r\\n            <a href=\\"{$id | url}\\">\\r\\n                {if $thumb?}\\r\\n                    <img src=\\"{$thumb}\\" class=\\"mw-100\\" alt=\\"{$pagetitle}\\" title=\\"{$pagetitle}\\" itemprop=\\"image\\"\\/>\\r\\n                {else}\\r\\n                    <img src=\\"{\'assets_url\' | option}components\\/minishop2\\/img\\/web\\/ms2_small.png\\"\\r\\n                        srcset=\\"{\'assets_url\' | option}components\\/minishop2\\/img\\/web\\/ms2_small@2x.png 2x\\"\\r\\n                        class=\\"mw-100\\" alt=\\"{$pagetitle}\\" title=\\"{$pagetitle}\\"\\/>\\r\\n                {\\/if}\\r\\n            <\\/a>\\r\\n        <\\/div>\\r\\n        <div class=\\"col-md-10 d-flex flex-column flex-md-row align-items-center no-gutters\\" itemtype=\\"http:\\/\\/schema.org\\/AggregateOffer\\" itemprop=\\"offers\\" itemscope>\\r\\n            <meta itemprop=\\"category\\" content=\\"{$parent | resource: \\"pagetitle\\"}\\">\\r\\n            <meta itemprop=\\"name\\" content=\\"{$pagetitle}\\">\\r\\n            <meta itemprop=\\"offerCount\\" content=\\"1\\">\\r\\n            <meta itemprop=\\"price\\" content=\\"{$price | replace:\\" \\":\\"\\"}\\">\\r\\n            <meta itemprop=\\"lowPrice\\" content=\\"{$price | replace:\\" \\":\\"\\"}\\">\\r\\n            <meta itemprop=\\"priceCurrency\\" content=\\"RUR\\">\\r\\n\\r\\n            <div class=\\"col-12 col-md-8 mt-2 mt-md-0 flex-grow-1\\">\\r\\n                <div class=\\"d-flex justify-content-around justify-content-md-start\\">\\r\\n                    <a href=\\"{$id | url}\\" class=\\"font-weight-bold\\">{$pagetitle}<\\/a>\\r\\n                    <span class=\\"price ml-md-3\\">{$price} {\'ms2_frontend_currency\' | lexicon}<\\/span>\\r\\n                    {if $old_price?}\\r\\n                        <span class=\\"old_price ml-md-3\\">{$old_price} {\'ms2_frontend_currency\' | lexicon}<\\/span>\\r\\n                    {\\/if}\\r\\n                <\\/div>\\r\\n                <div class=\\"flags mt-2 d-flex justify-content-around justify-content-md-start\\">\\r\\n                    {if $new?}\\r\\n                        <span class=\\"badge badge-secondary badge-pill mr-md-1\\">{\'ms2_frontend_new\' | lexicon}<\\/span>\\r\\n                    {\\/if}\\r\\n                    {if $popular?}\\r\\n                        <span class=\\"badge badge-secondary badge-pill mr-md-1\\">{\'ms2_frontend_popular\' | lexicon}<\\/span>\\r\\n                    {\\/if}\\r\\n                    {if $favorite?}\\r\\n                        <span class=\\"badge badge-secondary badge-pill mr-md-1\\">{\'ms2_frontend_favorite\' | lexicon}<\\/span>\\r\\n                    {\\/if}\\r\\n                <\\/div>\\r\\n                {if $introtext}\\r\\n                    <div class=\\"mt-2 text-center text-md-left\\">\\r\\n                        <small>{$introtext | truncate : 200}<\\/small>\\r\\n                    <\\/div>\\r\\n                {\\/if}\\r\\n            <\\/div>\\r\\n            <div class=\\"col-12 col-md-4 mt-2 mt-md-0 text-center text-md-right\\">\\r\\n                <button class=\\"btn btn-primary\\" type=\\"submit\\" name=\\"ms2_action\\" value=\\"cart\\/add\\">\\r\\n                    {\'ms2_frontend_add_to_cart\' | lexicon}\\r\\n                <\\/button>\\r\\n            <\\/div>\\r\\n        <\\/div>\\r\\n    <\\/form>\\r\\n<\\/div>\\r\\n"}',
        'guid' => 'ef0cff1d1f86a032b9d233104140ffe4',
        'native_key' => 0,
        'signature' => '9cf9037647a9deabe0e1d13d8c2fcf91',
      ),
      '743dfed11ef99987d6f37a4c0e9ee0d5' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msCart","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div id=\\"msCart\\">\\r\\n    {if $products | length == 0}\\r\\n        <div class=\\"alert alert-warning\\">\\r\\n            {\'ms2_cart_is_empty\' | lexicon}\\r\\n        <\\/div>\\r\\n    {else}\\r\\n        <div class=\\"table-responsive\\">\\r\\n            <table class=\\"table table-striped\\">\\r\\n                <tr class=\\"ms-header\\">\\r\\n                    <th class=\\"ms-title\\">{\'ms2_cart_title\' | lexicon}<\\/th>\\r\\n                    <th class=\\"ms-count\\">{\'ms2_cart_count\' | lexicon}<\\/th>\\r\\n                    <th class=\\"ms-weight\\">{\'ms2_cart_weight\' | lexicon}<\\/th>\\r\\n                    <th class=\\"ms-price\\">{\'ms2_cart_price\' | lexicon}<\\/th>\\r\\n                    <th class=\\"ms-cost\\">{\'ms2_cart_cost\' | lexicon}<\\/th>\\r\\n                    <th class=\\"ms-remove\\"><\\/th>\\r\\n                <\\/tr>\\r\\n\\r\\n                {foreach $products as $product}\\r\\n                    {var $image}\\r\\n                        {if $product.thumb?}\\r\\n                            <img src=\\"{$product.thumb}\\" alt=\\"{$product.pagetitle}\\" title=\\"{$product.pagetitle}\\"\\/>\\r\\n                        {else}\\r\\n                            <img src=\\"{\'assets_url\' | option}components\\/minishop2\\/img\\/web\\/ms2_small.png\\"\\r\\n                                srcset=\\"{\'assets_url\' | option}components\\/minishop2\\/img\\/web\\/ms2_small@2x.png 2x\\"\\r\\n                                alt=\\"{$product.pagetitle}\\" title=\\"{$product.pagetitle}\\"\\/>\\r\\n                        {\\/if}\\r\\n                    {\\/var}\\r\\n                    <tr id=\\"{$product.key}\\">\\r\\n                        <td class=\\"ms-title\\">\\r\\n                            <div class=\\"d-flex\\">\\r\\n                                <div class=\\"ms-image mw-100 pr-3\\">\\r\\n                                    {if $product.id?}\\r\\n                                        <a href=\\"{$product.id | url}\\">{$image}<\\/a>\\r\\n                                    {else}\\r\\n                                        {$image}\\r\\n                                    {\\/if}\\r\\n                                <\\/div>\\r\\n                                <div class=\\"title\\">\\r\\n                                    {if $product.id?}\\r\\n                                        <a href=\\"{$product.id | url}\\">{$product.pagetitle}<\\/a>\\r\\n                                    {else}\\r\\n                                        {$product.name}\\r\\n                                    {\\/if}\\r\\n                                    {if $product.options?}\\r\\n                                        <div class=\\"small\\">\\r\\n                                            {$product.options | join : \'; \'}\\r\\n                                        <\\/div>\\r\\n                                    {\\/if}\\r\\n                                <\\/div>\\r\\n                            <\\/div>\\r\\n                        <\\/td>\\r\\n                        <td class=\\"ms-count\\">\\r\\n                            <form method=\\"post\\" class=\\"ms2_form\\" role=\\"form\\">\\r\\n                                <input type=\\"hidden\\" name=\\"key\\" value=\\"{$product.key}\\"\\/>\\r\\n                                <div class=\\"form-group\\">\\r\\n                                    <div class=\\"input-group input-group-sm\\">\\r\\n                                        <input type=\\"number\\" name=\\"count\\" value=\\"{$product.count}\\" class=\\"form-control\\"\\/>\\r\\n                                        <div class=\\"input-group-append\\">\\r\\n                                            <span class=\\"input-group-text\\">{\'ms2_frontend_count_unit\' | lexicon}<\\/span>\\r\\n                                        <\\/div>\\r\\n                                    <\\/div>\\r\\n                                    <button class=\\"btn btn-sm\\" type=\\"submit\\" name=\\"ms2_action\\" value=\\"cart\\/change\\">&#8635;<\\/button>\\r\\n                                <\\/div>\\r\\n                            <\\/form>\\r\\n                        <\\/td>\\r\\n                        <td class=\\"ms-weight\\">\\r\\n                            <span class=\\"text-nowrap\\">{$product.weight} {\'ms2_frontend_weight_unit\' | lexicon}<\\/span>\\r\\n                        <\\/td>\\r\\n                        <td class=\\"ms-price\\">\\r\\n                            <span class=\\"mr-2 text-nowrap\\">{$product.price} {\'ms2_frontend_currency\' | lexicon}<\\/span>\\r\\n                            {if $product.old_price?}\\r\\n                                <span class=\\"old_price text-nowrap\\">{$product.old_price} {\'ms2_frontend_currency\' | lexicon}<\\/span>\\r\\n                            {\\/if}\\r\\n                        <\\/td>\\r\\n                        <td class=\\"ms-cost\\">\\r\\n                            <span class=\\"mr-2 text-nowrap\\"><span class=\\"ms2_cost\\">{$product.cost}<\\/span> {\'ms2_frontend_currency\' | lexicon}<\\/span>\\r\\n                        <\\/td>\\r\\n                        <td class=\\"ms-remove\\">\\r\\n                            <form method=\\"post\\" class=\\"ms2_form text-md-right\\">\\r\\n                                <input type=\\"hidden\\" name=\\"key\\" value=\\"{$product.key}\\">\\r\\n                                <button class=\\"btn btn-sm btn-danger\\" type=\\"submit\\" name=\\"ms2_action\\" value=\\"cart\\/remove\\">&times;<\\/button>\\r\\n                            <\\/form>\\r\\n                        <\\/td>\\r\\n                    <\\/tr>\\r\\n                {\\/foreach}\\r\\n\\r\\n                <tr class=\\"ms-footer\\">\\r\\n                    <th class=\\"total\\">{\'ms2_cart_total\' | lexicon}:<\\/th>\\r\\n                    <th class=\\"total_count\\">\\r\\n                        <span class=\\"ms2_total_count\\">{$total.count}<\\/span>\\r\\n                        {\'ms2_frontend_count_unit\' | lexicon}\\r\\n                    <\\/th>\\r\\n                    <th class=\\"total_weight text-nowrap\\" colspan=\\"2\\">\\r\\n                        <span class=\\"ms2_total_weight\\">{$total.weight}<\\/span>\\r\\n                        {\'ms2_frontend_weight_unit\' | lexicon}\\r\\n                    <\\/th>\\r\\n                    <th class=\\"total_cost text-nowrap\\" colspan=\\"2\\">\\r\\n                        <span class=\\"ms2_total_cost\\">{$total.cost}<\\/span>\\r\\n                        {\'ms2_frontend_currency\' | lexicon}\\r\\n                    <\\/th>\\r\\n                <\\/tr>\\r\\n            <\\/table>\\r\\n        <\\/div>\\r\\n\\r\\n        <form method=\\"post\\" class=\\"ms2_form\\">\\r\\n            <button type=\\"submit\\" name=\\"ms2_action\\" value=\\"cart\\/clean\\" class=\\"btn btn-danger\\">\\r\\n                {\'ms2_cart_clean\' | lexicon}\\r\\n            <\\/button>\\r\\n        <\\/form>\\r\\n    {\\/if}\\r\\n<\\/div>\\r\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_cart.tpl","content":"<div id=\\"msCart\\">\\r\\n    {if $products | length == 0}\\r\\n        <div class=\\"alert alert-warning\\">\\r\\n            {\'ms2_cart_is_empty\' | lexicon}\\r\\n        <\\/div>\\r\\n    {else}\\r\\n        <div class=\\"table-responsive\\">\\r\\n            <table class=\\"table table-striped\\">\\r\\n                <tr class=\\"ms-header\\">\\r\\n                    <th class=\\"ms-title\\">{\'ms2_cart_title\' | lexicon}<\\/th>\\r\\n                    <th class=\\"ms-count\\">{\'ms2_cart_count\' | lexicon}<\\/th>\\r\\n                    <th class=\\"ms-weight\\">{\'ms2_cart_weight\' | lexicon}<\\/th>\\r\\n                    <th class=\\"ms-price\\">{\'ms2_cart_price\' | lexicon}<\\/th>\\r\\n                    <th class=\\"ms-cost\\">{\'ms2_cart_cost\' | lexicon}<\\/th>\\r\\n                    <th class=\\"ms-remove\\"><\\/th>\\r\\n                <\\/tr>\\r\\n\\r\\n                {foreach $products as $product}\\r\\n                    {var $image}\\r\\n                        {if $product.thumb?}\\r\\n                            <img src=\\"{$product.thumb}\\" alt=\\"{$product.pagetitle}\\" title=\\"{$product.pagetitle}\\"\\/>\\r\\n                        {else}\\r\\n                            <img src=\\"{\'assets_url\' | option}components\\/minishop2\\/img\\/web\\/ms2_small.png\\"\\r\\n                                srcset=\\"{\'assets_url\' | option}components\\/minishop2\\/img\\/web\\/ms2_small@2x.png 2x\\"\\r\\n                                alt=\\"{$product.pagetitle}\\" title=\\"{$product.pagetitle}\\"\\/>\\r\\n                        {\\/if}\\r\\n                    {\\/var}\\r\\n                    <tr id=\\"{$product.key}\\">\\r\\n                        <td class=\\"ms-title\\">\\r\\n                            <div class=\\"d-flex\\">\\r\\n                                <div class=\\"ms-image mw-100 pr-3\\">\\r\\n                                    {if $product.id?}\\r\\n                                        <a href=\\"{$product.id | url}\\">{$image}<\\/a>\\r\\n                                    {else}\\r\\n                                        {$image}\\r\\n                                    {\\/if}\\r\\n                                <\\/div>\\r\\n                                <div class=\\"title\\">\\r\\n                                    {if $product.id?}\\r\\n                                        <a href=\\"{$product.id | url}\\">{$product.pagetitle}<\\/a>\\r\\n                                    {else}\\r\\n                                        {$product.name}\\r\\n                                    {\\/if}\\r\\n                                    {if $product.options?}\\r\\n                                        <div class=\\"small\\">\\r\\n                                            {$product.options | join : \'; \'}\\r\\n                                        <\\/div>\\r\\n                                    {\\/if}\\r\\n                                <\\/div>\\r\\n                            <\\/div>\\r\\n                        <\\/td>\\r\\n                        <td class=\\"ms-count\\">\\r\\n                            <form method=\\"post\\" class=\\"ms2_form\\" role=\\"form\\">\\r\\n                                <input type=\\"hidden\\" name=\\"key\\" value=\\"{$product.key}\\"\\/>\\r\\n                                <div class=\\"form-group\\">\\r\\n                                    <div class=\\"input-group input-group-sm\\">\\r\\n                                        <input type=\\"number\\" name=\\"count\\" value=\\"{$product.count}\\" class=\\"form-control\\"\\/>\\r\\n                                        <div class=\\"input-group-append\\">\\r\\n                                            <span class=\\"input-group-text\\">{\'ms2_frontend_count_unit\' | lexicon}<\\/span>\\r\\n                                        <\\/div>\\r\\n                                    <\\/div>\\r\\n                                    <button class=\\"btn btn-sm\\" type=\\"submit\\" name=\\"ms2_action\\" value=\\"cart\\/change\\">&#8635;<\\/button>\\r\\n                                <\\/div>\\r\\n                            <\\/form>\\r\\n                        <\\/td>\\r\\n                        <td class=\\"ms-weight\\">\\r\\n                            <span class=\\"text-nowrap\\">{$product.weight} {\'ms2_frontend_weight_unit\' | lexicon}<\\/span>\\r\\n                        <\\/td>\\r\\n                        <td class=\\"ms-price\\">\\r\\n                            <span class=\\"mr-2 text-nowrap\\">{$product.price} {\'ms2_frontend_currency\' | lexicon}<\\/span>\\r\\n                            {if $product.old_price?}\\r\\n                                <span class=\\"old_price text-nowrap\\">{$product.old_price} {\'ms2_frontend_currency\' | lexicon}<\\/span>\\r\\n                            {\\/if}\\r\\n                        <\\/td>\\r\\n                        <td class=\\"ms-cost\\">\\r\\n                            <span class=\\"mr-2 text-nowrap\\"><span class=\\"ms2_cost\\">{$product.cost}<\\/span> {\'ms2_frontend_currency\' | lexicon}<\\/span>\\r\\n                        <\\/td>\\r\\n                        <td class=\\"ms-remove\\">\\r\\n                            <form method=\\"post\\" class=\\"ms2_form text-md-right\\">\\r\\n                                <input type=\\"hidden\\" name=\\"key\\" value=\\"{$product.key}\\">\\r\\n                                <button class=\\"btn btn-sm btn-danger\\" type=\\"submit\\" name=\\"ms2_action\\" value=\\"cart\\/remove\\">&times;<\\/button>\\r\\n                            <\\/form>\\r\\n                        <\\/td>\\r\\n                    <\\/tr>\\r\\n                {\\/foreach}\\r\\n\\r\\n                <tr class=\\"ms-footer\\">\\r\\n                    <th class=\\"total\\">{\'ms2_cart_total\' | lexicon}:<\\/th>\\r\\n                    <th class=\\"total_count\\">\\r\\n                        <span class=\\"ms2_total_count\\">{$total.count}<\\/span>\\r\\n                        {\'ms2_frontend_count_unit\' | lexicon}\\r\\n                    <\\/th>\\r\\n                    <th class=\\"total_weight text-nowrap\\" colspan=\\"2\\">\\r\\n                        <span class=\\"ms2_total_weight\\">{$total.weight}<\\/span>\\r\\n                        {\'ms2_frontend_weight_unit\' | lexicon}\\r\\n                    <\\/th>\\r\\n                    <th class=\\"total_cost text-nowrap\\" colspan=\\"2\\">\\r\\n                        <span class=\\"ms2_total_cost\\">{$total.cost}<\\/span>\\r\\n                        {\'ms2_frontend_currency\' | lexicon}\\r\\n                    <\\/th>\\r\\n                <\\/tr>\\r\\n            <\\/table>\\r\\n        <\\/div>\\r\\n\\r\\n        <form method=\\"post\\" class=\\"ms2_form\\">\\r\\n            <button type=\\"submit\\" name=\\"ms2_action\\" value=\\"cart\\/clean\\" class=\\"btn btn-danger\\">\\r\\n                {\'ms2_cart_clean\' | lexicon}\\r\\n            <\\/button>\\r\\n        <\\/form>\\r\\n    {\\/if}\\r\\n<\\/div>\\r\\n"}',
        'guid' => 'f7b4226419f719e651c8291b63bf1bf6',
        'native_key' => 0,
        'signature' => '8d4526cc436c2a6f5562ebf34e44453e',
      ),
      '93505690cb6c2368f2ed9e69019e91e5' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msCartNew","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div id=\\"msCart\\">\\r\\n    {if $products | length == 0}\\r\\n        <div class=\\"alert alert-warning\\">\\r\\n            {\'ms2_cart_is_empty\' | lexicon}\\r\\n        <\\/div>\\r\\n    {else}\\r\\n        <div class=\\"table-responsive\\">\\r\\n            <table class=\\"table table-striped\\">\\r\\n                <tr class=\\"ms-header\\">\\r\\n                    <th class=\\"ms-title\\">{\'ms2_cart_title\' | lexicon}<\\/th>\\r\\n                    <th class=\\"ms-count\\">{\'ms2_cart_count\' | lexicon}<\\/th>\\r\\n                    <th class=\\"ms-weight\\">{\'ms2_cart_weight\' | lexicon}<\\/th>\\r\\n                    <th class=\\"ms-price\\">{\'ms2_cart_price\' | lexicon}<\\/th>\\r\\n                    <th class=\\"ms-cost\\">{\'ms2_cart_cost\' | lexicon}<\\/th>\\r\\n                    <th class=\\"ms-remove\\"><\\/th>\\r\\n                <\\/tr>\\r\\n\\r\\n                {foreach $products as $product}\\r\\n                    {var $image}\\r\\n                    {if $product.thumb?}\\r\\n                        <img src=\\"{$product.thumb}\\" alt=\\"{$product.pagetitle}\\" title=\\"{$product.pagetitle}\\"\\/>\\r\\n                    {else}\\r\\n                        <img src=\\"{\'assets_url\' | option}components\\/minishop2\\/img\\/web\\/ms2_small.png\\"\\r\\n                             srcset=\\"{\'assets_url\' | option}components\\/minishop2\\/img\\/web\\/ms2_small@2x.png 2x\\"\\r\\n                             alt=\\"{$product.pagetitle}\\" title=\\"{$product.pagetitle}\\"\\/>\\r\\n                    {\\/if}\\r\\n                    {\\/var}\\r\\n                    <tr id=\\"{$product.key}\\">\\r\\n                        <td class=\\"ms-title\\">\\r\\n                            <div class=\\"d-flex\\">\\r\\n                                <div class=\\"ms-image mw-100 pr-3\\">\\r\\n                                    {if $product.id?}\\r\\n                                        <a href=\\"{$product.id | url}\\">{$image}<\\/a>\\r\\n                                    {else}\\r\\n                                        {$image}\\r\\n                                    {\\/if}\\r\\n                                <\\/div>\\r\\n                                <div class=\\"title\\">\\r\\n                                    {if $product.id?}\\r\\n                                        <a href=\\"{$product.id | url}\\">{$product.pagetitle}<\\/a>\\r\\n                                    {else}\\r\\n                                        {$product.name}\\r\\n                                    {\\/if}\\r\\n                                    {if $product.options?}\\r\\n                                        <div class=\\"small\\">\\r\\n                                            {$product.options | join : \'; \'}\\r\\n                                        <\\/div>\\r\\n                                    {\\/if}\\r\\n                                <\\/div>\\r\\n                            <\\/div>\\r\\n                        <\\/td>\\r\\n                        <td class=\\"ms-count\\">\\r\\n                            <form method=\\"post\\" class=\\"ms2_form\\" role=\\"form\\">\\r\\n                                <input type=\\"hidden\\" name=\\"key\\" value=\\"{$product.key}\\"\\/>\\r\\n                                <button type=\\"submit\\" class=\\"ms-hidden\\" name=\\"ms2_action\\" value=\\"cart\\/change\\"\\/>\\r\\n                                <\\/button>\\r\\n                                <div class=\\"ms-input-number-wrap\\">\\r\\n                                    <button class=\\"ms-input-number-btn ms-input-number-minus btn btn-sm btn-secondary\\" type=\\"button\\">&#8722;<\\/button>\\r\\n                                    <input class=\\"ms-input-number-emulator\\" value=\\"{$product.count}\\" name=\\"count\\" type=\\"text\\">\\r\\n                                    <button class=\\"ms-input-number-btn ms-input-number-plus btn btn-sm btn-secondary\\" type=\\"button\\">&#43;<\\/button>\\r\\n                                <\\/div>\\r\\n                            <\\/form>\\r\\n                        <\\/td>\\r\\n                        <td class=\\"ms-weight\\">\\r\\n                            <span class=\\"text-nowrap\\">{$product.weight} {\'ms2_frontend_weight_unit\' | lexicon}<\\/span>\\r\\n                        <\\/td>\\r\\n                        <td class=\\"ms-price\\">\\r\\n                            <span class=\\"mr-2 text-nowrap\\">{$product.price} {\'ms2_frontend_currency\' | lexicon}<\\/span>\\r\\n                            {if $product.old_price?}\\r\\n                                <span class=\\"old_price text-nowrap\\">{$product.old_price} {\'ms2_frontend_currency\' | lexicon}<\\/span>\\r\\n                            {\\/if}\\r\\n                        <\\/td>\\r\\n                        <td class=\\"ms-cost\\">\\r\\n                            <span class=\\"mr-2 text-nowrap\\"><span class=\\"ms2_cost\\">{$product.cost}<\\/span> {\'ms2_frontend_currency\' | lexicon}<\\/span>\\r\\n                        <\\/td>\\r\\n                        <td class=\\"ms-remove\\">\\r\\n                            <form method=\\"post\\" class=\\"ms2_form text-md-right\\">\\r\\n                                <input type=\\"hidden\\" name=\\"key\\" value=\\"{$product.key}\\">\\r\\n                                <button class=\\"btn btn-sm btn-danger\\" type=\\"submit\\" name=\\"ms2_action\\" value=\\"cart\\/remove\\">&times;<\\/button>\\r\\n                            <\\/form>\\r\\n                        <\\/td>\\r\\n                    <\\/tr>\\r\\n                {\\/foreach}\\r\\n\\r\\n                <tr class=\\"ms-footer\\">\\r\\n                    <th class=\\"total\\">{\'ms2_cart_total\' | lexicon}:<\\/th>\\r\\n                    <th class=\\"total_count\\">\\r\\n                        <span class=\\"ms2_total_count\\">{$total.count}<\\/span>\\r\\n                        {\'ms2_frontend_count_unit\' | lexicon}\\r\\n                    <\\/th>\\r\\n                    <th class=\\"total_weight text-nowrap\\" colspan=\\"2\\">\\r\\n                        <span class=\\"ms2_total_weight\\">{$total.weight}<\\/span>\\r\\n                        {\'ms2_frontend_weight_unit\' | lexicon}\\r\\n                    <\\/th>\\r\\n                    <th class=\\"total_cost text-nowrap\\" colspan=\\"2\\">\\r\\n                        <span class=\\"ms2_total_cost\\">{$total.cost}<\\/span>\\r\\n                        {\'ms2_frontend_currency\' | lexicon}\\r\\n                    <\\/th>\\r\\n                <\\/tr>\\r\\n            <\\/table>\\r\\n        <\\/div>\\r\\n        <form method=\\"post\\" class=\\"ms2_form\\">\\r\\n            <button type=\\"submit\\" name=\\"ms2_action\\" value=\\"cart\\/clean\\" class=\\"btn btn-danger\\">\\r\\n                {\'ms2_cart_clean\' | lexicon}\\r\\n            <\\/button>\\r\\n        <\\/form>\\r\\n    {\\/if}\\r\\n<\\/div>\\r\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_cart_new.tpl","content":"<div id=\\"msCart\\">\\r\\n    {if $products | length == 0}\\r\\n        <div class=\\"alert alert-warning\\">\\r\\n            {\'ms2_cart_is_empty\' | lexicon}\\r\\n        <\\/div>\\r\\n    {else}\\r\\n        <div class=\\"table-responsive\\">\\r\\n            <table class=\\"table table-striped\\">\\r\\n                <tr class=\\"ms-header\\">\\r\\n                    <th class=\\"ms-title\\">{\'ms2_cart_title\' | lexicon}<\\/th>\\r\\n                    <th class=\\"ms-count\\">{\'ms2_cart_count\' | lexicon}<\\/th>\\r\\n                    <th class=\\"ms-weight\\">{\'ms2_cart_weight\' | lexicon}<\\/th>\\r\\n                    <th class=\\"ms-price\\">{\'ms2_cart_price\' | lexicon}<\\/th>\\r\\n                    <th class=\\"ms-cost\\">{\'ms2_cart_cost\' | lexicon}<\\/th>\\r\\n                    <th class=\\"ms-remove\\"><\\/th>\\r\\n                <\\/tr>\\r\\n\\r\\n                {foreach $products as $product}\\r\\n                    {var $image}\\r\\n                    {if $product.thumb?}\\r\\n                        <img src=\\"{$product.thumb}\\" alt=\\"{$product.pagetitle}\\" title=\\"{$product.pagetitle}\\"\\/>\\r\\n                    {else}\\r\\n                        <img src=\\"{\'assets_url\' | option}components\\/minishop2\\/img\\/web\\/ms2_small.png\\"\\r\\n                             srcset=\\"{\'assets_url\' | option}components\\/minishop2\\/img\\/web\\/ms2_small@2x.png 2x\\"\\r\\n                             alt=\\"{$product.pagetitle}\\" title=\\"{$product.pagetitle}\\"\\/>\\r\\n                    {\\/if}\\r\\n                    {\\/var}\\r\\n                    <tr id=\\"{$product.key}\\">\\r\\n                        <td class=\\"ms-title\\">\\r\\n                            <div class=\\"d-flex\\">\\r\\n                                <div class=\\"ms-image mw-100 pr-3\\">\\r\\n                                    {if $product.id?}\\r\\n                                        <a href=\\"{$product.id | url}\\">{$image}<\\/a>\\r\\n                                    {else}\\r\\n                                        {$image}\\r\\n                                    {\\/if}\\r\\n                                <\\/div>\\r\\n                                <div class=\\"title\\">\\r\\n                                    {if $product.id?}\\r\\n                                        <a href=\\"{$product.id | url}\\">{$product.pagetitle}<\\/a>\\r\\n                                    {else}\\r\\n                                        {$product.name}\\r\\n                                    {\\/if}\\r\\n                                    {if $product.options?}\\r\\n                                        <div class=\\"small\\">\\r\\n                                            {$product.options | join : \'; \'}\\r\\n                                        <\\/div>\\r\\n                                    {\\/if}\\r\\n                                <\\/div>\\r\\n                            <\\/div>\\r\\n                        <\\/td>\\r\\n                        <td class=\\"ms-count\\">\\r\\n                            <form method=\\"post\\" class=\\"ms2_form\\" role=\\"form\\">\\r\\n                                <input type=\\"hidden\\" name=\\"key\\" value=\\"{$product.key}\\"\\/>\\r\\n                                <button type=\\"submit\\" class=\\"ms-hidden\\" name=\\"ms2_action\\" value=\\"cart\\/change\\"\\/>\\r\\n                                <\\/button>\\r\\n                                <div class=\\"ms-input-number-wrap\\">\\r\\n                                    <button class=\\"ms-input-number-btn ms-input-number-minus btn btn-sm btn-secondary\\" type=\\"button\\">&#8722;<\\/button>\\r\\n                                    <input class=\\"ms-input-number-emulator\\" value=\\"{$product.count}\\" name=\\"count\\" type=\\"text\\">\\r\\n                                    <button class=\\"ms-input-number-btn ms-input-number-plus btn btn-sm btn-secondary\\" type=\\"button\\">&#43;<\\/button>\\r\\n                                <\\/div>\\r\\n                            <\\/form>\\r\\n                        <\\/td>\\r\\n                        <td class=\\"ms-weight\\">\\r\\n                            <span class=\\"text-nowrap\\">{$product.weight} {\'ms2_frontend_weight_unit\' | lexicon}<\\/span>\\r\\n                        <\\/td>\\r\\n                        <td class=\\"ms-price\\">\\r\\n                            <span class=\\"mr-2 text-nowrap\\">{$product.price} {\'ms2_frontend_currency\' | lexicon}<\\/span>\\r\\n                            {if $product.old_price?}\\r\\n                                <span class=\\"old_price text-nowrap\\">{$product.old_price} {\'ms2_frontend_currency\' | lexicon}<\\/span>\\r\\n                            {\\/if}\\r\\n                        <\\/td>\\r\\n                        <td class=\\"ms-cost\\">\\r\\n                            <span class=\\"mr-2 text-nowrap\\"><span class=\\"ms2_cost\\">{$product.cost}<\\/span> {\'ms2_frontend_currency\' | lexicon}<\\/span>\\r\\n                        <\\/td>\\r\\n                        <td class=\\"ms-remove\\">\\r\\n                            <form method=\\"post\\" class=\\"ms2_form text-md-right\\">\\r\\n                                <input type=\\"hidden\\" name=\\"key\\" value=\\"{$product.key}\\">\\r\\n                                <button class=\\"btn btn-sm btn-danger\\" type=\\"submit\\" name=\\"ms2_action\\" value=\\"cart\\/remove\\">&times;<\\/button>\\r\\n                            <\\/form>\\r\\n                        <\\/td>\\r\\n                    <\\/tr>\\r\\n                {\\/foreach}\\r\\n\\r\\n                <tr class=\\"ms-footer\\">\\r\\n                    <th class=\\"total\\">{\'ms2_cart_total\' | lexicon}:<\\/th>\\r\\n                    <th class=\\"total_count\\">\\r\\n                        <span class=\\"ms2_total_count\\">{$total.count}<\\/span>\\r\\n                        {\'ms2_frontend_count_unit\' | lexicon}\\r\\n                    <\\/th>\\r\\n                    <th class=\\"total_weight text-nowrap\\" colspan=\\"2\\">\\r\\n                        <span class=\\"ms2_total_weight\\">{$total.weight}<\\/span>\\r\\n                        {\'ms2_frontend_weight_unit\' | lexicon}\\r\\n                    <\\/th>\\r\\n                    <th class=\\"total_cost text-nowrap\\" colspan=\\"2\\">\\r\\n                        <span class=\\"ms2_total_cost\\">{$total.cost}<\\/span>\\r\\n                        {\'ms2_frontend_currency\' | lexicon}\\r\\n                    <\\/th>\\r\\n                <\\/tr>\\r\\n            <\\/table>\\r\\n        <\\/div>\\r\\n        <form method=\\"post\\" class=\\"ms2_form\\">\\r\\n            <button type=\\"submit\\" name=\\"ms2_action\\" value=\\"cart\\/clean\\" class=\\"btn btn-danger\\">\\r\\n                {\'ms2_cart_clean\' | lexicon}\\r\\n            <\\/button>\\r\\n        <\\/form>\\r\\n    {\\/if}\\r\\n<\\/div>\\r\\n"}',
        'guid' => 'bdc3c8789d48fd9267df962ab8769503',
        'native_key' => 0,
        'signature' => 'a5a79e3115281277ad45fcebce623086',
      ),
      '103c86c822da8e7a458e444a28e10118' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msMiniCart","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"msMiniCart{$total_count > 0 ? \' full\' : \'\'}\\">\\r\\n    <div class=\\"empty\\">\\r\\n        <h5>{\'ms2_minicart\' | lexicon}<\\/h5>\\r\\n        {\'ms2_minicart_is_empty\' | lexicon}\\r\\n    <\\/div>\\r\\n    <div class=\\"not_empty\\">\\r\\n        <h5>{\'ms2_minicart\' | lexicon}<\\/h5>\\r\\n        {\'ms2_minicart_goods\' | lexicon} <strong class=\\"ms2_total_count\\">{$total_count}<\\/strong> {\'ms2_frontend_count_unit\' | lexicon},\\r\\n        {\'ms2_minicart_cost\' | lexicon} <strong class=\\"ms2_total_cost\\">{$total_cost}<\\/strong> {\'ms2_frontend_currency\' | lexicon}\\r\\n    <\\/div>\\r\\n<\\/div>\\r\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_minicart.tpl","content":"<div class=\\"msMiniCart{$total_count > 0 ? \' full\' : \'\'}\\">\\r\\n    <div class=\\"empty\\">\\r\\n        <h5>{\'ms2_minicart\' | lexicon}<\\/h5>\\r\\n        {\'ms2_minicart_is_empty\' | lexicon}\\r\\n    <\\/div>\\r\\n    <div class=\\"not_empty\\">\\r\\n        <h5>{\'ms2_minicart\' | lexicon}<\\/h5>\\r\\n        {\'ms2_minicart_goods\' | lexicon} <strong class=\\"ms2_total_count\\">{$total_count}<\\/strong> {\'ms2_frontend_count_unit\' | lexicon},\\r\\n        {\'ms2_minicart_cost\' | lexicon} <strong class=\\"ms2_total_cost\\">{$total_cost}<\\/strong> {\'ms2_frontend_currency\' | lexicon}\\r\\n    <\\/div>\\r\\n<\\/div>\\r\\n"}',
        'guid' => 'ea6810ee59218587b3bbd4c620954edd',
        'native_key' => 0,
        'signature' => 'b4a64eb8d7eef34534dc964552b89a3f',
      ),
      '7e93e23960b5dd8df35546d819192ab1' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msOrder","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<form class=\\"ms2_form\\" id=\\"msOrder\\" method=\\"post\\">\\r\\n    <div class=\\"row\\">\\r\\n        <div class=\\"col-12 col-md-6\\">\\r\\n            <h4>{\'ms2_frontend_credentials\' | lexicon}:<\\/h4>\\r\\n            {foreach [\'email\',\'receiver\',\'phone\'] as $field}\\r\\n                <div class=\\"form-group row input-parent\\">\\r\\n                    <label class=\\"col-md-4 col-form-label\\" for=\\"{$field}\\">\\r\\n                        {(\'ms2_frontend_\' ~ $field) | lexicon} <span class=\\"required-star\\">*<\\/span>\\r\\n                    <\\/label>\\r\\n                    <div class=\\"col-md-8\\">\\r\\n                        <input type=\\"text\\" id=\\"{$field}\\" placeholder=\\"{(\'ms2_frontend_\' ~ $field) | lexicon}\\"\\r\\n                            name=\\"{$field}\\" value=\\"{$form[$field]}\\"\\r\\n                            class=\\"form-control{($field in list $errors) ? \' error\' : \'\'}\\">\\r\\n                    <\\/div>\\r\\n                <\\/div>\\r\\n            {\\/foreach}\\r\\n\\r\\n            <div class=\\"form-group row input-parent\\">\\r\\n                <label class=\\"col-md-4 col-form-label\\" for=\\"comment\\">\\r\\n                    {\'ms2_frontend_comment\' | lexicon} <span class=\\"required-star\\">*<\\/span>\\r\\n                <\\/label>\\r\\n                <div class=\\"col-md-8\\">\\r\\n                    <textarea name=\\"comment\\" id=\\"comment\\" placeholder=\\"{\'ms2_frontend_comment\' | lexicon}\\"\\r\\n                        class=\\"form-control{(\'comment\' in list $errors) ? \' error\' : \'\'}\\">{$form.comment}<\\/textarea>\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n        <\\/div>\\r\\n\\r\\n        <div class=\\"col-12 col-md-6\\" id=\\"payments\\">\\r\\n            <h4>{\'ms2_frontend_payments\' | lexicon}:<\\/h4>\\r\\n            <div class=\\"form-group row\\">\\r\\n                <div class=\\"col-12\\">\\r\\n                    {foreach $payments as $payment index=$index}\\r\\n                        {var $checked = !($order.payment in keys $payments) && $index == 0 || $payment.id == $order.payment}\\r\\n                        <div class=\\"checkbox\\">\\r\\n                            <label class=\\"col-form-label payment input-parent\\">\\r\\n                                <input type=\\"radio\\" name=\\"payment\\" value=\\"{$payment.id}\\" id=\\"payment_{$payment.id}\\"{$checked ? \'checked\' : \'\'}>\\r\\n                                {if $payment.logo?}\\r\\n                                    <img src=\\"{$payment.logo}\\" alt=\\"{$payment.name}\\" title=\\"{$payment.name}\\" class=\\"mw-100\\"\\/>\\r\\n                                {else}\\r\\n                                    {$payment.name}\\r\\n                                {\\/if}\\r\\n                                {if $payment.description?}\\r\\n                                    <p class=\\"small\\">{$payment.description}<\\/p>\\r\\n                                {\\/if}\\r\\n                            <\\/label>\\r\\n                        <\\/div>\\r\\n                    {\\/foreach}\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n        <\\/div>\\r\\n    <\\/div>\\r\\n\\r\\n    <div class=\\"row\\">\\r\\n        <div class=\\"col-12 col-md-6\\" id=\\"deliveries\\">\\r\\n            <h4>{\'ms2_frontend_deliveries\' | lexicon}:<\\/h4>\\r\\n            <div class=\\"form-group row\\">\\r\\n                <div class=\\"col-12\\">\\r\\n                    {foreach $deliveries as $delivery index=$index}\\r\\n                        {var $checked = !($order.delivery in keys $deliveries) && $index == 0 || $delivery.id == $order.delivery}\\r\\n                        <div class=\\"checkbox\\">\\r\\n                            <label class=\\"col-form-label delivery input-parent\\">\\r\\n                                <input type=\\"radio\\" name=\\"delivery\\" value=\\"{$delivery.id}\\" id=\\"delivery_{$delivery.id}\\"\\r\\n                                    data-payments=\\"{$delivery.payments | json_encode}\\"\\r\\n                                    {$checked ? \'checked\' : \'\'}>\\r\\n                                {if $delivery.logo?}\\r\\n                                    <img src=\\"{$delivery.logo}\\" alt=\\"{$delivery.name}\\" title=\\"{$delivery.name}\\"\\/>\\r\\n                                {else}\\r\\n                                    {$delivery.name}\\r\\n                                {\\/if}\\r\\n                                {if $delivery.description?}\\r\\n                                    <p class=\\"small\\">\\r\\n                                        {$delivery.description}\\r\\n                                    <\\/p>\\r\\n                                {\\/if}\\r\\n                            <\\/label>\\r\\n                        <\\/div>\\r\\n                    {\\/foreach}\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n        <\\/div>\\r\\n\\r\\n        <div class=\\"col-12 col-md-6\\">\\r\\n            <h4>{\'ms2_frontend_address\' | lexicon}:<\\/h4>\\r\\n            {foreach [\'index\',\'region\',\'city\', \'street\', \'building\', \'entrance\',\'floor\', \'room\'] as $field}\\r\\n                <div class=\\"form-group row input-parent\\">\\r\\n                    <label class=\\"col-md-4 col-form-label\\" for=\\"{$field}\\">\\r\\n                        {(\'ms2_frontend_\' ~ $field) | lexicon} <span class=\\"required-star\\">*<\\/span>\\r\\n                    <\\/label>\\r\\n                    <div class=\\"col-md-8\\">\\r\\n                        <input type=\\"text\\" id=\\"{$field}\\" placeholder=\\"{(\'ms2_frontend_\' ~ $field) | lexicon}\\"\\r\\n                            name=\\"{$field}\\" value=\\"{$form[$field]}\\"\\r\\n                            class=\\"form-control{($field in list $errors) ? \' error\' : \'\'}\\">\\r\\n                    <\\/div>\\r\\n                <\\/div>\\r\\n            {\\/foreach}\\r\\n\\r\\n            <div class=\\"form-group row input-parent\\">\\r\\n                <label class=\\"col-md-4 col-form-label\\" for=\\"text_address\\">\\r\\n                    {\'ms2_frontend_text_address\' | lexicon} <span class=\\"required-star\\">*<\\/span>\\r\\n                <\\/label>\\r\\n                <div class=\\"col-md-8\\">\\r\\n                    <textarea name=\\"text_address\\" id=\\"text_address\\" placeholder=\\"{\'ms2_frontend_text_address\' | lexicon}\\"\\r\\n                        class=\\"form-control{(\'text_address\' in list $errors) ? \' error\' : \'\'}\\">{$form.text_address}<\\/textarea>\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n\\r\\n        <\\/div>\\r\\n\\r\\n    <\\/div>\\r\\n\\r\\n    <button type=\\"button\\" name=\\"ms2_action\\" value=\\"order\\/clean\\" class=\\"btn btn-danger ms2_link\\">\\r\\n        {\'ms2_frontend_order_cancel\' | lexicon}\\r\\n    <\\/button>\\r\\n\\r\\n    <hr class=\\"mt-4 mb-4\\"\\/>\\r\\n\\r\\n\\r\\n    <div class=\\"d-flex flex-column flex-md-row align-items-center justify-content-center justify-content-md-end mb-5\\">\\r\\n        <h4 class=\\"mb-md-0\\">{\'ms2_frontend_order_cost\' | lexicon}:<\\/h4>\\r\\n        <h3 class=\\"mb-md-0 ml-md-2\\">\\r\\n            <span id=\\"ms2_order_cart_cost\\">{$order.cart_cost ?: 0}<\\/span> {\'ms2_frontend_currency\' | lexicon} +\\r\\n            <span id=\\"ms2_order_delivery_cost\\">{$order.delivery_cost ?: 0}<\\/span> {\'ms2_frontend_currency\' | lexicon} =\\r\\n            <span id=\\"ms2_order_cost\\">{$order.cost ?: 0}<\\/span> {\'ms2_frontend_currency\' | lexicon}\\r\\n        <\\/h3>\\r\\n\\r\\n        <button type=\\"submit\\" name=\\"ms2_action\\" value=\\"order\\/submit\\" class=\\"btn btn-lg btn-primary ml-md-2 ms2_link\\">\\r\\n            {\'ms2_frontend_order_submit\' | lexicon}\\r\\n        <\\/button>\\r\\n    <\\/div>\\r\\n<\\/form>\\r\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_order.tpl","content":"<form class=\\"ms2_form\\" id=\\"msOrder\\" method=\\"post\\">\\r\\n    <div class=\\"row\\">\\r\\n        <div class=\\"col-12 col-md-6\\">\\r\\n            <h4>{\'ms2_frontend_credentials\' | lexicon}:<\\/h4>\\r\\n            {foreach [\'email\',\'receiver\',\'phone\'] as $field}\\r\\n                <div class=\\"form-group row input-parent\\">\\r\\n                    <label class=\\"col-md-4 col-form-label\\" for=\\"{$field}\\">\\r\\n                        {(\'ms2_frontend_\' ~ $field) | lexicon} <span class=\\"required-star\\">*<\\/span>\\r\\n                    <\\/label>\\r\\n                    <div class=\\"col-md-8\\">\\r\\n                        <input type=\\"text\\" id=\\"{$field}\\" placeholder=\\"{(\'ms2_frontend_\' ~ $field) | lexicon}\\"\\r\\n                            name=\\"{$field}\\" value=\\"{$form[$field]}\\"\\r\\n                            class=\\"form-control{($field in list $errors) ? \' error\' : \'\'}\\">\\r\\n                    <\\/div>\\r\\n                <\\/div>\\r\\n            {\\/foreach}\\r\\n\\r\\n            <div class=\\"form-group row input-parent\\">\\r\\n                <label class=\\"col-md-4 col-form-label\\" for=\\"comment\\">\\r\\n                    {\'ms2_frontend_comment\' | lexicon} <span class=\\"required-star\\">*<\\/span>\\r\\n                <\\/label>\\r\\n                <div class=\\"col-md-8\\">\\r\\n                    <textarea name=\\"comment\\" id=\\"comment\\" placeholder=\\"{\'ms2_frontend_comment\' | lexicon}\\"\\r\\n                        class=\\"form-control{(\'comment\' in list $errors) ? \' error\' : \'\'}\\">{$form.comment}<\\/textarea>\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n        <\\/div>\\r\\n\\r\\n        <div class=\\"col-12 col-md-6\\" id=\\"payments\\">\\r\\n            <h4>{\'ms2_frontend_payments\' | lexicon}:<\\/h4>\\r\\n            <div class=\\"form-group row\\">\\r\\n                <div class=\\"col-12\\">\\r\\n                    {foreach $payments as $payment index=$index}\\r\\n                        {var $checked = !($order.payment in keys $payments) && $index == 0 || $payment.id == $order.payment}\\r\\n                        <div class=\\"checkbox\\">\\r\\n                            <label class=\\"col-form-label payment input-parent\\">\\r\\n                                <input type=\\"radio\\" name=\\"payment\\" value=\\"{$payment.id}\\" id=\\"payment_{$payment.id}\\"{$checked ? \'checked\' : \'\'}>\\r\\n                                {if $payment.logo?}\\r\\n                                    <img src=\\"{$payment.logo}\\" alt=\\"{$payment.name}\\" title=\\"{$payment.name}\\" class=\\"mw-100\\"\\/>\\r\\n                                {else}\\r\\n                                    {$payment.name}\\r\\n                                {\\/if}\\r\\n                                {if $payment.description?}\\r\\n                                    <p class=\\"small\\">{$payment.description}<\\/p>\\r\\n                                {\\/if}\\r\\n                            <\\/label>\\r\\n                        <\\/div>\\r\\n                    {\\/foreach}\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n        <\\/div>\\r\\n    <\\/div>\\r\\n\\r\\n    <div class=\\"row\\">\\r\\n        <div class=\\"col-12 col-md-6\\" id=\\"deliveries\\">\\r\\n            <h4>{\'ms2_frontend_deliveries\' | lexicon}:<\\/h4>\\r\\n            <div class=\\"form-group row\\">\\r\\n                <div class=\\"col-12\\">\\r\\n                    {foreach $deliveries as $delivery index=$index}\\r\\n                        {var $checked = !($order.delivery in keys $deliveries) && $index == 0 || $delivery.id == $order.delivery}\\r\\n                        <div class=\\"checkbox\\">\\r\\n                            <label class=\\"col-form-label delivery input-parent\\">\\r\\n                                <input type=\\"radio\\" name=\\"delivery\\" value=\\"{$delivery.id}\\" id=\\"delivery_{$delivery.id}\\"\\r\\n                                    data-payments=\\"{$delivery.payments | json_encode}\\"\\r\\n                                    {$checked ? \'checked\' : \'\'}>\\r\\n                                {if $delivery.logo?}\\r\\n                                    <img src=\\"{$delivery.logo}\\" alt=\\"{$delivery.name}\\" title=\\"{$delivery.name}\\"\\/>\\r\\n                                {else}\\r\\n                                    {$delivery.name}\\r\\n                                {\\/if}\\r\\n                                {if $delivery.description?}\\r\\n                                    <p class=\\"small\\">\\r\\n                                        {$delivery.description}\\r\\n                                    <\\/p>\\r\\n                                {\\/if}\\r\\n                            <\\/label>\\r\\n                        <\\/div>\\r\\n                    {\\/foreach}\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n        <\\/div>\\r\\n\\r\\n        <div class=\\"col-12 col-md-6\\">\\r\\n            <h4>{\'ms2_frontend_address\' | lexicon}:<\\/h4>\\r\\n            {foreach [\'index\',\'region\',\'city\', \'street\', \'building\', \'entrance\',\'floor\', \'room\'] as $field}\\r\\n                <div class=\\"form-group row input-parent\\">\\r\\n                    <label class=\\"col-md-4 col-form-label\\" for=\\"{$field}\\">\\r\\n                        {(\'ms2_frontend_\' ~ $field) | lexicon} <span class=\\"required-star\\">*<\\/span>\\r\\n                    <\\/label>\\r\\n                    <div class=\\"col-md-8\\">\\r\\n                        <input type=\\"text\\" id=\\"{$field}\\" placeholder=\\"{(\'ms2_frontend_\' ~ $field) | lexicon}\\"\\r\\n                            name=\\"{$field}\\" value=\\"{$form[$field]}\\"\\r\\n                            class=\\"form-control{($field in list $errors) ? \' error\' : \'\'}\\">\\r\\n                    <\\/div>\\r\\n                <\\/div>\\r\\n            {\\/foreach}\\r\\n\\r\\n            <div class=\\"form-group row input-parent\\">\\r\\n                <label class=\\"col-md-4 col-form-label\\" for=\\"text_address\\">\\r\\n                    {\'ms2_frontend_text_address\' | lexicon} <span class=\\"required-star\\">*<\\/span>\\r\\n                <\\/label>\\r\\n                <div class=\\"col-md-8\\">\\r\\n                    <textarea name=\\"text_address\\" id=\\"text_address\\" placeholder=\\"{\'ms2_frontend_text_address\' | lexicon}\\"\\r\\n                        class=\\"form-control{(\'text_address\' in list $errors) ? \' error\' : \'\'}\\">{$form.text_address}<\\/textarea>\\r\\n                <\\/div>\\r\\n            <\\/div>\\r\\n\\r\\n        <\\/div>\\r\\n\\r\\n    <\\/div>\\r\\n\\r\\n    <button type=\\"button\\" name=\\"ms2_action\\" value=\\"order\\/clean\\" class=\\"btn btn-danger ms2_link\\">\\r\\n        {\'ms2_frontend_order_cancel\' | lexicon}\\r\\n    <\\/button>\\r\\n\\r\\n    <hr class=\\"mt-4 mb-4\\"\\/>\\r\\n\\r\\n\\r\\n    <div class=\\"d-flex flex-column flex-md-row align-items-center justify-content-center justify-content-md-end mb-5\\">\\r\\n        <h4 class=\\"mb-md-0\\">{\'ms2_frontend_order_cost\' | lexicon}:<\\/h4>\\r\\n        <h3 class=\\"mb-md-0 ml-md-2\\">\\r\\n            <span id=\\"ms2_order_cart_cost\\">{$order.cart_cost ?: 0}<\\/span> {\'ms2_frontend_currency\' | lexicon} +\\r\\n            <span id=\\"ms2_order_delivery_cost\\">{$order.delivery_cost ?: 0}<\\/span> {\'ms2_frontend_currency\' | lexicon} =\\r\\n            <span id=\\"ms2_order_cost\\">{$order.cost ?: 0}<\\/span> {\'ms2_frontend_currency\' | lexicon}\\r\\n        <\\/h3>\\r\\n\\r\\n        <button type=\\"submit\\" name=\\"ms2_action\\" value=\\"order\\/submit\\" class=\\"btn btn-lg btn-primary ml-md-2 ms2_link\\">\\r\\n            {\'ms2_frontend_order_submit\' | lexicon}\\r\\n        <\\/button>\\r\\n    <\\/div>\\r\\n<\\/form>\\r\\n"}',
        'guid' => '1f7a928d896cf5624fa9e3cce695816b',
        'native_key' => 0,
        'signature' => '50a65a11a96294303930197a0ff02aa5',
      ),
      '4018f4bae01530180e3ca6f7ee904784' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msGetOrder","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div id=\\"msCart\\">\\r\\n    <div class=\\"table-responsive\\">\\r\\n        <table class=\\"table table-striped\\">\\r\\n            <tr class=\\"ms-header\\">\\r\\n                <th class=\\"ms-title\\">{\'ms2_cart_title\' | lexicon}<\\/th>\\r\\n                <th class=\\"ms-count\\">{\'ms2_cart_count\' | lexicon}<\\/th>\\r\\n                <th class=\\"ms-weight\\">{\'ms2_cart_weight\' | lexicon}<\\/th>\\r\\n                <th class=\\"ms-price\\">{\'ms2_cart_cost\' | lexicon}<\\/th>\\r\\n            <\\/tr>\\r\\n            {foreach $products as $product}\\r\\n                {var $image}\\r\\n                {if $product.thumb?}\\r\\n                    <img src=\\"{$product.thumb}\\" alt=\\"{$product.pagetitle}\\" title=\\"{$product.pagetitle}\\"\\/>\\r\\n                {else}\\r\\n                    <img src=\\"{\'assets_url\' | option}components\\/minishop2\\/img\\/web\\/ms2_small.png\\"\\r\\n                        srcset=\\"{\'assets_url\' | option}components\\/minishop2\\/img\\/web\\/ms2_small@2x.png 2x\\"\\r\\n                        alt=\\"{$product.pagetitle}\\" title=\\"{$product.pagetitle}\\"\\/>\\r\\n                {\\/if}\\r\\n                {\\/var}\\r\\n                <tr>\\r\\n                    <td class=\\"ms-title\\">\\r\\n                        <div class=\\"d-flex\\">\\r\\n                            <div class=\\"ms-image mw-100 pr-3\\">\\r\\n                                {if $product.id?}\\r\\n                                    <a href=\\"{$product.id | url}\\">{$image}<\\/a>\\r\\n                                {else}\\r\\n                                    {$image}\\r\\n                                {\\/if}\\r\\n                            <\\/div>\\r\\n                            <div class=\\"title\\">\\r\\n                                {if $product.id?}\\r\\n                                    <a href=\\"{$product.id | url}\\">{$product.pagetitle}<\\/a>\\r\\n                                {else}\\r\\n                                    {$product.name}\\r\\n                                {\\/if}\\r\\n                                {if $product.options?}\\r\\n                                    <div class=\\"small\\">\\r\\n                                        {$product.options | join : \'; \'}\\r\\n                                    <\\/div>\\r\\n                                {\\/if}\\r\\n                            <\\/div>\\r\\n                        <\\/div>\\r\\n                    <\\/td>\\r\\n                    <td class=\\"ms-count text-nowrap\\">{$product.count} {\'ms2_frontend_count_unit\' | lexicon}<\\/td>\\r\\n                    <td class=\\"ms-weight text-nowrap\\">{$product.weight} {\'ms2_frontend_weight_unit\' | lexicon}<\\/td>\\r\\n                    <td class=\\"ms-price text-nowrap\\">{$product.price} {\'ms2_frontend_currency\' | lexicon}<\\/td>\\r\\n                <\\/tr>\\r\\n            {\\/foreach}\\r\\n            <tr class=\\"ms-footer\\">\\r\\n                <th class=\\"total\\">{\'ms2_cart_total\' | lexicon}:<\\/th>\\r\\n                <th class=\\"total_count text-nowrap\\">\\r\\n                    <span class=\\"ms2_total_count\\">{$total.cart_count}<\\/span> {\'ms2_frontend_count_unit\' | lexicon}\\r\\n                <\\/th>\\r\\n                <th class=\\"total_weight text-nowrap\\">\\r\\n                    <span class=\\"ms2_total_weight\\">{$total.cart_weight}<\\/span> {\'ms2_frontend_weight_unit\' | lexicon}\\r\\n                <\\/th>\\r\\n                <th class=\\"total_cost text-nowrap\\">\\r\\n                    <span class=\\"ms2_total_cost\\">{$total.cart_cost}<\\/span> {\'ms2_frontend_currency\' | lexicon}\\r\\n                <\\/th>\\r\\n            <\\/tr>\\r\\n        <\\/table>\\r\\n    <\\/div>\\r\\n\\r\\n    <h4>\\r\\n        {\'ms2_frontend_order_cost\' | lexicon}:\\r\\n        {if $total.delivery_cost}\\r\\n            {$total.cart_cost} {\'ms2_frontend_currency\' | lexicon} + {$total.delivery_cost}\\r\\n            {\'ms2_frontend_currency\' | lexicon} =\\r\\n        {\\/if}\\r\\n        <strong>{$total.cost}<\\/strong> {\'ms2_frontend_currency\' | lexicon}\\r\\n    <\\/h4>\\r\\n\\r\\n    {if $payment_link?}\\r\\n        <p>{\'ms2_payment_link\' | lexicon : [\'link\' => $payment_link]}<\\/p>\\r\\n    {\\/if}\\r\\n\\r\\n<\\/div>\\r\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_get_order.tpl","content":"<div id=\\"msCart\\">\\r\\n    <div class=\\"table-responsive\\">\\r\\n        <table class=\\"table table-striped\\">\\r\\n            <tr class=\\"ms-header\\">\\r\\n                <th class=\\"ms-title\\">{\'ms2_cart_title\' | lexicon}<\\/th>\\r\\n                <th class=\\"ms-count\\">{\'ms2_cart_count\' | lexicon}<\\/th>\\r\\n                <th class=\\"ms-weight\\">{\'ms2_cart_weight\' | lexicon}<\\/th>\\r\\n                <th class=\\"ms-price\\">{\'ms2_cart_cost\' | lexicon}<\\/th>\\r\\n            <\\/tr>\\r\\n            {foreach $products as $product}\\r\\n                {var $image}\\r\\n                {if $product.thumb?}\\r\\n                    <img src=\\"{$product.thumb}\\" alt=\\"{$product.pagetitle}\\" title=\\"{$product.pagetitle}\\"\\/>\\r\\n                {else}\\r\\n                    <img src=\\"{\'assets_url\' | option}components\\/minishop2\\/img\\/web\\/ms2_small.png\\"\\r\\n                        srcset=\\"{\'assets_url\' | option}components\\/minishop2\\/img\\/web\\/ms2_small@2x.png 2x\\"\\r\\n                        alt=\\"{$product.pagetitle}\\" title=\\"{$product.pagetitle}\\"\\/>\\r\\n                {\\/if}\\r\\n                {\\/var}\\r\\n                <tr>\\r\\n                    <td class=\\"ms-title\\">\\r\\n                        <div class=\\"d-flex\\">\\r\\n                            <div class=\\"ms-image mw-100 pr-3\\">\\r\\n                                {if $product.id?}\\r\\n                                    <a href=\\"{$product.id | url}\\">{$image}<\\/a>\\r\\n                                {else}\\r\\n                                    {$image}\\r\\n                                {\\/if}\\r\\n                            <\\/div>\\r\\n                            <div class=\\"title\\">\\r\\n                                {if $product.id?}\\r\\n                                    <a href=\\"{$product.id | url}\\">{$product.pagetitle}<\\/a>\\r\\n                                {else}\\r\\n                                    {$product.name}\\r\\n                                {\\/if}\\r\\n                                {if $product.options?}\\r\\n                                    <div class=\\"small\\">\\r\\n                                        {$product.options | join : \'; \'}\\r\\n                                    <\\/div>\\r\\n                                {\\/if}\\r\\n                            <\\/div>\\r\\n                        <\\/div>\\r\\n                    <\\/td>\\r\\n                    <td class=\\"ms-count text-nowrap\\">{$product.count} {\'ms2_frontend_count_unit\' | lexicon}<\\/td>\\r\\n                    <td class=\\"ms-weight text-nowrap\\">{$product.weight} {\'ms2_frontend_weight_unit\' | lexicon}<\\/td>\\r\\n                    <td class=\\"ms-price text-nowrap\\">{$product.price} {\'ms2_frontend_currency\' | lexicon}<\\/td>\\r\\n                <\\/tr>\\r\\n            {\\/foreach}\\r\\n            <tr class=\\"ms-footer\\">\\r\\n                <th class=\\"total\\">{\'ms2_cart_total\' | lexicon}:<\\/th>\\r\\n                <th class=\\"total_count text-nowrap\\">\\r\\n                    <span class=\\"ms2_total_count\\">{$total.cart_count}<\\/span> {\'ms2_frontend_count_unit\' | lexicon}\\r\\n                <\\/th>\\r\\n                <th class=\\"total_weight text-nowrap\\">\\r\\n                    <span class=\\"ms2_total_weight\\">{$total.cart_weight}<\\/span> {\'ms2_frontend_weight_unit\' | lexicon}\\r\\n                <\\/th>\\r\\n                <th class=\\"total_cost text-nowrap\\">\\r\\n                    <span class=\\"ms2_total_cost\\">{$total.cart_cost}<\\/span> {\'ms2_frontend_currency\' | lexicon}\\r\\n                <\\/th>\\r\\n            <\\/tr>\\r\\n        <\\/table>\\r\\n    <\\/div>\\r\\n\\r\\n    <h4>\\r\\n        {\'ms2_frontend_order_cost\' | lexicon}:\\r\\n        {if $total.delivery_cost}\\r\\n            {$total.cart_cost} {\'ms2_frontend_currency\' | lexicon} + {$total.delivery_cost}\\r\\n            {\'ms2_frontend_currency\' | lexicon} =\\r\\n        {\\/if}\\r\\n        <strong>{$total.cost}<\\/strong> {\'ms2_frontend_currency\' | lexicon}\\r\\n    <\\/h4>\\r\\n\\r\\n    {if $payment_link?}\\r\\n        <p>{\'ms2_payment_link\' | lexicon : [\'link\' => $payment_link]}<\\/p>\\r\\n    {\\/if}\\r\\n\\r\\n<\\/div>\\r\\n"}',
        'guid' => 'ea7a9b85d6f14a15d0fc9d1e33e86bb2',
        'native_key' => 0,
        'signature' => '78a03bdff83507a2ad5e52a1f7203efc',
      ),
      '98dd88f0f12a8827edf3ce0e342c0eae' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msOptions","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"{foreach $options as $name => $values}\\r\\n    <div class=\\"form-group row align-items-center\\">\\r\\n        <label class=\\"col-6 col-md-3 text-right text-md-left col-form-label\\" for=\\"option_{$name}\\">{(\'ms2_product_\' ~ $name) | lexicon}:<\\/label>\\r\\n        <div class=\\"col-6 col-md-9\\">\\r\\n            <select name=\\"options[{$name}]\\" class=\\"form-control col-md-6\\" id=\\"option_{$name}\\">\\r\\n                {foreach $values as $value}\\r\\n                    <option value=\\"{$value}\\">{$value}<\\/option>\\r\\n                {\\/foreach}\\r\\n            <\\/select>\\r\\n        <\\/div>\\r\\n    <\\/div>\\r\\n{\\/foreach}\\r\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_options.tpl","content":"{foreach $options as $name => $values}\\r\\n    <div class=\\"form-group row align-items-center\\">\\r\\n        <label class=\\"col-6 col-md-3 text-right text-md-left col-form-label\\" for=\\"option_{$name}\\">{(\'ms2_product_\' ~ $name) | lexicon}:<\\/label>\\r\\n        <div class=\\"col-6 col-md-9\\">\\r\\n            <select name=\\"options[{$name}]\\" class=\\"form-control col-md-6\\" id=\\"option_{$name}\\">\\r\\n                {foreach $values as $value}\\r\\n                    <option value=\\"{$value}\\">{$value}<\\/option>\\r\\n                {\\/foreach}\\r\\n            <\\/select>\\r\\n        <\\/div>\\r\\n    <\\/div>\\r\\n{\\/foreach}\\r\\n"}',
        'guid' => 'cabe23208af092843cf4008f563714c9',
        'native_key' => 0,
        'signature' => 'b4697e2c12cd34e15f64d85cd1d88184',
      ),
      '2f9ef87b4191cdc9a458500b3d61043d' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msProductOptions","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"{foreach $options as $option}\\r\\n    <div class=\\"form-group row align-items-center\\">\\r\\n        <label class=\\"col-6 col-md-3 text-right text-md-left col-form-label\\">{$option.caption}:<\\/label>\\r\\n        <div class=\\"col-6 col-md-9\\">\\r\\n            {if $option.value is array}\\r\\n                {$option.value | join : \', \'}\\r\\n            {else}\\r\\n                {$option.value}\\r\\n            {\\/if}\\r\\n        <\\/div>\\r\\n    <\\/div>\\r\\n{\\/foreach}\\r\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_product_options.tpl","content":"{foreach $options as $option}\\r\\n    <div class=\\"form-group row align-items-center\\">\\r\\n        <label class=\\"col-6 col-md-3 text-right text-md-left col-form-label\\">{$option.caption}:<\\/label>\\r\\n        <div class=\\"col-6 col-md-9\\">\\r\\n            {if $option.value is array}\\r\\n                {$option.value | join : \', \'}\\r\\n            {else}\\r\\n                {$option.value}\\r\\n            {\\/if}\\r\\n        <\\/div>\\r\\n    <\\/div>\\r\\n{\\/foreach}\\r\\n"}',
        'guid' => 'efbd5f890aa9415e18eac82dbd4009ce',
        'native_key' => 0,
        'signature' => '1be5807ec497f590da43adfdd29e7f34',
      ),
      '514daea43707c8fe824daf161f616afe' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msGallery","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div id=\\"msGallery\\">\\r\\n    {if $files}\\r\\n        <div>\\r\\n            {foreach $files as $file}\\r\\n                <a href=\\"{$file[\'url\']}\\" target=\\"_blank\\">\\r\\n                    <img src=\\"{$file[\'small\']}\\" alt=\\"{$file[\'description\']}\\" title=\\"{$file[\'name\']}\\">\\r\\n                <\\/a>\\r\\n            {\\/foreach}\\r\\n        <\\/div>\\r\\n    {else}\\r\\n        <img src=\\"{(\'assets_url\' | option) ~ \'components\\/minishop2\\/img\\/web\\/ms2_medium.png\'}\\"\\r\\n            srcset=\\"{(\'assets_url\' | option) ~ \'components\\/minishop2\\/img\\/web\\/ms2_medium@2x.png\'} 2x\\"\\r\\n            alt=\\"\\" title=\\"\\"\\/>\\r\\n    {\\/if}\\r\\n<\\/div>\\r\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_gallery.tpl","content":"<div id=\\"msGallery\\">\\r\\n    {if $files}\\r\\n        <div>\\r\\n            {foreach $files as $file}\\r\\n                <a href=\\"{$file[\'url\']}\\" target=\\"_blank\\">\\r\\n                    <img src=\\"{$file[\'small\']}\\" alt=\\"{$file[\'description\']}\\" title=\\"{$file[\'name\']}\\">\\r\\n                <\\/a>\\r\\n            {\\/foreach}\\r\\n        <\\/div>\\r\\n    {else}\\r\\n        <img src=\\"{(\'assets_url\' | option) ~ \'components\\/minishop2\\/img\\/web\\/ms2_medium.png\'}\\"\\r\\n            srcset=\\"{(\'assets_url\' | option) ~ \'components\\/minishop2\\/img\\/web\\/ms2_medium@2x.png\'} 2x\\"\\r\\n            alt=\\"\\" title=\\"\\"\\/>\\r\\n    {\\/if}\\r\\n<\\/div>\\r\\n"}',
        'guid' => '711a0499155d20a6dfe4dbb9a683285b',
        'native_key' => 0,
        'signature' => 'ab519d70b097eb99af5fd86febf8f73c',
      ),
      'fb8b3866ab3e7f7c2b173d56822b949d' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msGalleryNew","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<link rel=\\"stylesheet\\" href=\\"https:\\/\\/cdn.jsdelivr.net\\/npm\\/swiper@8\\/swiper-bundle.min.css\\"\\/>\\r\\n<script src=\\"https:\\/\\/cdn.jsdelivr.net\\/npm\\/swiper@8\\/swiper-bundle.min.js\\"><\\/script>\\r\\n\\r\\n<style>\\r\\n    :root {\\r\\n        --swiper-theme-color: #9c9c9c;\\r\\n    }\\r\\n    .swiper {\\r\\n        width: 100%;\\r\\n        height: 100%;\\r\\n        background-color: #dedede;\\r\\n    }\\r\\n\\r\\n    .swiper-slide {\\r\\n        text-align: center;\\r\\n        font-size: 18px;\\r\\n\\r\\n        \\/* Center slide text vertically *\\/\\r\\n        display: -webkit-box;\\r\\n        display: -ms-flexbox;\\r\\n        display: -webkit-flex;\\r\\n        display: flex;\\r\\n        -webkit-box-pack: center;\\r\\n        -ms-flex-pack: center;\\r\\n        -webkit-justify-content: center;\\r\\n        justify-content: center;\\r\\n        -webkit-box-align: center;\\r\\n        -ms-flex-align: center;\\r\\n        -webkit-align-items: center;\\r\\n        align-items: center;\\r\\n    }\\r\\n\\r\\n    .swiper-slide img {\\r\\n        display: block;\\r\\n        width: 100%;\\r\\n        height: 100%;\\r\\n        object-fit: cover;\\r\\n    }\\r\\n\\r\\n    .swiper {\\r\\n        width: 100%;\\r\\n        height: 300px;\\r\\n        margin-left: auto;\\r\\n        margin-right: auto;\\r\\n    }\\r\\n\\r\\n    .swiper-slide {\\r\\n        background-size: cover;\\r\\n        background-position: center;\\r\\n    }\\r\\n\\r\\n    .mySwiper2 {\\r\\n        height: 80%;\\r\\n        width: 100%;\\r\\n    }\\r\\n    .mySwiper2 .swiper-slide {\\r\\n        padding: 1px 1px 0 1px;\\r\\n    }\\r\\n\\r\\n    .mySwiper {\\r\\n        height: 20%;\\r\\n        box-sizing: border-box;\\r\\n        padding: 1px;\\r\\n    }\\r\\n\\r\\n    .mySwiper .swiper-slide {\\r\\n        width: 25%;\\r\\n        height: 100%;\\r\\n        opacity: 0.7;\\r\\n    }\\r\\n\\r\\n    .mySwiper .swiper-slide-thumb-active {\\r\\n        opacity: 1;\\r\\n    }\\r\\n\\r\\n    .swiper-slide img {\\r\\n        display: block;\\r\\n        width: 100%;\\r\\n        height: 100%;\\r\\n        object-fit: cover;\\r\\n    }\\r\\n<\\/style>\\r\\n\\r\\n<div id=\\"msGallery\\">\\r\\n    {if $files?}\\r\\n        {set $slides = \'\'}\\r\\n        {foreach $files as $file}\\r\\n            {set $slides = $slides ~ \'<div class=\\"swiper-slide\\"><img src=\\"\'~$file[\'small\']~\'\\" alt=\\"\'~$file[\'description\']~\'\\" title=\\"\'~$file[\'name\']~\'\\"><\\/div>\'}\\r\\n        {\\/foreach}\\r\\n        <div class=\\"swiper mySwiper2\\">\\r\\n            <div class=\\"swiper-wrapper\\">\\r\\n                {$slides}\\r\\n            <\\/div>\\r\\n            <div class=\\"swiper-button-next\\"><\\/div>\\r\\n            <div class=\\"swiper-button-prev\\"><\\/div>\\r\\n        <\\/div>\\r\\n        <div class=\\"swiper mySwiper\\">\\r\\n            <div class=\\"swiper-wrapper\\">\\r\\n               {$slides}\\r\\n            <\\/div>\\r\\n        <\\/div>\\r\\n    {else}\\r\\n        <img src=\\"{(\'assets_url\' | option) ~ \'components\\/minishop2\\/img\\/web\\/ms2_medium.png\'}\\"\\r\\n             srcset=\\"{(\'assets_url\' | option) ~ \'components\\/minishop2\\/img\\/web\\/ms2_medium@2x.png\'} 2x\\"\\r\\n             alt=\\"\\" title=\\"\\"\\/>\\r\\n    {\\/if}\\r\\n<\\/div>\\r\\n\\r\\n<script>\\r\\n    var swiper = new Swiper(\\".mySwiper\\", {\\r\\n        loop: true,\\r\\n        spaceBetween: 1,\\r\\n        slidesPerView: 4,\\r\\n        freeMode: true,\\r\\n        watchSlidesProgress: true,\\r\\n    });\\r\\n    var swiper2 = new Swiper(\\".mySwiper2\\", {\\r\\n        loop: true,\\r\\n        spaceBetween: 1,\\r\\n        navigation: {\\r\\n            nextEl: \\".swiper-button-next\\",\\r\\n            prevEl: \\".swiper-button-prev\\",\\r\\n        },\\r\\n        thumbs: {\\r\\n            swiper: swiper,\\r\\n        },\\r\\n    });\\r\\n<\\/script>\\r\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_gallery_new.tpl","content":"<link rel=\\"stylesheet\\" href=\\"https:\\/\\/cdn.jsdelivr.net\\/npm\\/swiper@8\\/swiper-bundle.min.css\\"\\/>\\r\\n<script src=\\"https:\\/\\/cdn.jsdelivr.net\\/npm\\/swiper@8\\/swiper-bundle.min.js\\"><\\/script>\\r\\n\\r\\n<style>\\r\\n    :root {\\r\\n        --swiper-theme-color: #9c9c9c;\\r\\n    }\\r\\n    .swiper {\\r\\n        width: 100%;\\r\\n        height: 100%;\\r\\n        background-color: #dedede;\\r\\n    }\\r\\n\\r\\n    .swiper-slide {\\r\\n        text-align: center;\\r\\n        font-size: 18px;\\r\\n\\r\\n        \\/* Center slide text vertically *\\/\\r\\n        display: -webkit-box;\\r\\n        display: -ms-flexbox;\\r\\n        display: -webkit-flex;\\r\\n        display: flex;\\r\\n        -webkit-box-pack: center;\\r\\n        -ms-flex-pack: center;\\r\\n        -webkit-justify-content: center;\\r\\n        justify-content: center;\\r\\n        -webkit-box-align: center;\\r\\n        -ms-flex-align: center;\\r\\n        -webkit-align-items: center;\\r\\n        align-items: center;\\r\\n    }\\r\\n\\r\\n    .swiper-slide img {\\r\\n        display: block;\\r\\n        width: 100%;\\r\\n        height: 100%;\\r\\n        object-fit: cover;\\r\\n    }\\r\\n\\r\\n    .swiper {\\r\\n        width: 100%;\\r\\n        height: 300px;\\r\\n        margin-left: auto;\\r\\n        margin-right: auto;\\r\\n    }\\r\\n\\r\\n    .swiper-slide {\\r\\n        background-size: cover;\\r\\n        background-position: center;\\r\\n    }\\r\\n\\r\\n    .mySwiper2 {\\r\\n        height: 80%;\\r\\n        width: 100%;\\r\\n    }\\r\\n    .mySwiper2 .swiper-slide {\\r\\n        padding: 1px 1px 0 1px;\\r\\n    }\\r\\n\\r\\n    .mySwiper {\\r\\n        height: 20%;\\r\\n        box-sizing: border-box;\\r\\n        padding: 1px;\\r\\n    }\\r\\n\\r\\n    .mySwiper .swiper-slide {\\r\\n        width: 25%;\\r\\n        height: 100%;\\r\\n        opacity: 0.7;\\r\\n    }\\r\\n\\r\\n    .mySwiper .swiper-slide-thumb-active {\\r\\n        opacity: 1;\\r\\n    }\\r\\n\\r\\n    .swiper-slide img {\\r\\n        display: block;\\r\\n        width: 100%;\\r\\n        height: 100%;\\r\\n        object-fit: cover;\\r\\n    }\\r\\n<\\/style>\\r\\n\\r\\n<div id=\\"msGallery\\">\\r\\n    {if $files?}\\r\\n        {set $slides = \'\'}\\r\\n        {foreach $files as $file}\\r\\n            {set $slides = $slides ~ \'<div class=\\"swiper-slide\\"><img src=\\"\'~$file[\'small\']~\'\\" alt=\\"\'~$file[\'description\']~\'\\" title=\\"\'~$file[\'name\']~\'\\"><\\/div>\'}\\r\\n        {\\/foreach}\\r\\n        <div class=\\"swiper mySwiper2\\">\\r\\n            <div class=\\"swiper-wrapper\\">\\r\\n                {$slides}\\r\\n            <\\/div>\\r\\n            <div class=\\"swiper-button-next\\"><\\/div>\\r\\n            <div class=\\"swiper-button-prev\\"><\\/div>\\r\\n        <\\/div>\\r\\n        <div class=\\"swiper mySwiper\\">\\r\\n            <div class=\\"swiper-wrapper\\">\\r\\n               {$slides}\\r\\n            <\\/div>\\r\\n        <\\/div>\\r\\n    {else}\\r\\n        <img src=\\"{(\'assets_url\' | option) ~ \'components\\/minishop2\\/img\\/web\\/ms2_medium.png\'}\\"\\r\\n             srcset=\\"{(\'assets_url\' | option) ~ \'components\\/minishop2\\/img\\/web\\/ms2_medium@2x.png\'} 2x\\"\\r\\n             alt=\\"\\" title=\\"\\"\\/>\\r\\n    {\\/if}\\r\\n<\\/div>\\r\\n\\r\\n<script>\\r\\n    var swiper = new Swiper(\\".mySwiper\\", {\\r\\n        loop: true,\\r\\n        spaceBetween: 1,\\r\\n        slidesPerView: 4,\\r\\n        freeMode: true,\\r\\n        watchSlidesProgress: true,\\r\\n    });\\r\\n    var swiper2 = new Swiper(\\".mySwiper2\\", {\\r\\n        loop: true,\\r\\n        spaceBetween: 1,\\r\\n        navigation: {\\r\\n            nextEl: \\".swiper-button-next\\",\\r\\n            prevEl: \\".swiper-button-prev\\",\\r\\n        },\\r\\n        thumbs: {\\r\\n            swiper: swiper,\\r\\n        },\\r\\n    });\\r\\n<\\/script>\\r\\n"}',
        'guid' => 'c1e1c7fdcb0eda12a72a6a566c14d377',
        'native_key' => 0,
        'signature' => '061acdebaffb7d25652532104a986d71',
      ),
      '751bb4cb026221aea92fab02314f779d' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msEmail","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"{var $style = [\\r\\n\'logo\' => \'display:block;margin: auto;\',\\r\\n\'a\' => \'color:#348eda;\',\\r\\n\'p\' => \'font-family: Arial;color: #666666;font-size: 12px;\',\\r\\n\'h\' => \'font-family:Arial;color: #111111;font-weight: 200;line-height: 1.2em;margin: 40px 20px;\',\\r\\n\'h1\' => \'font-size: 36px;\',\\r\\n\'h2\' => \'font-size: 28px;\',\\r\\n\'h3\' => \'font-size: 22px;\',\\r\\n\'th\' => \'font-family: Arial;text-align: left;color: #111111;\',\\r\\n\'td\' => \'font-family: Arial;text-align: left;color: #111111;\',\\r\\n]}\\r\\n\\r\\n{var $site_url = (\'site_url\' | option) | preg_replace : \'#\\/$#\' : \'\'}\\r\\n{var $assets_url = \'assets_url\' | option}\\r\\n<!DOCTYPE html PUBLIC \\"-\\/\\/W3C\\/\\/DTD XHTML 1.0 Transitional\\/\\/EN\\"\\r\\n        \\"http:\\/\\/www.w3.org\\/TR\\/xhtml1\\/DTD\\/xhtml1-transitional.dtd\\">\\r\\n<html xmlns=\\"http:\\/\\/www.w3.org\\/1999\\/xhtml\\">\\r\\n<head>\\r\\n    <meta http-equiv=\\"Content-Type\\" content=\\"text\\/html; charset=utf-8\\"\\/>\\r\\n    <title>{\'site_name\' | option}<\\/title>\\r\\n<\\/head>\\r\\n<body style=\\"margin:0;padding:0;background:#f6f6f6;\\">\\r\\n<div style=\\"height:100%;padding-top:20px;background:#f6f6f6;\\">\\r\\n    {block \'logo\'}\\r\\n        <a href=\\"{$site_url}\\">\\r\\n            <img style=\\"{$style.logo}\\"\\r\\n                src=\\"{$site_url}{$assets_url}components\\/minishop2\\/img\\/web\\/ms2_small@2x.png\\"\\r\\n                alt=\\"{$site_url}\\"\\r\\n                width=\\"120\\" height=\\"90\\"\\/>\\r\\n        <\\/a>\\r\\n    {\\/block}\\r\\n    <!-- body -->\\r\\n    <table class=\\"body-wrap\\" style=\\"padding:0 20px 20px 20px;width: 100%;background:#f6f6f6;margin-top:10px;\\">\\r\\n        <tr>\\r\\n            <td><\\/td>\\r\\n            <td class=\\"container\\" style=\\"border:1px solid #f0f0f0;background:#ffffff;width:800px;margin:auto;\\">\\r\\n                <div class=\\"content\\">\\r\\n                    <table style=\\"width:100%;\\">\\r\\n                        <tr>\\r\\n                            <td>\\r\\n                                <h3 style=\\"{$style.h}{$style.h3}\\">\\r\\n                                    {block \'title\'}\\r\\n                                        miniShop2\\r\\n                                    {\\/block}\\r\\n                                <\\/h3>\\r\\n\\r\\n                                {block \'products\'}\\r\\n                                    <table style=\\"width:90%;margin:auto;\\">\\r\\n                                        <thead>\\r\\n                                        <tr>\\r\\n                                            <th>&nbsp;<\\/th>\\r\\n                                            <th style=\\"{$style.th}\\">{\'ms2_cart_title\' | lexicon}<\\/th>\\r\\n                                            <th style=\\"{$style.th}\\">{\'ms2_cart_count\' | lexicon}<\\/th>\\r\\n                                            <th style=\\"{$style.th}\\">{\'ms2_cart_weight\' | lexicon}<\\/th>\\r\\n                                            <th style=\\"{$style.th}\\">{\'ms2_cart_cost\' | lexicon}<\\/th>\\r\\n                                        <\\/tr>\\r\\n                                        <\\/thead>\\r\\n                                        {foreach $products as $product}\\r\\n                                            <tr>\\r\\n                                                <td style=\\"{$style.th}\\">\\r\\n                                                    {if $product.thumb?}\\r\\n                                                        <img src=\\"{$site_url}{$product.thumb}\\"\\r\\n                                                            alt=\\"{$product.pagetitle}\\"\\r\\n                                                            title=\\"{$product.pagetitle}\\"\\r\\n                                                            width=\\"120\\" height=\\"90\\"\\/>\\r\\n                                                    {else}\\r\\n                                                        <img src=\\"{$site_url}{$assets_url}components\\/minishop2\\/img\\/web\\/ms2_small@2x.png\\"\\r\\n                                                            alt=\\"{$product.pagetitle}\\"\\r\\n                                                            title=\\"{$product.pagetitle}\\"\\r\\n                                                            width=\\"120\\" height=\\"90\\"\\/>\\r\\n                                                    {\\/if}\\r\\n                                                <\\/td>\\r\\n                                                <td style=\\"{$style.th}\\">\\r\\n                                                    {if $product.id?}\\r\\n                                                        <a href=\\"{$product.id | url : [\'scheme\' => \'full\']}\\"\\r\\n                                                            style=\\"{$style.a}\\">\\r\\n                                                            {$product.name}\\r\\n                                                        <\\/a>\\r\\n                                                    {else}\\r\\n                                                        {$product.name}\\r\\n                                                    {\\/if}\\r\\n                                                    {if $product.options?}\\r\\n                                                        <div class=\\"small\\">\\r\\n                                                            {$product.options | join : \'; \'}\\r\\n                                                        <\\/div>\\r\\n                                                    {\\/if}\\r\\n                                                <\\/td>\\r\\n                                                <td style=\\"{$style.th}\\">{$product.count} {\'ms2_frontend_count_unit\' | lexicon}<\\/td>\\r\\n                                                <td style=\\"{$style.th}\\">{$product.weight} {\'ms2_frontend_weight_unit\' | lexicon}<\\/td>\\r\\n                                                <td style=\\"{$style.th}\\">{$product.price} {\'ms2_frontend_currency\' | lexicon}<\\/td>\\r\\n                                            <\\/tr>\\r\\n                                        {\\/foreach}\\r\\n                                        <tfoot>\\r\\n                                        <tr>\\r\\n                                            <th colspan=\\"2\\"><\\/th>\\r\\n                                            <th style=\\"{$style.th}\\">\\r\\n                                                {$total.cart_count} {\'ms2_frontend_count_unit\' | lexicon}\\r\\n                                            <\\/th>\\r\\n                                            <th style=\\"{$style.th}\\">\\r\\n                                                {$total.cart_weight} {\'ms2_frontend_weight_unit\' | lexicon}\\r\\n                                            <\\/th>\\r\\n                                            <th style=\\"{$style.th}\\">\\r\\n                                                {$total.cart_cost} {\'ms2_frontend_currency\' | lexicon}\\r\\n                                            <\\/th>\\r\\n                                        <\\/tr>\\r\\n                                        <\\/tfoot>\\r\\n                                    <\\/table>\\r\\n                                    <h3 style=\\"{$style.h}{$style.h3}\\">\\r\\n                                        {\'ms2_frontend_order_cost\' | lexicon}:\\r\\n                                        {if $total.delivery_cost}\\r\\n                                            {$total.cart_cost} {\'ms2_frontend_currency\' | lexicon} + {$total.delivery_cost}\\r\\n                                            {\'ms2_frontend_currency\' | lexicon} =\\r\\n                                        {\\/if}\\r\\n                                        <strong>{$total.cost}<\\/strong> {\'ms2_frontend_currency\' | lexicon}\\r\\n                                    <\\/h3>\\r\\n                                {\\/block}\\r\\n                            <\\/td>\\r\\n                        <\\/tr>\\r\\n                    <\\/table>\\r\\n                <\\/div>\\r\\n                <!-- \\/content -->\\r\\n            <\\/td>\\r\\n            <td><\\/td>\\r\\n        <\\/tr>\\r\\n    <\\/table>\\r\\n    <!-- \\/body -->\\r\\n    <!-- footer -->\\r\\n    <table style=\\"clear:both !important;width: 100%;\\">\\r\\n        <tr>\\r\\n            <td><\\/td>\\r\\n            <td class=\\"container\\">\\r\\n                <!-- content -->\\r\\n                <div class=\\"content\\">\\r\\n                    <table style=\\"width:100%;text-align: center;\\">\\r\\n                        <tr>\\r\\n                            <td align=\\"center\\">\\r\\n                                <p style=\\"{$style.p}\\">\\r\\n                                    {block \'footer\'}\\r\\n                                    <a href=\\"{$site_url}\\" style=\\"color: #999999;\\">\\r\\n                                        {\'site_name\' | option}\\r\\n                                    <\\/a>\\r\\n                                    {\\/block}\\r\\n                                <\\/p>\\r\\n                            <\\/td>\\r\\n                        <\\/tr>\\r\\n                    <\\/table>\\r\\n                <\\/div>\\r\\n                <!-- \\/content -->\\r\\n            <\\/td>\\r\\n            <td><\\/td>\\r\\n        <\\/tr>\\r\\n    <\\/table>\\r\\n    <!-- \\/footer -->\\r\\n<\\/div>\\r\\n<\\/body>\\r\\n<\\/html>\\r\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_email.tpl","content":"{var $style = [\\r\\n\'logo\' => \'display:block;margin: auto;\',\\r\\n\'a\' => \'color:#348eda;\',\\r\\n\'p\' => \'font-family: Arial;color: #666666;font-size: 12px;\',\\r\\n\'h\' => \'font-family:Arial;color: #111111;font-weight: 200;line-height: 1.2em;margin: 40px 20px;\',\\r\\n\'h1\' => \'font-size: 36px;\',\\r\\n\'h2\' => \'font-size: 28px;\',\\r\\n\'h3\' => \'font-size: 22px;\',\\r\\n\'th\' => \'font-family: Arial;text-align: left;color: #111111;\',\\r\\n\'td\' => \'font-family: Arial;text-align: left;color: #111111;\',\\r\\n]}\\r\\n\\r\\n{var $site_url = (\'site_url\' | option) | preg_replace : \'#\\/$#\' : \'\'}\\r\\n{var $assets_url = \'assets_url\' | option}\\r\\n<!DOCTYPE html PUBLIC \\"-\\/\\/W3C\\/\\/DTD XHTML 1.0 Transitional\\/\\/EN\\"\\r\\n        \\"http:\\/\\/www.w3.org\\/TR\\/xhtml1\\/DTD\\/xhtml1-transitional.dtd\\">\\r\\n<html xmlns=\\"http:\\/\\/www.w3.org\\/1999\\/xhtml\\">\\r\\n<head>\\r\\n    <meta http-equiv=\\"Content-Type\\" content=\\"text\\/html; charset=utf-8\\"\\/>\\r\\n    <title>{\'site_name\' | option}<\\/title>\\r\\n<\\/head>\\r\\n<body style=\\"margin:0;padding:0;background:#f6f6f6;\\">\\r\\n<div style=\\"height:100%;padding-top:20px;background:#f6f6f6;\\">\\r\\n    {block \'logo\'}\\r\\n        <a href=\\"{$site_url}\\">\\r\\n            <img style=\\"{$style.logo}\\"\\r\\n                src=\\"{$site_url}{$assets_url}components\\/minishop2\\/img\\/web\\/ms2_small@2x.png\\"\\r\\n                alt=\\"{$site_url}\\"\\r\\n                width=\\"120\\" height=\\"90\\"\\/>\\r\\n        <\\/a>\\r\\n    {\\/block}\\r\\n    <!-- body -->\\r\\n    <table class=\\"body-wrap\\" style=\\"padding:0 20px 20px 20px;width: 100%;background:#f6f6f6;margin-top:10px;\\">\\r\\n        <tr>\\r\\n            <td><\\/td>\\r\\n            <td class=\\"container\\" style=\\"border:1px solid #f0f0f0;background:#ffffff;width:800px;margin:auto;\\">\\r\\n                <div class=\\"content\\">\\r\\n                    <table style=\\"width:100%;\\">\\r\\n                        <tr>\\r\\n                            <td>\\r\\n                                <h3 style=\\"{$style.h}{$style.h3}\\">\\r\\n                                    {block \'title\'}\\r\\n                                        miniShop2\\r\\n                                    {\\/block}\\r\\n                                <\\/h3>\\r\\n\\r\\n                                {block \'products\'}\\r\\n                                    <table style=\\"width:90%;margin:auto;\\">\\r\\n                                        <thead>\\r\\n                                        <tr>\\r\\n                                            <th>&nbsp;<\\/th>\\r\\n                                            <th style=\\"{$style.th}\\">{\'ms2_cart_title\' | lexicon}<\\/th>\\r\\n                                            <th style=\\"{$style.th}\\">{\'ms2_cart_count\' | lexicon}<\\/th>\\r\\n                                            <th style=\\"{$style.th}\\">{\'ms2_cart_weight\' | lexicon}<\\/th>\\r\\n                                            <th style=\\"{$style.th}\\">{\'ms2_cart_cost\' | lexicon}<\\/th>\\r\\n                                        <\\/tr>\\r\\n                                        <\\/thead>\\r\\n                                        {foreach $products as $product}\\r\\n                                            <tr>\\r\\n                                                <td style=\\"{$style.th}\\">\\r\\n                                                    {if $product.thumb?}\\r\\n                                                        <img src=\\"{$site_url}{$product.thumb}\\"\\r\\n                                                            alt=\\"{$product.pagetitle}\\"\\r\\n                                                            title=\\"{$product.pagetitle}\\"\\r\\n                                                            width=\\"120\\" height=\\"90\\"\\/>\\r\\n                                                    {else}\\r\\n                                                        <img src=\\"{$site_url}{$assets_url}components\\/minishop2\\/img\\/web\\/ms2_small@2x.png\\"\\r\\n                                                            alt=\\"{$product.pagetitle}\\"\\r\\n                                                            title=\\"{$product.pagetitle}\\"\\r\\n                                                            width=\\"120\\" height=\\"90\\"\\/>\\r\\n                                                    {\\/if}\\r\\n                                                <\\/td>\\r\\n                                                <td style=\\"{$style.th}\\">\\r\\n                                                    {if $product.id?}\\r\\n                                                        <a href=\\"{$product.id | url : [\'scheme\' => \'full\']}\\"\\r\\n                                                            style=\\"{$style.a}\\">\\r\\n                                                            {$product.name}\\r\\n                                                        <\\/a>\\r\\n                                                    {else}\\r\\n                                                        {$product.name}\\r\\n                                                    {\\/if}\\r\\n                                                    {if $product.options?}\\r\\n                                                        <div class=\\"small\\">\\r\\n                                                            {$product.options | join : \'; \'}\\r\\n                                                        <\\/div>\\r\\n                                                    {\\/if}\\r\\n                                                <\\/td>\\r\\n                                                <td style=\\"{$style.th}\\">{$product.count} {\'ms2_frontend_count_unit\' | lexicon}<\\/td>\\r\\n                                                <td style=\\"{$style.th}\\">{$product.weight} {\'ms2_frontend_weight_unit\' | lexicon}<\\/td>\\r\\n                                                <td style=\\"{$style.th}\\">{$product.price} {\'ms2_frontend_currency\' | lexicon}<\\/td>\\r\\n                                            <\\/tr>\\r\\n                                        {\\/foreach}\\r\\n                                        <tfoot>\\r\\n                                        <tr>\\r\\n                                            <th colspan=\\"2\\"><\\/th>\\r\\n                                            <th style=\\"{$style.th}\\">\\r\\n                                                {$total.cart_count} {\'ms2_frontend_count_unit\' | lexicon}\\r\\n                                            <\\/th>\\r\\n                                            <th style=\\"{$style.th}\\">\\r\\n                                                {$total.cart_weight} {\'ms2_frontend_weight_unit\' | lexicon}\\r\\n                                            <\\/th>\\r\\n                                            <th style=\\"{$style.th}\\">\\r\\n                                                {$total.cart_cost} {\'ms2_frontend_currency\' | lexicon}\\r\\n                                            <\\/th>\\r\\n                                        <\\/tr>\\r\\n                                        <\\/tfoot>\\r\\n                                    <\\/table>\\r\\n                                    <h3 style=\\"{$style.h}{$style.h3}\\">\\r\\n                                        {\'ms2_frontend_order_cost\' | lexicon}:\\r\\n                                        {if $total.delivery_cost}\\r\\n                                            {$total.cart_cost} {\'ms2_frontend_currency\' | lexicon} + {$total.delivery_cost}\\r\\n                                            {\'ms2_frontend_currency\' | lexicon} =\\r\\n                                        {\\/if}\\r\\n                                        <strong>{$total.cost}<\\/strong> {\'ms2_frontend_currency\' | lexicon}\\r\\n                                    <\\/h3>\\r\\n                                {\\/block}\\r\\n                            <\\/td>\\r\\n                        <\\/tr>\\r\\n                    <\\/table>\\r\\n                <\\/div>\\r\\n                <!-- \\/content -->\\r\\n            <\\/td>\\r\\n            <td><\\/td>\\r\\n        <\\/tr>\\r\\n    <\\/table>\\r\\n    <!-- \\/body -->\\r\\n    <!-- footer -->\\r\\n    <table style=\\"clear:both !important;width: 100%;\\">\\r\\n        <tr>\\r\\n            <td><\\/td>\\r\\n            <td class=\\"container\\">\\r\\n                <!-- content -->\\r\\n                <div class=\\"content\\">\\r\\n                    <table style=\\"width:100%;text-align: center;\\">\\r\\n                        <tr>\\r\\n                            <td align=\\"center\\">\\r\\n                                <p style=\\"{$style.p}\\">\\r\\n                                    {block \'footer\'}\\r\\n                                    <a href=\\"{$site_url}\\" style=\\"color: #999999;\\">\\r\\n                                        {\'site_name\' | option}\\r\\n                                    <\\/a>\\r\\n                                    {\\/block}\\r\\n                                <\\/p>\\r\\n                            <\\/td>\\r\\n                        <\\/tr>\\r\\n                    <\\/table>\\r\\n                <\\/div>\\r\\n                <!-- \\/content -->\\r\\n            <\\/td>\\r\\n            <td><\\/td>\\r\\n        <\\/tr>\\r\\n    <\\/table>\\r\\n    <!-- \\/footer -->\\r\\n<\\/div>\\r\\n<\\/body>\\r\\n<\\/html>\\r\\n"}',
        'guid' => 'e931a3d0b208f2138e3a595470e71c11',
        'native_key' => 0,
        'signature' => '45de7a1a71d562d9d77c5c21cc83ed38',
      ),
      '08504b2c4bfbbbb57da013b22a2c1735' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msEmail.new.user","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"{extends \'tpl.msEmail\'}\\r\\n\\r\\n{block \'title\'}\\r\\n    {\'ms2_email_subject_new_user\' | lexicon : $order}\\r\\n{\\/block}\\r\\n\\r\\n{block \'products\'}\\r\\n    {parent}\\r\\n    {if $payment_link?}\\r\\n        <p style=\\"margin-left:20px;{$style.p}\\">\\r\\n            {\'ms2_payment_link\' | lexicon : [\'link\' => $payment_link]}\\r\\n        <\\/p>\\r\\n    {\\/if}\\r\\n{\\/block}\\r\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_email_new_user.tpl","content":"{extends \'tpl.msEmail\'}\\r\\n\\r\\n{block \'title\'}\\r\\n    {\'ms2_email_subject_new_user\' | lexicon : $order}\\r\\n{\\/block}\\r\\n\\r\\n{block \'products\'}\\r\\n    {parent}\\r\\n    {if $payment_link?}\\r\\n        <p style=\\"margin-left:20px;{$style.p}\\">\\r\\n            {\'ms2_payment_link\' | lexicon : [\'link\' => $payment_link]}\\r\\n        <\\/p>\\r\\n    {\\/if}\\r\\n{\\/block}\\r\\n"}',
        'guid' => 'ecc4ea122936f2de72f5d8684fbe14f7',
        'native_key' => 0,
        'signature' => '8e982be28dca14bd953a5054d0321c08',
      ),
      '104ddbb1a5d07e0774df0515deafec5e' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msEmail.new.manager","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"{extends \'tpl.msEmail\'}\\r\\n\\r\\n{block \'title\'}\\r\\n    {\'ms2_email_subject_new_manager\' | lexicon : $order}\\r\\n{\\/block}\\r\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_email_new_manager.tpl","content":"{extends \'tpl.msEmail\'}\\r\\n\\r\\n{block \'title\'}\\r\\n    {\'ms2_email_subject_new_manager\' | lexicon : $order}\\r\\n{\\/block}\\r\\n"}',
        'guid' => 'cbe0a376d7c2282426049443a900f3f9',
        'native_key' => 0,
        'signature' => '1a44c7f6e5d835c9abac7f4a7bdd215d',
      ),
      'd9e6acf6a4812ea73cac33e09fc45797' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msEmail.paid.user","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"{extends \'tpl.msEmail\'}\\r\\n\\r\\n{block \'title\'}\\r\\n    {\'ms2_email_subject_paid_user\' | lexicon : $order}\\r\\n{\\/block}\\r\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_email_paid_user.tpl","content":"{extends \'tpl.msEmail\'}\\r\\n\\r\\n{block \'title\'}\\r\\n    {\'ms2_email_subject_paid_user\' | lexicon : $order}\\r\\n{\\/block}\\r\\n"}',
        'guid' => '149198a3aa3fe10ab01fc66c7abc2397',
        'native_key' => 0,
        'signature' => 'a263fef19d8e649c036426af3606823a',
      ),
      '11794fdc4a1492eb44e0432b259fb79e' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msEmail.paid.manager","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"{extends \'tpl.msEmail\'}\\r\\n\\r\\n{block \'title\'}\\r\\n    {\'ms2_email_subject_paid_manager\' | lexicon : $order}\\r\\n{\\/block}\\r\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_email_paid_manager.tpl","content":"{extends \'tpl.msEmail\'}\\r\\n\\r\\n{block \'title\'}\\r\\n    {\'ms2_email_subject_paid_manager\' | lexicon : $order}\\r\\n{\\/block}\\r\\n"}',
        'guid' => '1ebd7f5bcc9def05862114ae5a6b64f9',
        'native_key' => 0,
        'signature' => '0cbcb661aa080c5452f1d886998cb129',
      ),
      'd3ceb92a63e492f7d54beec8ac182ace' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msEmail.sent.user","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"{extends \'tpl.msEmail\'}\\r\\n\\r\\n{block \'title\'}\\r\\n    {\'ms2_email_subject_sent_user\' | lexicon : $order}\\r\\n{\\/block}\\r\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_email_sent_user.tpl","content":"{extends \'tpl.msEmail\'}\\r\\n\\r\\n{block \'title\'}\\r\\n    {\'ms2_email_subject_sent_user\' | lexicon : $order}\\r\\n{\\/block}\\r\\n"}',
        'guid' => '6964bcae9f7637905defa2c4b65a488b',
        'native_key' => 0,
        'signature' => 'adfb5ed99ca762e52863447fe8dca96b',
      ),
      '778328c71608415238b6e550a1350702' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msEmail.cancelled.user","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"{extends \'tpl.msEmail\'}\\r\\n\\r\\n{block \'title\'}\\r\\n    {\'ms2_email_subject_cancelled_user\' | lexicon : $order}\\r\\n{\\/block}\\r\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_email_cancelled_user.tpl","content":"{extends \'tpl.msEmail\'}\\r\\n\\r\\n{block \'title\'}\\r\\n    {\'ms2_email_subject_cancelled_user\' | lexicon : $order}\\r\\n{\\/block}\\r\\n"}',
        'guid' => 'fd0eb14846273fa483e97a65b8c579e5',
        'native_key' => 0,
        'signature' => '44eb0f9585d45dcb14505183ac4b0165',
      ),
    ),
    'Snippets' => 
    array (
      '53f336b53a48053156bba4c82d044a77' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"msProducts","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var modX $modx *\\/\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var miniShop2 $miniShop2 *\\/\\r\\n$miniShop2 = $modx->getService(\'miniShop2\');\\r\\n$miniShop2->initialize($modx->context->key);\\r\\n\\/** @var pdoFetch $pdoFetch *\\/\\r\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\r\\n$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', true);\\r\\nif ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {\\r\\n    $pdoFetch = new $pdoClass($modx, $scriptProperties);\\r\\n} else {\\r\\n    return false;\\r\\n}\\r\\n$pdoFetch->addTime(\'pdoTools loaded.\');\\r\\n\\r\\nif (isset($parents) && $parents === \'\') {\\r\\n    $scriptProperties[\'parents\'] = $modx->resource->id;\\r\\n}\\r\\n\\r\\nif (!empty($returnIds)) {\\r\\n    $scriptProperties[\'return\'] = \'ids\';\\r\\n}\\r\\n\\r\\nif ($scriptProperties[\'return\'] === \'ids\') {\\r\\n    $scriptProperties[\'returnIds\'] = true;\\r\\n}\\r\\n\\r\\n\\/\\/ Start build \\"where\\" expression\\r\\n$where = [\\r\\n    \'class_key\' => \'msProduct\',\\r\\n];\\r\\nif (empty($showZeroPrice)) {\\r\\n    $where[\'Data.price:>\'] = 0;\\r\\n}\\r\\n\\/\\/ Add grouping\\r\\n$groupby = [\\r\\n    \'msProduct.id\',\\r\\n];\\r\\n\\r\\n\\/\\/ Join tables\\r\\n$leftJoin = [\\r\\n    \'Data\' => [\'class\' => \'msProductData\'],\\r\\n    \'Vendor\' => [\'class\' => \'msVendor\', \'on\' => \'Data.vendor=Vendor.id\'],\\r\\n];\\r\\n\\r\\n$select = [\\r\\n    \'msProduct\' => !empty($includeContent)\\r\\n        ? $modx->getSelectColumns(\'msProduct\', \'msProduct\')\\r\\n        : $modx->getSelectColumns(\'msProduct\', \'msProduct\', \'\', [\'content\'], true),\\r\\n    \'Data\' => $modx->getSelectColumns(\'msProductData\', \'Data\', \'\', [\'id\'], true),\\r\\n    \'Vendor\' => $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', [\'id\'], true),\\r\\n];\\r\\n\\r\\n\\/\\/ Include thumbnails\\r\\nif (!empty($includeThumbs)) {\\r\\n    $thumbs = array_map(\'trim\', explode(\',\', $includeThumbs));\\r\\n    foreach ($thumbs as $thumb) {\\r\\n        if (empty($thumb)) {\\r\\n            continue;\\r\\n        }\\r\\n        $leftJoin[$thumb] = [\\r\\n            \'class\' => \'msProductFile\',\\r\\n            \'on\' => \\"`{$thumb}`.product_id = msProduct.id AND `{$thumb}`.`rank` = 0 AND `{$thumb}`.path LIKE \'%\\/{$thumb}\\/%\'\\",\\r\\n        ];\\r\\n        $select[$thumb] = \\"`{$thumb}`.url as `{$thumb}`\\";\\r\\n        $groupby[] = \\"`{$thumb}`.url\\";\\r\\n    }\\r\\n}\\r\\n\\r\\n\\/\\/ Include linked products\\r\\n$innerJoin = [];\\r\\nif (!empty($link) && !empty($master)) {\\r\\n    $innerJoin[\'Link\'] = [\\r\\n        \'class\' => \'msProductLink\',\\r\\n        \'on\' => \'msProduct.id = Link.slave AND Link.link = \' . $link,\\r\\n    ];\\r\\n    $where[\'Link.master\'] = $master;\\r\\n} elseif (!empty($link) && !empty($slave)) {\\r\\n    $innerJoin[\'Link\'] = [\\r\\n        \'class\' => \'msProductLink\',\\r\\n        \'on\' => \'msProduct.id = Link.master AND Link.link = \' . $link,\\r\\n    ];\\r\\n    $where[\'Link.slave\'] = $slave;\\r\\n}\\r\\n\\r\\n\\/\\/ Add user parameters\\r\\nforeach ([\'where\', \'leftJoin\', \'innerJoin\', \'select\', \'groupby\'] as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $scriptProperties[$v];\\r\\n        if (!is_array($tmp)) {\\r\\n            $tmp = json_decode($tmp, true);\\r\\n        }\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n$pdoFetch->addTime(\'Conditions prepared\');\\r\\n\\r\\n\\/\\/ Add filters by options\\r\\n$joinedOptions = [];\\r\\nif (!empty($scriptProperties[\'optionFilters\'])) {\\r\\n    $filters = json_decode($scriptProperties[\'optionFilters\'], true);\\r\\n    foreach ($filters as $key => $value) {\\r\\n        $components = explode(\':\', $key, 2);\\r\\n\\r\\n        if (count($components) === 2) {\\r\\n            if (in_array(strtolower($components[0]), [\'or\', \'and\'])) {\\r\\n                [$operator, $key] = $components;\\r\\n            }\\r\\n        }\\r\\n\\r\\n        $option = preg_replace(\'#\\\\:.*#\', \'\', $key);\\r\\n        $key = str_replace($option, $option . \'.value\', $key);\\r\\n\\r\\n        if (!in_array($option, $joinedOptions)) {\\r\\n            $leftJoin[$option] = [\\r\\n                \'class\' => \'msProductOption\',\\r\\n                \'on\' => \\"`{$option}`.product_id = Data.id AND `{$option}`.key = \'{$option}\'\\",\\r\\n            ];\\r\\n            $joinedOptions[] = $option;\\r\\n        }\\r\\n\\r\\n        $index = isset($operator) && in_array(strtolower($operator), [\'or\', \'and\'], true)\\r\\n            ? sprintf(\'%s:%s\', strtoupper($operator), $key)\\r\\n            : $key;\\r\\n        $where[$index] = $value;\\r\\n    }\\r\\n}\\r\\n\\r\\n\\/\\/ Add sort by options\\r\\nif (!empty($scriptProperties[\'sortbyOptions\'])) {\\r\\n    $sorts = array_map(\'trim\', explode(\',\', $scriptProperties[\'sortbyOptions\']));\\r\\n    foreach ($sorts as $sort) {\\r\\n        $sort = explode(\':\', $sort);\\r\\n        $option = $sort[0];\\r\\n        if (preg_match(\\"#\\\\b{$option}\\\\b#\\", $scriptProperties[\'sortby\'], $matches)) {\\r\\n            $type = \'string\';\\r\\n            if (isset($sort[1])) {\\r\\n                $type = $sort[1];\\r\\n            }\\r\\n            switch ($type) {\\r\\n                case \'number\':\\r\\n                case \'decimal\':\\r\\n                    $sortbyOptions = \\"CAST(`{$option}`.`value` AS DECIMAL(13,3))\\";\\r\\n                    break;\\r\\n                case \'int\':\\r\\n                case \'integer\':\\r\\n                    $sortbyOptions = \\"CAST(`{$option}`.`value` AS UNSIGNED INTEGER)\\";\\r\\n                    break;\\r\\n                case \'date\':\\r\\n                case \'datetime\':\\r\\n                    $sortbyOptions = \\"CAST(`{$option}`.`value` AS DATETIME)\\";\\r\\n                    break;\\r\\n                default:\\r\\n                    $sortbyOptions = \\"`{$option}`.`value`\\";\\r\\n                    break;\\r\\n            }\\r\\n            $scriptProperties[\'sortby\'] = preg_replace(\\"#\\\\b{$option}\\\\b#\\", $sortbyOptions, $scriptProperties[\'sortby\']);\\r\\n            $groupby[] = \\"`{$option}`.value\\";\\r\\n        }\\r\\n\\r\\n        if (!in_array($option, $joinedOptions)) {\\r\\n            $leftJoin[$option] = [\\r\\n                \'class\' => \'msProductOption\',\\r\\n                \'on\' => \\"`{$option}`.product_id = Data.id AND `{$option}`.key = \'{$option}\'\\",\\r\\n            ];\\r\\n            $joinedOptions[] = $option;\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\n$default = [\\r\\n    \'class\' => \'msProduct\',\\r\\n    \'where\' => $where,\\r\\n    \'leftJoin\' => $leftJoin,\\r\\n    \'innerJoin\' => $innerJoin,\\r\\n    \'select\' => $select,\\r\\n    \'sortby\' => \'msProduct.id\',\\r\\n    \'sortdir\' => \'ASC\',\\r\\n    \'groupby\' => implode(\', \', $groupby),\\r\\n    \'return\' => \'data\',\\r\\n    \'nestedChunkPrefix\' => \'minishop2_\',\\r\\n];\\r\\n\\/\\/ Merge all properties and run!\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\r\\n$rows = $pdoFetch->run();\\r\\n\\r\\n\\/\\/ Process rows\\r\\n$output = $additionalPlaceholders = [];\\r\\nif (!empty($rows) && is_array($rows)) {\\r\\n    $c = $modx->newQuery(\\r\\n        \'modPluginEvent\',\\r\\n        [\'event:IN\' => [\'msOnGetProductPrice\', \'msOnGetProductWeight\', \'msOnGetProductFields\']]\\r\\n    );\\r\\n    $c->innerJoin(\'modPlugin\', \'modPlugin\', \'modPlugin.id = modPluginEvent.pluginid\');\\r\\n    $c->where(\'modPlugin.disabled = 0\');\\r\\n\\r\\n    $modifications = $modx->getOption(\'ms2_price_snippet\', null, false, true) ||\\r\\n        $modx->getOption(\'ms2_weight_snippet\', null, false, true) || $modx->getCount(\'modPluginEvent\', $c);\\r\\n    if ($modifications) {\\r\\n        \\/** @var msProductData $product *\\/\\r\\n        $product = $modx->newObject(\'msProductData\');\\r\\n    }\\r\\n    $pdoFetch->addTime(\'Checked the active modifiers\');\\r\\n\\r\\n    \\/\\/ Adding extra parameters into special place so we can put them in a results\\r\\n    \\/** @var modSnippet $snippet *\\/\\r\\n    $properties = [];\\r\\n    if (isset($this) && $this instanceof modSnippet && $this->get(\'properties\')) {\\r\\n        $properties = $this->get(\'properties\');\\r\\n    } elseif ($snippet = $modx->getObject(\'modSnippet\', [\'name\' => \'msProduct\'])) {\\r\\n        $properties = $snippet->get(\'properties\');\\r\\n    }\\r\\n    if (!empty($properties)) {\\r\\n        foreach ($scriptProperties as $k => $v) {\\r\\n            if (!isset($properties[$k])) {\\r\\n                $additionalPlaceholders[$k] = $v;\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n    $opt_time = 0;\\r\\n    foreach ($rows as $k => $row) {\\r\\n        if ($modifications) {\\r\\n            $product->fromArray($row, \'\', true, true);\\r\\n            $tmp = $row[\'price\'];\\r\\n            $row[\'price\'] = $product->getPrice($row);\\r\\n            $row[\'weight\'] = $product->getWeight($row);\\r\\n            \\/\\/ A discount here, so we should replace old price\\r\\n            if ($row[\'price\'] < $tmp) {\\r\\n                $row[\'old_price\'] = $tmp;\\r\\n            }\\r\\n            $row = $product->modifyFields($row);\\r\\n        }\\r\\n        $row[\'price\'] = $miniShop2->formatPrice($row[\'price\']);\\r\\n        $row[\'old_price\'] = $miniShop2->formatPrice($row[\'old_price\']);\\r\\n        $row[\'weight\'] = $miniShop2->formatWeight($row[\'weight\']);\\r\\n        $row[\'idx\'] = $pdoFetch->idx++;\\r\\n\\r\\n        $opt_time_start = microtime(true);\\r\\n        $options = $modx->call(\'msProductData\', \'loadOptions\', [$modx, $row[\'id\']]);\\r\\n        $row = array_merge($additionalPlaceholders, $row, $options);\\r\\n        $opt_time += microtime(true) - $opt_time_start;\\r\\n\\r\\n        $tpl = $pdoFetch->defineChunk($row);\\r\\n        $output[] = $pdoFetch->getChunk($tpl, $row);\\r\\n    }\\r\\n    $pdoFetch->addTime(\'Time to load products options\', $opt_time);\\r\\n}\\r\\n\\r\\n$log = \'\';\\r\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\r\\n    $log .= \'<pre class=\\"msProductsLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\r\\n}\\r\\n\\r\\n\\/\\/ Return output\\r\\nif (is_string($rows)) {\\r\\n    $modx->setPlaceholder(\'msProducts.log\', $log);\\r\\n    if (!empty($toPlaceholder)) {\\r\\n        $modx->setPlaceholder($toPlaceholder, $rows);\\r\\n    } else {\\r\\n        return $rows;\\r\\n    }\\r\\n} elseif (!empty($toSeparatePlaceholders)) {\\r\\n    $output[\'log\'] = $log;\\r\\n    $modx->setPlaceholders($output, $toSeparatePlaceholders);\\r\\n} else {\\r\\n    if (empty($outputSeparator)) {\\r\\n        $outputSeparator = \\"\\\\n\\";\\r\\n    }\\r\\n    $output[\'log\'] = $log;\\r\\n    $output = implode($outputSeparator, $output);\\r\\n\\r\\n    if (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\r\\n        $output = $pdoFetch->getChunk(\\r\\n            $tplWrapper,\\r\\n            array_merge($additionalPlaceholders, [\'output\' => $output, \'scriptProperties\' => $scriptProperties])\\r\\n        );\\r\\n    }\\r\\n\\r\\n    if (!empty($toPlaceholder)) {\\r\\n        $modx->setPlaceholder($toPlaceholder, $output);\\r\\n    } else {\\r\\n        return $output;\\r\\n    }\\r\\n}","locked":0,"properties":"a:29:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:12:\\"ms2_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:18:\\"tpl.msProducts.row\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:14:\\"ms2_prop_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"offset\\";a:7:{s:4:\\"name\\";s:6:\\"offset\\";s:4:\\"desc\\";s:15:\\"ms2_prop_offset\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"depth\\";a:7:{s:4:\\"name\\";s:5:\\"depth\\";s:4:\\"desc\\";s:14:\\"ms2_prop_depth\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"sortby\\";a:7:{s:4:\\"name\\";s:6:\\"sortby\\";s:4:\\"desc\\";s:15:\\"ms2_prop_sortby\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:2:\\"id\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"sortbyOptions\\";a:7:{s:4:\\"name\\";s:13:\\"sortbyOptions\\";s:4:\\"desc\\";s:22:\\"ms2_prop_sortbyOptions\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"sortdir\\";a:7:{s:4:\\"name\\";s:7:\\"sortdir\\";s:4:\\"desc\\";s:16:\\"ms2_prop_sortdir\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:4:\\"text\\";s:3:\\"ASC\\";s:5:\\"value\\";s:3:\\"ASC\\";}i:1;a:2:{s:4:\\"text\\";s:4:\\"DESC\\";s:5:\\"value\\";s:4:\\"DESC\\";}}s:5:\\"value\\";s:3:\\"ASC\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:22:\\"ms2_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:22:\\"toSeparatePlaceholders\\";a:7:{s:4:\\"name\\";s:22:\\"toSeparatePlaceholders\\";s:4:\\"desc\\";s:31:\\"ms2_prop_toSeparatePlaceholders\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:16:\\"ms2_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"parents\\";a:7:{s:4:\\"name\\";s:7:\\"parents\\";s:4:\\"desc\\";s:16:\\"ms2_prop_parents\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"resources\\";a:7:{s:4:\\"name\\";s:9:\\"resources\\";s:4:\\"desc\\";s:18:\\"ms2_prop_resources\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"includeContent\\";a:7:{s:4:\\"name\\";s:14:\\"includeContent\\";s:4:\\"desc\\";s:23:\\"ms2_prop_includeContent\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"includeTVs\\";a:7:{s:4:\\"name\\";s:10:\\"includeTVs\\";s:4:\\"desc\\";s:19:\\"ms2_prop_includeTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"includeThumbs\\";a:7:{s:4:\\"name\\";s:13:\\"includeThumbs\\";s:4:\\"desc\\";s:22:\\"ms2_prop_includeThumbs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"optionFilters\\";a:7:{s:4:\\"name\\";s:13:\\"optionFilters\\";s:4:\\"desc\\";s:22:\\"ms2_prop_optionFilters\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"where\\";a:7:{s:4:\\"name\\";s:5:\\"where\\";s:4:\\"desc\\";s:14:\\"ms2_prop_where\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:4:\\"link\\";a:7:{s:4:\\"name\\";s:4:\\"link\\";s:4:\\"desc\\";s:13:\\"ms2_prop_link\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"master\\";a:7:{s:4:\\"name\\";s:6:\\"master\\";s:4:\\"desc\\";s:15:\\"ms2_prop_master\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"slave\\";a:7:{s:4:\\"name\\";s:5:\\"slave\\";s:4:\\"desc\\";s:14:\\"ms2_prop_slave\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tvPrefix\\";a:7:{s:4:\\"name\\";s:8:\\"tvPrefix\\";s:4:\\"desc\\";s:17:\\"ms2_prop_tvPrefix\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"outputSeparator\\";a:7:{s:4:\\"name\\";s:15:\\"outputSeparator\\";s:4:\\"desc\\";s:24:\\"ms2_prop_outputSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"\\n\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"returnIds\\";a:7:{s:4:\\"name\\";s:9:\\"returnIds\\";s:4:\\"desc\\";s:18:\\"ms2_prop_returnIds\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"return\\";a:7:{s:4:\\"name\\";s:6:\\"return\\";s:4:\\"desc\\";s:15:\\"ms2_prop_return\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:4:\\"data\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"showUnpublished\\";a:7:{s:4:\\"name\\";s:15:\\"showUnpublished\\";s:4:\\"desc\\";s:24:\\"ms2_prop_showUnpublished\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showDeleted\\";a:7:{s:4:\\"name\\";s:11:\\"showDeleted\\";s:4:\\"desc\\";s:20:\\"ms2_prop_showDeleted\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"showHidden\\";a:7:{s:4:\\"name\\";s:10:\\"showHidden\\";s:4:\\"desc\\";s:19:\\"ms2_prop_showHidden\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"showZeroPrice\\";a:7:{s:4:\\"name\\";s:13:\\"showZeroPrice\\";s:4:\\"desc\\";s:22:\\"ms2_prop_showZeroPrice\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"wrapIfEmpty\\";a:7:{s:4:\\"name\\";s:11:\\"wrapIfEmpty\\";s:4:\\"desc\\";s:20:\\"ms2_prop_wrapIfEmpty\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/snippets\\/snippet.ms_products.php","content":"\\/** @var modX $modx *\\/\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var miniShop2 $miniShop2 *\\/\\r\\n$miniShop2 = $modx->getService(\'miniShop2\');\\r\\n$miniShop2->initialize($modx->context->key);\\r\\n\\/** @var pdoFetch $pdoFetch *\\/\\r\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\r\\n$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', true);\\r\\nif ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {\\r\\n    $pdoFetch = new $pdoClass($modx, $scriptProperties);\\r\\n} else {\\r\\n    return false;\\r\\n}\\r\\n$pdoFetch->addTime(\'pdoTools loaded.\');\\r\\n\\r\\nif (isset($parents) && $parents === \'\') {\\r\\n    $scriptProperties[\'parents\'] = $modx->resource->id;\\r\\n}\\r\\n\\r\\nif (!empty($returnIds)) {\\r\\n    $scriptProperties[\'return\'] = \'ids\';\\r\\n}\\r\\n\\r\\nif ($scriptProperties[\'return\'] === \'ids\') {\\r\\n    $scriptProperties[\'returnIds\'] = true;\\r\\n}\\r\\n\\r\\n\\/\\/ Start build \\"where\\" expression\\r\\n$where = [\\r\\n    \'class_key\' => \'msProduct\',\\r\\n];\\r\\nif (empty($showZeroPrice)) {\\r\\n    $where[\'Data.price:>\'] = 0;\\r\\n}\\r\\n\\/\\/ Add grouping\\r\\n$groupby = [\\r\\n    \'msProduct.id\',\\r\\n];\\r\\n\\r\\n\\/\\/ Join tables\\r\\n$leftJoin = [\\r\\n    \'Data\' => [\'class\' => \'msProductData\'],\\r\\n    \'Vendor\' => [\'class\' => \'msVendor\', \'on\' => \'Data.vendor=Vendor.id\'],\\r\\n];\\r\\n\\r\\n$select = [\\r\\n    \'msProduct\' => !empty($includeContent)\\r\\n        ? $modx->getSelectColumns(\'msProduct\', \'msProduct\')\\r\\n        : $modx->getSelectColumns(\'msProduct\', \'msProduct\', \'\', [\'content\'], true),\\r\\n    \'Data\' => $modx->getSelectColumns(\'msProductData\', \'Data\', \'\', [\'id\'], true),\\r\\n    \'Vendor\' => $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', [\'id\'], true),\\r\\n];\\r\\n\\r\\n\\/\\/ Include thumbnails\\r\\nif (!empty($includeThumbs)) {\\r\\n    $thumbs = array_map(\'trim\', explode(\',\', $includeThumbs));\\r\\n    foreach ($thumbs as $thumb) {\\r\\n        if (empty($thumb)) {\\r\\n            continue;\\r\\n        }\\r\\n        $leftJoin[$thumb] = [\\r\\n            \'class\' => \'msProductFile\',\\r\\n            \'on\' => \\"`{$thumb}`.product_id = msProduct.id AND `{$thumb}`.`rank` = 0 AND `{$thumb}`.path LIKE \'%\\/{$thumb}\\/%\'\\",\\r\\n        ];\\r\\n        $select[$thumb] = \\"`{$thumb}`.url as `{$thumb}`\\";\\r\\n        $groupby[] = \\"`{$thumb}`.url\\";\\r\\n    }\\r\\n}\\r\\n\\r\\n\\/\\/ Include linked products\\r\\n$innerJoin = [];\\r\\nif (!empty($link) && !empty($master)) {\\r\\n    $innerJoin[\'Link\'] = [\\r\\n        \'class\' => \'msProductLink\',\\r\\n        \'on\' => \'msProduct.id = Link.slave AND Link.link = \' . $link,\\r\\n    ];\\r\\n    $where[\'Link.master\'] = $master;\\r\\n} elseif (!empty($link) && !empty($slave)) {\\r\\n    $innerJoin[\'Link\'] = [\\r\\n        \'class\' => \'msProductLink\',\\r\\n        \'on\' => \'msProduct.id = Link.master AND Link.link = \' . $link,\\r\\n    ];\\r\\n    $where[\'Link.slave\'] = $slave;\\r\\n}\\r\\n\\r\\n\\/\\/ Add user parameters\\r\\nforeach ([\'where\', \'leftJoin\', \'innerJoin\', \'select\', \'groupby\'] as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $scriptProperties[$v];\\r\\n        if (!is_array($tmp)) {\\r\\n            $tmp = json_decode($tmp, true);\\r\\n        }\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n$pdoFetch->addTime(\'Conditions prepared\');\\r\\n\\r\\n\\/\\/ Add filters by options\\r\\n$joinedOptions = [];\\r\\nif (!empty($scriptProperties[\'optionFilters\'])) {\\r\\n    $filters = json_decode($scriptProperties[\'optionFilters\'], true);\\r\\n    foreach ($filters as $key => $value) {\\r\\n        $components = explode(\':\', $key, 2);\\r\\n\\r\\n        if (count($components) === 2) {\\r\\n            if (in_array(strtolower($components[0]), [\'or\', \'and\'])) {\\r\\n                [$operator, $key] = $components;\\r\\n            }\\r\\n        }\\r\\n\\r\\n        $option = preg_replace(\'#\\\\:.*#\', \'\', $key);\\r\\n        $key = str_replace($option, $option . \'.value\', $key);\\r\\n\\r\\n        if (!in_array($option, $joinedOptions)) {\\r\\n            $leftJoin[$option] = [\\r\\n                \'class\' => \'msProductOption\',\\r\\n                \'on\' => \\"`{$option}`.product_id = Data.id AND `{$option}`.key = \'{$option}\'\\",\\r\\n            ];\\r\\n            $joinedOptions[] = $option;\\r\\n        }\\r\\n\\r\\n        $index = isset($operator) && in_array(strtolower($operator), [\'or\', \'and\'], true)\\r\\n            ? sprintf(\'%s:%s\', strtoupper($operator), $key)\\r\\n            : $key;\\r\\n        $where[$index] = $value;\\r\\n    }\\r\\n}\\r\\n\\r\\n\\/\\/ Add sort by options\\r\\nif (!empty($scriptProperties[\'sortbyOptions\'])) {\\r\\n    $sorts = array_map(\'trim\', explode(\',\', $scriptProperties[\'sortbyOptions\']));\\r\\n    foreach ($sorts as $sort) {\\r\\n        $sort = explode(\':\', $sort);\\r\\n        $option = $sort[0];\\r\\n        if (preg_match(\\"#\\\\b{$option}\\\\b#\\", $scriptProperties[\'sortby\'], $matches)) {\\r\\n            $type = \'string\';\\r\\n            if (isset($sort[1])) {\\r\\n                $type = $sort[1];\\r\\n            }\\r\\n            switch ($type) {\\r\\n                case \'number\':\\r\\n                case \'decimal\':\\r\\n                    $sortbyOptions = \\"CAST(`{$option}`.`value` AS DECIMAL(13,3))\\";\\r\\n                    break;\\r\\n                case \'int\':\\r\\n                case \'integer\':\\r\\n                    $sortbyOptions = \\"CAST(`{$option}`.`value` AS UNSIGNED INTEGER)\\";\\r\\n                    break;\\r\\n                case \'date\':\\r\\n                case \'datetime\':\\r\\n                    $sortbyOptions = \\"CAST(`{$option}`.`value` AS DATETIME)\\";\\r\\n                    break;\\r\\n                default:\\r\\n                    $sortbyOptions = \\"`{$option}`.`value`\\";\\r\\n                    break;\\r\\n            }\\r\\n            $scriptProperties[\'sortby\'] = preg_replace(\\"#\\\\b{$option}\\\\b#\\", $sortbyOptions, $scriptProperties[\'sortby\']);\\r\\n            $groupby[] = \\"`{$option}`.value\\";\\r\\n        }\\r\\n\\r\\n        if (!in_array($option, $joinedOptions)) {\\r\\n            $leftJoin[$option] = [\\r\\n                \'class\' => \'msProductOption\',\\r\\n                \'on\' => \\"`{$option}`.product_id = Data.id AND `{$option}`.key = \'{$option}\'\\",\\r\\n            ];\\r\\n            $joinedOptions[] = $option;\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\n$default = [\\r\\n    \'class\' => \'msProduct\',\\r\\n    \'where\' => $where,\\r\\n    \'leftJoin\' => $leftJoin,\\r\\n    \'innerJoin\' => $innerJoin,\\r\\n    \'select\' => $select,\\r\\n    \'sortby\' => \'msProduct.id\',\\r\\n    \'sortdir\' => \'ASC\',\\r\\n    \'groupby\' => implode(\', \', $groupby),\\r\\n    \'return\' => \'data\',\\r\\n    \'nestedChunkPrefix\' => \'minishop2_\',\\r\\n];\\r\\n\\/\\/ Merge all properties and run!\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\r\\n$rows = $pdoFetch->run();\\r\\n\\r\\n\\/\\/ Process rows\\r\\n$output = $additionalPlaceholders = [];\\r\\nif (!empty($rows) && is_array($rows)) {\\r\\n    $c = $modx->newQuery(\\r\\n        \'modPluginEvent\',\\r\\n        [\'event:IN\' => [\'msOnGetProductPrice\', \'msOnGetProductWeight\', \'msOnGetProductFields\']]\\r\\n    );\\r\\n    $c->innerJoin(\'modPlugin\', \'modPlugin\', \'modPlugin.id = modPluginEvent.pluginid\');\\r\\n    $c->where(\'modPlugin.disabled = 0\');\\r\\n\\r\\n    $modifications = $modx->getOption(\'ms2_price_snippet\', null, false, true) ||\\r\\n        $modx->getOption(\'ms2_weight_snippet\', null, false, true) || $modx->getCount(\'modPluginEvent\', $c);\\r\\n    if ($modifications) {\\r\\n        \\/** @var msProductData $product *\\/\\r\\n        $product = $modx->newObject(\'msProductData\');\\r\\n    }\\r\\n    $pdoFetch->addTime(\'Checked the active modifiers\');\\r\\n\\r\\n    \\/\\/ Adding extra parameters into special place so we can put them in a results\\r\\n    \\/** @var modSnippet $snippet *\\/\\r\\n    $properties = [];\\r\\n    if (isset($this) && $this instanceof modSnippet && $this->get(\'properties\')) {\\r\\n        $properties = $this->get(\'properties\');\\r\\n    } elseif ($snippet = $modx->getObject(\'modSnippet\', [\'name\' => \'msProduct\'])) {\\r\\n        $properties = $snippet->get(\'properties\');\\r\\n    }\\r\\n    if (!empty($properties)) {\\r\\n        foreach ($scriptProperties as $k => $v) {\\r\\n            if (!isset($properties[$k])) {\\r\\n                $additionalPlaceholders[$k] = $v;\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n    $opt_time = 0;\\r\\n    foreach ($rows as $k => $row) {\\r\\n        if ($modifications) {\\r\\n            $product->fromArray($row, \'\', true, true);\\r\\n            $tmp = $row[\'price\'];\\r\\n            $row[\'price\'] = $product->getPrice($row);\\r\\n            $row[\'weight\'] = $product->getWeight($row);\\r\\n            \\/\\/ A discount here, so we should replace old price\\r\\n            if ($row[\'price\'] < $tmp) {\\r\\n                $row[\'old_price\'] = $tmp;\\r\\n            }\\r\\n            $row = $product->modifyFields($row);\\r\\n        }\\r\\n        $row[\'price\'] = $miniShop2->formatPrice($row[\'price\']);\\r\\n        $row[\'old_price\'] = $miniShop2->formatPrice($row[\'old_price\']);\\r\\n        $row[\'weight\'] = $miniShop2->formatWeight($row[\'weight\']);\\r\\n        $row[\'idx\'] = $pdoFetch->idx++;\\r\\n\\r\\n        $opt_time_start = microtime(true);\\r\\n        $options = $modx->call(\'msProductData\', \'loadOptions\', [$modx, $row[\'id\']]);\\r\\n        $row = array_merge($additionalPlaceholders, $row, $options);\\r\\n        $opt_time += microtime(true) - $opt_time_start;\\r\\n\\r\\n        $tpl = $pdoFetch->defineChunk($row);\\r\\n        $output[] = $pdoFetch->getChunk($tpl, $row);\\r\\n    }\\r\\n    $pdoFetch->addTime(\'Time to load products options\', $opt_time);\\r\\n}\\r\\n\\r\\n$log = \'\';\\r\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\r\\n    $log .= \'<pre class=\\"msProductsLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\r\\n}\\r\\n\\r\\n\\/\\/ Return output\\r\\nif (is_string($rows)) {\\r\\n    $modx->setPlaceholder(\'msProducts.log\', $log);\\r\\n    if (!empty($toPlaceholder)) {\\r\\n        $modx->setPlaceholder($toPlaceholder, $rows);\\r\\n    } else {\\r\\n        return $rows;\\r\\n    }\\r\\n} elseif (!empty($toSeparatePlaceholders)) {\\r\\n    $output[\'log\'] = $log;\\r\\n    $modx->setPlaceholders($output, $toSeparatePlaceholders);\\r\\n} else {\\r\\n    if (empty($outputSeparator)) {\\r\\n        $outputSeparator = \\"\\\\n\\";\\r\\n    }\\r\\n    $output[\'log\'] = $log;\\r\\n    $output = implode($outputSeparator, $output);\\r\\n\\r\\n    if (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\r\\n        $output = $pdoFetch->getChunk(\\r\\n            $tplWrapper,\\r\\n            array_merge($additionalPlaceholders, [\'output\' => $output, \'scriptProperties\' => $scriptProperties])\\r\\n        );\\r\\n    }\\r\\n\\r\\n    if (!empty($toPlaceholder)) {\\r\\n        $modx->setPlaceholder($toPlaceholder, $output);\\r\\n    } else {\\r\\n        return $output;\\r\\n    }\\r\\n}"}',
        'guid' => 'bb37916761cd86c5df0b1ed2a737dfbb',
        'native_key' => 0,
        'signature' => '946e5a9e2c496462b6134745f89c35f6',
      ),
      '279a38f9fb71eda58843b4e6219abd98' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"msCart","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var modX $modx *\\/\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var miniShop2 $miniShop2 *\\/\\r\\n$miniShop2 = $modx->getService(\'miniShop2\');\\r\\n$miniShop2->initialize($modx->context->key);\\r\\n\\/** @var pdoFetch $pdoFetch *\\/\\r\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\r\\n$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', true);\\r\\nif ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {\\r\\n    $pdoFetch = new $pdoClass($modx, $scriptProperties);\\r\\n} else {\\r\\n    return false;\\r\\n}\\r\\n$pdoFetch->addTime(\'pdoTools loaded.\');\\r\\n\\r\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msCart\');\\r\\n$cart = $miniShop2->cart->get();\\r\\n$status = $miniShop2->cart->status();\\r\\n\\r\\n\\/\\/ Do not show empty cart when displaying order details\\r\\nif (!empty($_GET[\'msorder\'])) {\\r\\n    return \'\';\\r\\n} elseif (empty($status[\'total_count\'])) {\\r\\n    return $pdoFetch->getChunk($tpl);\\r\\n}\\r\\n\\r\\n\\/\\/ Select cart products\\r\\n$where = [\\r\\n    \'msProduct.id:IN\' => [],\\r\\n];\\r\\nforeach ($cart as $entry) {\\r\\n    $where[\'msProduct.id:IN\'][] = $entry[\'id\'];\\r\\n}\\r\\n$where[\'msProduct.id:IN\'] = array_unique($where[\'msProduct.id:IN\']);\\r\\n\\r\\n\\/\\/ Include products properties\\r\\n$leftJoin = [\\r\\n    \'Data\' => [\\r\\n        \'class\' => \'msProductData\',\\r\\n    ],\\r\\n    \'Vendor\' => [\\r\\n        \'class\' => \'msVendor\',\\r\\n        \'on\' => \'Data.vendor = Vendor.id\',\\r\\n    ],\\r\\n];\\r\\n\\r\\n\\/\\/ Select columns\\r\\n$select = [\\r\\n    \'msProduct\' => !empty($includeContent)\\r\\n        ? $modx->getSelectColumns(\'msProduct\', \'msProduct\')\\r\\n        : $modx->getSelectColumns(\'msProduct\', \'msProduct\', \'\', [\'content\'], true),\\r\\n    \'Data\' => $modx->getSelectColumns(\'msProductData\', \'Data\', \'\', [\'id\'], true),\\r\\n    \'Vendor\' => $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', [\'id\'], true),\\r\\n];\\r\\n\\r\\n\\/\\/ Include products thumbnails\\r\\nif (!empty($includeThumbs)) {\\r\\n    $thumbs = array_map(\'trim\', explode(\',\', $includeThumbs));\\r\\n    if (!empty($thumbs[0])) {\\r\\n        foreach ($thumbs as $thumb) {\\r\\n            $leftJoin[$thumb] = [\\r\\n                \'class\' => \'msProductFile\',\\r\\n                \'on\' => \\"`{$thumb}`.product_id = msProduct.id AND `{$thumb}`.parent != 0 AND `{$thumb}`.path LIKE \'%\\/{$thumb}\\/%\' AND `{$thumb}`.`rank` = 0\\",\\r\\n            ];\\r\\n            $select[$thumb] = \\"`{$thumb}`.url as \'{$thumb}\'\\";\\r\\n        }\\r\\n        $pdoFetch->addTime(\'Included list of thumbnails: <b>\' . implode(\', \', $thumbs) . \'<\\/b>.\');\\r\\n    }\\r\\n}\\r\\n\\r\\n\\/\\/ Add user parameters\\r\\nforeach ([\'where\', \'leftJoin\', \'select\'] as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $scriptProperties[$v];\\r\\n        if (!is_array($tmp)) {\\r\\n            $tmp = json_decode($tmp, true);\\r\\n        }\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n$pdoFetch->addTime(\'Conditions prepared\');\\r\\n\\r\\n$default = [\\r\\n    \'class\' => \'msProduct\',\\r\\n    \'where\' => $where,\\r\\n    \'leftJoin\' => $leftJoin,\\r\\n    \'select\' => $select,\\r\\n    \'sortby\' => \'msProduct.id\',\\r\\n    \'sortdir\' => \'ASC\',\\r\\n    \'groupby\' => \'msProduct.id\',\\r\\n    \'limit\' => 0,\\r\\n    \'return\' => \'data\',\\r\\n    \'nestedChunkPrefix\' => \'minishop2_\',\\r\\n];\\r\\n\\/\\/ Merge all properties and run!\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\r\\n\\r\\n$tmp = $pdoFetch->run();\\r\\n$rows = [];\\r\\nforeach ($tmp as $row) {\\r\\n    $rows[$row[\'id\']] = $row;\\r\\n}\\r\\n\\r\\n\\/\\/ Process products in cart\\r\\n$products = [];\\r\\n$total = [\'count\' => 0, \'weight\' => 0, \'cost\' => 0, \'discount\' => 0];\\r\\nforeach ($cart as $key => $entry) {\\r\\n    if (!isset($rows[$entry[\'id\']])) {\\r\\n        continue;\\r\\n    }\\r\\n    $product = $rows[$entry[\'id\']];\\r\\n\\r\\n    $product[\'key\'] = $key;\\r\\n    $product[\'count\'] = $entry[\'count\'];\\r\\n    $old_price = $product[\'old_price\'];\\r\\n    if ($product[\'price\'] > $entry[\'price\'] && empty($product[\'old_price\'])) {\\r\\n        $old_price = $product[\'price\'];\\r\\n    }\\r\\n    $discount_price = $old_price > 0 ? $old_price - $entry[\'price\'] : 0;\\r\\n\\r\\n    $product[\'old_price\'] = $miniShop2->formatPrice($old_price);\\r\\n    $product[\'price\'] = $miniShop2->formatPrice($entry[\'price\']);\\r\\n    $product[\'weight\'] = $miniShop2->formatWeight($entry[\'weight\']);\\r\\n    $product[\'cost\'] = $miniShop2->formatPrice($entry[\'count\'] * $entry[\'price\']);\\r\\n    $product[\'discount_price\'] = $miniShop2->formatPrice($discount_price);\\r\\n    $product[\'discount_cost\'] = $miniShop2->formatPrice($entry[\'count\'] * $discount_price);\\r\\n\\r\\n    \\/\\/ Additional properties of product in cart\\r\\n    if (!empty($entry[\'options\']) && is_array($entry[\'options\'])) {\\r\\n        $product[\'options\'] = $entry[\'options\'];\\r\\n        foreach ($entry[\'options\'] as $option => $value) {\\r\\n            $product[\'option.\' . $option] = $value;\\r\\n        }\\r\\n    }\\r\\n\\r\\n    \\/\\/ Add option values\\r\\n    $options = $modx->call(\'msProductData\', \'loadOptions\', [$modx, $product[\'id\']]);\\r\\n    $products[] = array_merge($product, $options);\\r\\n\\r\\n    \\/\\/ Count total\\r\\n    $total[\'count\'] += $entry[\'count\'];\\r\\n    $total[\'cost\'] += $entry[\'count\'] * $entry[\'price\'];\\r\\n    $total[\'weight\'] += $entry[\'count\'] * $entry[\'weight\'];\\r\\n    $total[\'discount\'] += $entry[\'count\'] * $discount_price;\\r\\n}\\r\\n$total[\'cost\'] = $miniShop2->formatPrice($total[\'cost\']);\\r\\n$total[\'discount\'] = $miniShop2->formatPrice($total[\'discount\']);\\r\\n$total[\'weight\'] = $miniShop2->formatWeight($total[\'weight\']);\\r\\n\\r\\n$output = $pdoFetch->getChunk($tpl, [\\r\\n    \'total\' => $total,\\r\\n    \'products\' => $products,\\r\\n    \'scriptProperties\' => $scriptProperties\\r\\n]);\\r\\n\\r\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\r\\n    $output .= \'<pre class=\\"msCartLog\\">\' . print_r($pdoFetch->getTime(), true) . \'<\\/pre>\';\\r\\n}\\r\\n\\r\\nif (!empty($toPlaceholder)) {\\r\\n    $modx->setPlaceholder($toPlaceholder, $output);\\r\\n} else {\\r\\n    return $output;\\r\\n}","locked":0,"properties":"a:5:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:12:\\"ms2_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:10:\\"tpl.msCart\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"includeTVs\\";a:7:{s:4:\\"name\\";s:10:\\"includeTVs\\";s:4:\\"desc\\";s:19:\\"ms2_prop_includeTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"includeThumbs\\";a:7:{s:4:\\"name\\";s:13:\\"includeThumbs\\";s:4:\\"desc\\";s:22:\\"ms2_prop_includeThumbs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:22:\\"ms2_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:16:\\"ms2_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/snippets\\/snippet.ms_cart.php","content":"\\/** @var modX $modx *\\/\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var miniShop2 $miniShop2 *\\/\\r\\n$miniShop2 = $modx->getService(\'miniShop2\');\\r\\n$miniShop2->initialize($modx->context->key);\\r\\n\\/** @var pdoFetch $pdoFetch *\\/\\r\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\r\\n$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', true);\\r\\nif ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {\\r\\n    $pdoFetch = new $pdoClass($modx, $scriptProperties);\\r\\n} else {\\r\\n    return false;\\r\\n}\\r\\n$pdoFetch->addTime(\'pdoTools loaded.\');\\r\\n\\r\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msCart\');\\r\\n$cart = $miniShop2->cart->get();\\r\\n$status = $miniShop2->cart->status();\\r\\n\\r\\n\\/\\/ Do not show empty cart when displaying order details\\r\\nif (!empty($_GET[\'msorder\'])) {\\r\\n    return \'\';\\r\\n} elseif (empty($status[\'total_count\'])) {\\r\\n    return $pdoFetch->getChunk($tpl);\\r\\n}\\r\\n\\r\\n\\/\\/ Select cart products\\r\\n$where = [\\r\\n    \'msProduct.id:IN\' => [],\\r\\n];\\r\\nforeach ($cart as $entry) {\\r\\n    $where[\'msProduct.id:IN\'][] = $entry[\'id\'];\\r\\n}\\r\\n$where[\'msProduct.id:IN\'] = array_unique($where[\'msProduct.id:IN\']);\\r\\n\\r\\n\\/\\/ Include products properties\\r\\n$leftJoin = [\\r\\n    \'Data\' => [\\r\\n        \'class\' => \'msProductData\',\\r\\n    ],\\r\\n    \'Vendor\' => [\\r\\n        \'class\' => \'msVendor\',\\r\\n        \'on\' => \'Data.vendor = Vendor.id\',\\r\\n    ],\\r\\n];\\r\\n\\r\\n\\/\\/ Select columns\\r\\n$select = [\\r\\n    \'msProduct\' => !empty($includeContent)\\r\\n        ? $modx->getSelectColumns(\'msProduct\', \'msProduct\')\\r\\n        : $modx->getSelectColumns(\'msProduct\', \'msProduct\', \'\', [\'content\'], true),\\r\\n    \'Data\' => $modx->getSelectColumns(\'msProductData\', \'Data\', \'\', [\'id\'], true),\\r\\n    \'Vendor\' => $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', [\'id\'], true),\\r\\n];\\r\\n\\r\\n\\/\\/ Include products thumbnails\\r\\nif (!empty($includeThumbs)) {\\r\\n    $thumbs = array_map(\'trim\', explode(\',\', $includeThumbs));\\r\\n    if (!empty($thumbs[0])) {\\r\\n        foreach ($thumbs as $thumb) {\\r\\n            $leftJoin[$thumb] = [\\r\\n                \'class\' => \'msProductFile\',\\r\\n                \'on\' => \\"`{$thumb}`.product_id = msProduct.id AND `{$thumb}`.parent != 0 AND `{$thumb}`.path LIKE \'%\\/{$thumb}\\/%\' AND `{$thumb}`.`rank` = 0\\",\\r\\n            ];\\r\\n            $select[$thumb] = \\"`{$thumb}`.url as \'{$thumb}\'\\";\\r\\n        }\\r\\n        $pdoFetch->addTime(\'Included list of thumbnails: <b>\' . implode(\', \', $thumbs) . \'<\\/b>.\');\\r\\n    }\\r\\n}\\r\\n\\r\\n\\/\\/ Add user parameters\\r\\nforeach ([\'where\', \'leftJoin\', \'select\'] as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $scriptProperties[$v];\\r\\n        if (!is_array($tmp)) {\\r\\n            $tmp = json_decode($tmp, true);\\r\\n        }\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n$pdoFetch->addTime(\'Conditions prepared\');\\r\\n\\r\\n$default = [\\r\\n    \'class\' => \'msProduct\',\\r\\n    \'where\' => $where,\\r\\n    \'leftJoin\' => $leftJoin,\\r\\n    \'select\' => $select,\\r\\n    \'sortby\' => \'msProduct.id\',\\r\\n    \'sortdir\' => \'ASC\',\\r\\n    \'groupby\' => \'msProduct.id\',\\r\\n    \'limit\' => 0,\\r\\n    \'return\' => \'data\',\\r\\n    \'nestedChunkPrefix\' => \'minishop2_\',\\r\\n];\\r\\n\\/\\/ Merge all properties and run!\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\r\\n\\r\\n$tmp = $pdoFetch->run();\\r\\n$rows = [];\\r\\nforeach ($tmp as $row) {\\r\\n    $rows[$row[\'id\']] = $row;\\r\\n}\\r\\n\\r\\n\\/\\/ Process products in cart\\r\\n$products = [];\\r\\n$total = [\'count\' => 0, \'weight\' => 0, \'cost\' => 0, \'discount\' => 0];\\r\\nforeach ($cart as $key => $entry) {\\r\\n    if (!isset($rows[$entry[\'id\']])) {\\r\\n        continue;\\r\\n    }\\r\\n    $product = $rows[$entry[\'id\']];\\r\\n\\r\\n    $product[\'key\'] = $key;\\r\\n    $product[\'count\'] = $entry[\'count\'];\\r\\n    $old_price = $product[\'old_price\'];\\r\\n    if ($product[\'price\'] > $entry[\'price\'] && empty($product[\'old_price\'])) {\\r\\n        $old_price = $product[\'price\'];\\r\\n    }\\r\\n    $discount_price = $old_price > 0 ? $old_price - $entry[\'price\'] : 0;\\r\\n\\r\\n    $product[\'old_price\'] = $miniShop2->formatPrice($old_price);\\r\\n    $product[\'price\'] = $miniShop2->formatPrice($entry[\'price\']);\\r\\n    $product[\'weight\'] = $miniShop2->formatWeight($entry[\'weight\']);\\r\\n    $product[\'cost\'] = $miniShop2->formatPrice($entry[\'count\'] * $entry[\'price\']);\\r\\n    $product[\'discount_price\'] = $miniShop2->formatPrice($discount_price);\\r\\n    $product[\'discount_cost\'] = $miniShop2->formatPrice($entry[\'count\'] * $discount_price);\\r\\n\\r\\n    \\/\\/ Additional properties of product in cart\\r\\n    if (!empty($entry[\'options\']) && is_array($entry[\'options\'])) {\\r\\n        $product[\'options\'] = $entry[\'options\'];\\r\\n        foreach ($entry[\'options\'] as $option => $value) {\\r\\n            $product[\'option.\' . $option] = $value;\\r\\n        }\\r\\n    }\\r\\n\\r\\n    \\/\\/ Add option values\\r\\n    $options = $modx->call(\'msProductData\', \'loadOptions\', [$modx, $product[\'id\']]);\\r\\n    $products[] = array_merge($product, $options);\\r\\n\\r\\n    \\/\\/ Count total\\r\\n    $total[\'count\'] += $entry[\'count\'];\\r\\n    $total[\'cost\'] += $entry[\'count\'] * $entry[\'price\'];\\r\\n    $total[\'weight\'] += $entry[\'count\'] * $entry[\'weight\'];\\r\\n    $total[\'discount\'] += $entry[\'count\'] * $discount_price;\\r\\n}\\r\\n$total[\'cost\'] = $miniShop2->formatPrice($total[\'cost\']);\\r\\n$total[\'discount\'] = $miniShop2->formatPrice($total[\'discount\']);\\r\\n$total[\'weight\'] = $miniShop2->formatWeight($total[\'weight\']);\\r\\n\\r\\n$output = $pdoFetch->getChunk($tpl, [\\r\\n    \'total\' => $total,\\r\\n    \'products\' => $products,\\r\\n    \'scriptProperties\' => $scriptProperties\\r\\n]);\\r\\n\\r\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\r\\n    $output .= \'<pre class=\\"msCartLog\\">\' . print_r($pdoFetch->getTime(), true) . \'<\\/pre>\';\\r\\n}\\r\\n\\r\\nif (!empty($toPlaceholder)) {\\r\\n    $modx->setPlaceholder($toPlaceholder, $output);\\r\\n} else {\\r\\n    return $output;\\r\\n}"}',
        'guid' => '43daf05ba3ae88c8ab1ee86905af1a97',
        'native_key' => 0,
        'signature' => '529d002b894ec3e1d7e5b21790615fb8',
      ),
      'da55ca0b6e8f66247a26dd05ca28af11' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"msMiniCart","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var modX $modx *\\/\\n\\/** @var array $scriptProperties *\\/\\n\\/** @var miniShop2 $miniShop2 *\\/\\n$miniShop2 = $modx->getService(\'miniShop2\');\\n$miniShop2->initialize($modx->context->key);\\n\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msMiniCart\');\\n\\n$cart = $miniShop2->cart->status();\\n$cart[\'total_cost\'] = $miniShop2->formatPrice($cart[\'total_cost\']);\\n$cart[\'total_weight\'] = $miniShop2->formatWeight($cart[\'total_weight\']);\\n$cart[\'total_discount\'] = $miniShop2->formatPrice($cart[\'total_discount\']);\\n$cart[\'scriptProperties\'] = $scriptProperties;\\nreturn $miniShop2->pdoTools->getChunk($tpl, $cart);","locked":0,"properties":"a:1:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:12:\\"ms2_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:14:\\"tpl.msMiniCart\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/snippets\\/snippet.ms_minicart.php","content":"\\/** @var modX $modx *\\/\\n\\/** @var array $scriptProperties *\\/\\n\\/** @var miniShop2 $miniShop2 *\\/\\n$miniShop2 = $modx->getService(\'miniShop2\');\\n$miniShop2->initialize($modx->context->key);\\n\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msMiniCart\');\\n\\n$cart = $miniShop2->cart->status();\\n$cart[\'total_cost\'] = $miniShop2->formatPrice($cart[\'total_cost\']);\\n$cart[\'total_weight\'] = $miniShop2->formatWeight($cart[\'total_weight\']);\\n$cart[\'total_discount\'] = $miniShop2->formatPrice($cart[\'total_discount\']);\\n$cart[\'scriptProperties\'] = $scriptProperties;\\nreturn $miniShop2->pdoTools->getChunk($tpl, $cart);"}',
        'guid' => '9890fdd37be19e235f9753cfb769735e',
        'native_key' => 0,
        'signature' => '2631f7e5f3cf99930be4f4d06b40f0e7',
      ),
      'ad5ba63f2ac195b36160e1a872b89781' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"msGallery","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var modX $modx *\\/\\n\\/** @var array $scriptProperties *\\/\\n\\/** @var miniShop2 $miniShop2 *\\/\\n$miniShop2 = $modx->getService(\'miniShop2\');\\n$miniShop2->initialize($modx->context->key);\\n\\/** @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\n$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', true);\\nif ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {\\n    $pdoFetch = new $pdoClass($modx, $scriptProperties);\\n} else {\\n    return false;\\n}\\n$pdoFetch->addTime(\'pdoTools loaded.\');\\n\\n$extensionsDir = $modx->getOption(\'extensionsDir\', $scriptProperties, \'components\\/minishop2\\/img\\/mgr\\/extensions\\/\', true);\\n$limit = $modx->getOption(\'limit\', $scriptProperties, 0);\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msGallery\');\\n\\n\\/** @var msProduct $product *\\/\\n$product = !empty($product) && $product != $modx->resource->id\\n    ? $modx->getObject(\'msProduct\', [\'id\' => $product])\\n    : $modx->resource;\\nif (!($product instanceof msProduct)) {\\n    return \\"[msGallery] The resource with id = {$product->id} is not instance of msProduct.\\";\\n}\\n\\n$where = [\\n    \'product_id\' => $product->id,\\n    \'parent\' => 0,\\n];\\nif (!empty($filetype)) {\\n    $where[\'type:IN\'] = array_map(\'trim\', explode(\',\', $filetype));\\n}\\nif (empty($showInactive)) {\\n    $where[\'active\'] = 1;\\n}\\n$select = [\\n    \'msProductFile\' => \'*\',\\n];\\n\\n\\/\\/ Add user parameters\\nforeach ([\'where\'] as $v) {\\n    if (!empty($scriptProperties[$v])) {\\n        $tmp = $scriptProperties[$v];\\n        if (!is_array($tmp)) {\\n            $tmp = json_decode($tmp, true);\\n        }\\n        if (is_array($tmp)) {\\n            $$v = array_merge($$v, $tmp);\\n        }\\n    }\\n    unset($scriptProperties[$v]);\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n$default = [\\n    \'class\' => \'msProductFile\',\\n    \'where\' => $where,\\n    \'select\' => $select,\\n    \'limit\' => $limit,\\n    \'sortby\' => \'`rank`\',\\n    \'sortdir\' => \'ASC\',\\n    \'fastMode\' => false,\\n    \'return\' => \'data\',\\n    \'nestedChunkPrefix\' => \'minishop2_\',\\n];\\nif ($scriptProperties[\'return\'] === \'tpl\') {\\n    unset($scriptProperties[\'return\']);\\n}\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\n$rows = $pdoFetch->run();\\nif ($scriptProperties[\'return\'] === \'sql\' || $scriptProperties[\'return\'] === \'json\') {\\n    return $rows;\\n}\\n$pdoFetch->addTime(\'Fetching thumbnails\');\\n\\n$resolution = [];\\n\\/** @var msProductData $data *\\/\\nif ($data = $product->getOne(\'Data\')) {\\n    if ($data->initializeMediaSource()) {\\n        $properties = $data->mediaSource->getProperties();\\n        if (isset($properties[\'thumbnails\'][\'value\'])) {\\n            $fileTypes = json_decode($properties[\'thumbnails\'][\'value\'], true);\\n            foreach ($fileTypes as $k => $v) {\\n                if (!is_numeric($k)) {\\n                    $resolution[] = $k;\\n                } elseif (!empty($v[\'name\'])) {\\n                    $resolution[] = $v[\'name\'];\\n                } else {\\n                    $resolution[] = @$v[\'w\'] . \'x\' . @$v[\'h\'];\\n                }\\n            }\\n        }\\n    }\\n}\\n\\n\\/\\/ Processing rows\\n$files = [];\\nforeach ($rows as $row) {\\n    if (isset($row[\'type\']) && $row[\'type\'] == \'image\') {\\n        $c = $modx->newQuery(\'msProductFile\', [\'parent\' => $row[\'id\']]);\\n        $c->select(\'product_id,url\');\\n        $tstart = microtime(true);\\n        if ($c->prepare() && $c->stmt->execute()) {\\n            $modx->queryTime += microtime(true) - $tstart;\\n            $modx->executedQueries++;\\n            while ($tmp = $c->stmt->fetch(PDO::FETCH_ASSOC)) {\\n                if (preg_match(\\"#\\/{$tmp[\'product_id\']}\\/(.*?)\\/#\\", $tmp[\'url\'], $size)) {\\n                    $row[$size[1]] = $tmp[\'url\'];\\n                }\\n            }\\n        }\\n    } elseif (isset($row[\'type\'])) {\\n        $row[\'thumbnail\'] = file_exists(MODX_ASSETS_PATH . $extensionsDir . $row[\'type\'] . \'.png\')\\n            ? MODX_ASSETS_URL . $extensionsDir . $row[\'type\'] . \'.png\'\\n            : MODX_ASSETS_URL . $extensionsDir . \'other.png\';\\n        foreach ($resolution as $v) {\\n            $row[$v] = $row[\'thumbnail\'];\\n        }\\n    }\\n\\n    $files[] = $row;\\n}\\n\\nif ($scriptProperties[\'return\'] === \'data\') {\\n    return $files;\\n}\\n\\n$output = $pdoFetch->getChunk($tpl, [\\n    \'files\' => $files,\\n    \'scriptProperties\' => $scriptProperties\\n]);\\n\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n    $output .= \'<pre class=\\"msGalleryLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\nif (!empty($toPlaceholder)) {\\n    $modx->setPlaceholder($toPlaceholder, $output);\\n} else {\\n    return $output;\\n}","locked":0,"properties":"a:11:{s:7:\\"product\\";a:7:{s:4:\\"name\\";s:7:\\"product\\";s:4:\\"desc\\";s:16:\\"ms2_prop_product\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:12:\\"ms2_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:13:\\"tpl.msGallery\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:14:\\"ms2_prop_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"offset\\";a:7:{s:4:\\"name\\";s:6:\\"offset\\";s:4:\\"desc\\";s:15:\\"ms2_prop_offset\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"sortby\\";a:7:{s:4:\\"name\\";s:6:\\"sortby\\";s:4:\\"desc\\";s:15:\\"ms2_prop_sortby\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:4:\\"rank\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"sortdir\\";a:7:{s:4:\\"name\\";s:7:\\"sortdir\\";s:4:\\"desc\\";s:16:\\"ms2_prop_sortdir\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:4:\\"text\\";s:3:\\"ASC\\";s:5:\\"value\\";s:3:\\"ASC\\";}i:1;a:2:{s:4:\\"text\\";s:4:\\"DESC\\";s:5:\\"value\\";s:4:\\"DESC\\";}}s:5:\\"value\\";s:3:\\"ASC\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:22:\\"ms2_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:16:\\"ms2_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"where\\";a:7:{s:4:\\"name\\";s:5:\\"where\\";s:4:\\"desc\\";s:14:\\"ms2_prop_where\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"filetype\\";a:7:{s:4:\\"name\\";s:8:\\"filetype\\";s:4:\\"desc\\";s:17:\\"ms2_prop_filetype\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"return\\";a:7:{s:4:\\"name\\";s:6:\\"return\\";s:4:\\"desc\\";s:15:\\"ms2_prop_return\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:3:\\"tpl\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/snippets\\/snippet.ms_gallery.php","content":"\\/** @var modX $modx *\\/\\n\\/** @var array $scriptProperties *\\/\\n\\/** @var miniShop2 $miniShop2 *\\/\\n$miniShop2 = $modx->getService(\'miniShop2\');\\n$miniShop2->initialize($modx->context->key);\\n\\/** @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\n$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', true);\\nif ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {\\n    $pdoFetch = new $pdoClass($modx, $scriptProperties);\\n} else {\\n    return false;\\n}\\n$pdoFetch->addTime(\'pdoTools loaded.\');\\n\\n$extensionsDir = $modx->getOption(\'extensionsDir\', $scriptProperties, \'components\\/minishop2\\/img\\/mgr\\/extensions\\/\', true);\\n$limit = $modx->getOption(\'limit\', $scriptProperties, 0);\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msGallery\');\\n\\n\\/** @var msProduct $product *\\/\\n$product = !empty($product) && $product != $modx->resource->id\\n    ? $modx->getObject(\'msProduct\', [\'id\' => $product])\\n    : $modx->resource;\\nif (!($product instanceof msProduct)) {\\n    return \\"[msGallery] The resource with id = {$product->id} is not instance of msProduct.\\";\\n}\\n\\n$where = [\\n    \'product_id\' => $product->id,\\n    \'parent\' => 0,\\n];\\nif (!empty($filetype)) {\\n    $where[\'type:IN\'] = array_map(\'trim\', explode(\',\', $filetype));\\n}\\nif (empty($showInactive)) {\\n    $where[\'active\'] = 1;\\n}\\n$select = [\\n    \'msProductFile\' => \'*\',\\n];\\n\\n\\/\\/ Add user parameters\\nforeach ([\'where\'] as $v) {\\n    if (!empty($scriptProperties[$v])) {\\n        $tmp = $scriptProperties[$v];\\n        if (!is_array($tmp)) {\\n            $tmp = json_decode($tmp, true);\\n        }\\n        if (is_array($tmp)) {\\n            $$v = array_merge($$v, $tmp);\\n        }\\n    }\\n    unset($scriptProperties[$v]);\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n$default = [\\n    \'class\' => \'msProductFile\',\\n    \'where\' => $where,\\n    \'select\' => $select,\\n    \'limit\' => $limit,\\n    \'sortby\' => \'`rank`\',\\n    \'sortdir\' => \'ASC\',\\n    \'fastMode\' => false,\\n    \'return\' => \'data\',\\n    \'nestedChunkPrefix\' => \'minishop2_\',\\n];\\nif ($scriptProperties[\'return\'] === \'tpl\') {\\n    unset($scriptProperties[\'return\']);\\n}\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\n$rows = $pdoFetch->run();\\nif ($scriptProperties[\'return\'] === \'sql\' || $scriptProperties[\'return\'] === \'json\') {\\n    return $rows;\\n}\\n$pdoFetch->addTime(\'Fetching thumbnails\');\\n\\n$resolution = [];\\n\\/** @var msProductData $data *\\/\\nif ($data = $product->getOne(\'Data\')) {\\n    if ($data->initializeMediaSource()) {\\n        $properties = $data->mediaSource->getProperties();\\n        if (isset($properties[\'thumbnails\'][\'value\'])) {\\n            $fileTypes = json_decode($properties[\'thumbnails\'][\'value\'], true);\\n            foreach ($fileTypes as $k => $v) {\\n                if (!is_numeric($k)) {\\n                    $resolution[] = $k;\\n                } elseif (!empty($v[\'name\'])) {\\n                    $resolution[] = $v[\'name\'];\\n                } else {\\n                    $resolution[] = @$v[\'w\'] . \'x\' . @$v[\'h\'];\\n                }\\n            }\\n        }\\n    }\\n}\\n\\n\\/\\/ Processing rows\\n$files = [];\\nforeach ($rows as $row) {\\n    if (isset($row[\'type\']) && $row[\'type\'] == \'image\') {\\n        $c = $modx->newQuery(\'msProductFile\', [\'parent\' => $row[\'id\']]);\\n        $c->select(\'product_id,url\');\\n        $tstart = microtime(true);\\n        if ($c->prepare() && $c->stmt->execute()) {\\n            $modx->queryTime += microtime(true) - $tstart;\\n            $modx->executedQueries++;\\n            while ($tmp = $c->stmt->fetch(PDO::FETCH_ASSOC)) {\\n                if (preg_match(\\"#\\/{$tmp[\'product_id\']}\\/(.*?)\\/#\\", $tmp[\'url\'], $size)) {\\n                    $row[$size[1]] = $tmp[\'url\'];\\n                }\\n            }\\n        }\\n    } elseif (isset($row[\'type\'])) {\\n        $row[\'thumbnail\'] = file_exists(MODX_ASSETS_PATH . $extensionsDir . $row[\'type\'] . \'.png\')\\n            ? MODX_ASSETS_URL . $extensionsDir . $row[\'type\'] . \'.png\'\\n            : MODX_ASSETS_URL . $extensionsDir . \'other.png\';\\n        foreach ($resolution as $v) {\\n            $row[$v] = $row[\'thumbnail\'];\\n        }\\n    }\\n\\n    $files[] = $row;\\n}\\n\\nif ($scriptProperties[\'return\'] === \'data\') {\\n    return $files;\\n}\\n\\n$output = $pdoFetch->getChunk($tpl, [\\n    \'files\' => $files,\\n    \'scriptProperties\' => $scriptProperties\\n]);\\n\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n    $output .= \'<pre class=\\"msGalleryLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\nif (!empty($toPlaceholder)) {\\n    $modx->setPlaceholder($toPlaceholder, $output);\\n} else {\\n    return $output;\\n}"}',
        'guid' => '2ab8394c40552abd0fa49e74e6a0491c',
        'native_key' => 0,
        'signature' => '215bae7f4328e5526270f76484b1d5f5',
      ),
      '1300f524ff87efc2de01dfa3c3ab47fe' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"msOptions","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var modX $modx *\\/\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var miniShop2 $miniShop2 *\\/\\r\\n$miniShop2 = $modx->getService(\'miniShop2\');\\r\\n\\r\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msOptions\');\\r\\nif (!empty($input) && empty($product)) {\\r\\n    $product = $input;\\r\\n}\\r\\nif (!empty($name) && empty($options)) {\\r\\n    $options = $name;\\r\\n}\\r\\n\\r\\n$product = !empty($product) && $product != $modx->resource->id\\r\\n    ? $modx->getObject(\'msProduct\', [\'id\' => $product])\\r\\n    : $modx->resource;\\r\\nif (!($product instanceof msProduct)) {\\r\\n    return \\"[msOptions] The resource with id = {$product->id} is not instance of msProduct.\\";\\r\\n}\\r\\n\\r\\n$names = array_map(\'trim\', explode(\',\', $options));\\r\\n$options = [];\\r\\nforeach ($names as $name) {\\r\\n    if (!empty($name) && $option = $product->get($name)) {\\r\\n        if (!is_array($option)) {\\r\\n            $option = [$option];\\r\\n        }\\r\\n        if (isset($option[0]) and (trim($option[0]) != \'\')) {\\r\\n            $options[$name] = $option;\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\n$options = $miniShop2->sortOptionValues($options, $scriptProperties[\'sortOptionValues\']);\\r\\n\\r\\n\\/** @var pdoTools $pdoTools *\\/\\r\\n$pdoTools = $modx->getService(\'pdoTools\');\\r\\n\\r\\nreturn $pdoTools->getChunk($tpl, [\\r\\n    \'id\' => $product->id,\\r\\n    \'options\' => $options,\\r\\n    \'scriptProperties\' => $scriptProperties\\r\\n]);","locked":0,"properties":"a:4:{s:7:\\"product\\";a:7:{s:4:\\"name\\";s:7:\\"product\\";s:4:\\"desc\\";s:16:\\"ms2_prop_product\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"options\\";a:7:{s:4:\\"name\\";s:7:\\"options\\";s:4:\\"desc\\";s:16:\\"ms2_prop_options\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"sortOptionValues\\";a:7:{s:4:\\"name\\";s:16:\\"sortOptionValues\\";s:4:\\"desc\\";s:25:\\"ms2_prop_sortOptionValues\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:12:\\"ms2_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:13:\\"tpl.msOptions\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/snippets\\/snippet.ms_options.php","content":"\\/** @var modX $modx *\\/\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var miniShop2 $miniShop2 *\\/\\r\\n$miniShop2 = $modx->getService(\'miniShop2\');\\r\\n\\r\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msOptions\');\\r\\nif (!empty($input) && empty($product)) {\\r\\n    $product = $input;\\r\\n}\\r\\nif (!empty($name) && empty($options)) {\\r\\n    $options = $name;\\r\\n}\\r\\n\\r\\n$product = !empty($product) && $product != $modx->resource->id\\r\\n    ? $modx->getObject(\'msProduct\', [\'id\' => $product])\\r\\n    : $modx->resource;\\r\\nif (!($product instanceof msProduct)) {\\r\\n    return \\"[msOptions] The resource with id = {$product->id} is not instance of msProduct.\\";\\r\\n}\\r\\n\\r\\n$names = array_map(\'trim\', explode(\',\', $options));\\r\\n$options = [];\\r\\nforeach ($names as $name) {\\r\\n    if (!empty($name) && $option = $product->get($name)) {\\r\\n        if (!is_array($option)) {\\r\\n            $option = [$option];\\r\\n        }\\r\\n        if (isset($option[0]) and (trim($option[0]) != \'\')) {\\r\\n            $options[$name] = $option;\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\n$options = $miniShop2->sortOptionValues($options, $scriptProperties[\'sortOptionValues\']);\\r\\n\\r\\n\\/** @var pdoTools $pdoTools *\\/\\r\\n$pdoTools = $modx->getService(\'pdoTools\');\\r\\n\\r\\nreturn $pdoTools->getChunk($tpl, [\\r\\n    \'id\' => $product->id,\\r\\n    \'options\' => $options,\\r\\n    \'scriptProperties\' => $scriptProperties\\r\\n]);"}',
        'guid' => '5006c11450a7978bacf26b83e3141af2',
        'native_key' => 0,
        'signature' => 'ac7dcf11f2d4ac0980be9f33d8b6b60a',
      ),
      'cb7c4babcc999953123c060777310365' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"msOrder","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var modX $modx *\\/\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var miniShop2 $miniShop2 *\\/\\r\\n$miniShop2 = $modx->getService(\'miniShop2\');\\r\\n$miniShop2->initialize($modx->context->key);\\r\\n\\/** @var pdoFetch $pdoFetch *\\/\\r\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\r\\n$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', true);\\r\\nif ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {\\r\\n    $pdoFetch = new $pdoClass($modx, $scriptProperties);\\r\\n} else {\\r\\n    return false;\\r\\n}\\r\\n$pdoFetch->addTime(\'pdoTools loaded.\');\\r\\n\\r\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msOrder\');\\r\\n\\r\\n\\/\\/ Do not show order form when displaying details of existing order\\r\\nif (!empty($_GET[\'msorder\'])) {\\r\\n    return \'\';\\r\\n}\\r\\n\\r\\n$cart = $miniShop2->cart->get();\\r\\n$order = $miniShop2->order->get();\\r\\n$status = $miniShop2->cart->status();\\r\\nif (empty($status[\'total_count\'])) {\\r\\n    return \'\';\\r\\n}\\r\\n$cost = $miniShop2->order->getCost();\\r\\n$order[\'cost\'] = $miniShop2->formatPrice($cost[\'data\'][\'cost\']);\\r\\n$order[\'cart_cost\'] = $miniShop2->formatPrice($cost[\'data\'][\'cart_cost\']);\\r\\n$order[\'delivery_cost\'] = $miniShop2->formatPrice($cost[\'data\'][\'delivery_cost\']);\\r\\n$order[\'discount_cost\'] = $miniShop2->formatPrice($cost[\'data\'][\'discount_cost\']);\\r\\n\\r\\n\\/\\/ We need only active methods\\r\\n$where = [\\r\\n    \'msDelivery.active\' => true,\\r\\n    \'msPayment.active\' => true,\\r\\n];\\r\\n\\r\\n\\/\\/ Join payments to deliveries\\r\\n$leftJoin = [\\r\\n    \'Payments\' => [\\r\\n        \'class\' => \'msDeliveryMember\',\\r\\n    ],\\r\\n    \'msPayment\' => [\\r\\n        \'class\' => \'msPayment\',\\r\\n        \'on\' => \'Payments.payment_id = msPayment.id\',\\r\\n    ],\\r\\n];\\r\\n\\r\\n\\/\\/ Select columns\\r\\n$select = [\\r\\n    \'msDelivery\' => $modx->getSelectColumns(\'msDelivery\', \'msDelivery\', \'delivery_\'),\\r\\n    \'msPayment\' => $modx->getSelectColumns(\'msPayment\', \'msPayment\', \'payment_\'),\\r\\n];\\r\\n\\r\\n\\/\\/ Add user parameters\\r\\nforeach ([\'where\', \'leftJoin\', \'select\'] as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $scriptProperties[$v];\\r\\n        if (!is_array($tmp)) {\\r\\n            $tmp = json_decode($tmp, true);\\r\\n        }\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n$pdoFetch->addTime(\'Conditions prepared\');\\r\\n\\r\\n\\/\\/ Default parameters\\r\\n$default = [\\r\\n    \'class\' => \'msDelivery\',\\r\\n    \'where\' => $where,\\r\\n    \'leftJoin\' => $leftJoin,\\r\\n    \'select\' => $select,\\r\\n    \'sortby\' => \'msDelivery.rank asc, msPayment.rank\',\\r\\n    \'sortdir\' => \'asc\',\\r\\n    \'limit\' => 0,\\r\\n    \'return\' => \'data\',\\r\\n    \'nestedChunkPrefix\' => \'minishop2_\',\\r\\n];\\r\\n\\/\\/ Merge all properties and run!\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\r\\n$rows = $pdoFetch->run();\\r\\n\\r\\n$deliveries = $payments = [];\\r\\nforeach ($rows as $row) {\\r\\n    $delivery = [];\\r\\n    $payment = [];\\r\\n    foreach ($row as $key => $value) {\\r\\n        if (strpos($key, \'delivery_\') === 0) {\\r\\n            $delivery[substr($key, 9)] = $value;\\r\\n        } else {\\r\\n            $payment[substr($key, 8)] = $value;\\r\\n        }\\r\\n    }\\r\\n\\r\\n    if (!isset($deliveries[$delivery[\'id\']])) {\\r\\n        $delivery[\'payments\'] = [];\\r\\n        $deliveries[$delivery[\'id\']] = $delivery;\\r\\n    }\\r\\n    if (!empty($payment[\'id\'])) {\\r\\n        $deliveries[$delivery[\'id\']][\'payments\'][] = (int)$payment[\'id\'];\\r\\n        if (!isset($payments[$payment[\'id\']])) {\\r\\n            $payments[$payment[\'id\']] = $payment;\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\n$form = [];\\r\\n\\/\\/ Get user data\\r\\n$profile = [];\\r\\nif ($modx->user->isAuthenticated($modx->context->key)) {\\r\\n    $profile = array_merge($modx->user->Profile->toArray(), $modx->user->toArray());\\r\\n}\\r\\n$fields = [\\r\\n    \'receiver\' => \'fullname\',\\r\\n    \'phone\' => \'phone\',\\r\\n    \'email\' => \'email\',\\r\\n    \'comment\' => \'extended[comment]\',\\r\\n    \'index\' => \'zip\',\\r\\n    \'country\' => \'country\',\\r\\n    \'region\' => \'state\',\\r\\n    \'city\' => \'city\',\\r\\n    \'street\' => \'address\',\\r\\n    \'building\' => \'extended[building]\',\\r\\n    \'room\' => \'extended[room]\',\\r\\n    \'entrance\' => \'extended[entrance]\',\\r\\n    \'floor\' => \'extended[floor]\',\\r\\n    \'text_address\' => \'extended[address]\',\\r\\n];\\r\\n\\/\\/ Apply custom fields\\r\\nif (!empty($userFields)) {\\r\\n    if (!is_array($userFields)) {\\r\\n        $userFields = json_decode($userFields, true);\\r\\n    }\\r\\n    if (is_array($userFields)) {\\r\\n        $fields = array_merge($fields, $userFields);\\r\\n    }\\r\\n}\\r\\n\\/\\/ Set user fields\\r\\nforeach ($fields as $key => $value) {\\r\\n    if (!empty($profile) && !empty($value)) {\\r\\n        if (strpos($value, \'extended\') !== false) {\\r\\n            $tmp = substr($value, 9, -1);\\r\\n            $value = !empty($profile[\'extended\'][$tmp])\\r\\n                ? $profile[\'extended\'][$tmp]\\r\\n                : \'\';\\r\\n        } else {\\r\\n            $value = $profile[$value];\\r\\n        }\\r\\n        $response = $miniShop2->order->add($key, $value);\\r\\n        if ($response[\'success\'] && !empty($response[\'data\'][$key])) {\\r\\n            $form[$key] = $response[\'data\'][$key];\\r\\n        }\\r\\n    }\\r\\n    if (empty($form[$key]) && !empty($order[$key])) {\\r\\n        $form[$key] = $order[$key];\\r\\n        unset($order[$key]);\\r\\n    }\\r\\n}\\r\\n\\r\\n\\/\\/ Check for errors\\r\\n$errors = [];\\r\\nif (!empty($_POST)) {\\r\\n    $response = $miniShop2->order->getDeliveryRequiresFields();\\r\\n    if ($requires = $response[\'data\'][\'requires\']) {\\r\\n        foreach ($_POST as $field => $val) {\\r\\n            $validated = $miniShop2->order->validate($field, $val);\\r\\n            if ((in_array($field, $requires) && empty($validated))) {\\r\\n                $errors[] = $field;\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\n$output = $pdoFetch->getChunk($tpl, [\\r\\n    \'order\' => $order,\\r\\n    \'form\' => $form,\\r\\n    \'deliveries\' => $deliveries,\\r\\n    \'payments\' => $payments,\\r\\n    \'errors\' => $errors,\\r\\n    \'scriptProperties\' => $scriptProperties\\r\\n]);\\r\\n\\r\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\r\\n    $output .= \'<pre class=\\"msOrderLog\\">\' . print_r($pdoFetch->getTime(), true) . \'<\\/pre>\';\\r\\n}\\r\\n\\r\\nreturn $output;","locked":0,"properties":"a:3:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:12:\\"ms2_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:11:\\"tpl.msOrder\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"userFields\\";a:7:{s:4:\\"name\\";s:10:\\"userFields\\";s:4:\\"desc\\";s:19:\\"ms2_prop_userFields\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:16:\\"ms2_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/snippets\\/snippet.ms_order.php","content":"\\/** @var modX $modx *\\/\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var miniShop2 $miniShop2 *\\/\\r\\n$miniShop2 = $modx->getService(\'miniShop2\');\\r\\n$miniShop2->initialize($modx->context->key);\\r\\n\\/** @var pdoFetch $pdoFetch *\\/\\r\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\r\\n$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', true);\\r\\nif ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {\\r\\n    $pdoFetch = new $pdoClass($modx, $scriptProperties);\\r\\n} else {\\r\\n    return false;\\r\\n}\\r\\n$pdoFetch->addTime(\'pdoTools loaded.\');\\r\\n\\r\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msOrder\');\\r\\n\\r\\n\\/\\/ Do not show order form when displaying details of existing order\\r\\nif (!empty($_GET[\'msorder\'])) {\\r\\n    return \'\';\\r\\n}\\r\\n\\r\\n$cart = $miniShop2->cart->get();\\r\\n$order = $miniShop2->order->get();\\r\\n$status = $miniShop2->cart->status();\\r\\nif (empty($status[\'total_count\'])) {\\r\\n    return \'\';\\r\\n}\\r\\n$cost = $miniShop2->order->getCost();\\r\\n$order[\'cost\'] = $miniShop2->formatPrice($cost[\'data\'][\'cost\']);\\r\\n$order[\'cart_cost\'] = $miniShop2->formatPrice($cost[\'data\'][\'cart_cost\']);\\r\\n$order[\'delivery_cost\'] = $miniShop2->formatPrice($cost[\'data\'][\'delivery_cost\']);\\r\\n$order[\'discount_cost\'] = $miniShop2->formatPrice($cost[\'data\'][\'discount_cost\']);\\r\\n\\r\\n\\/\\/ We need only active methods\\r\\n$where = [\\r\\n    \'msDelivery.active\' => true,\\r\\n    \'msPayment.active\' => true,\\r\\n];\\r\\n\\r\\n\\/\\/ Join payments to deliveries\\r\\n$leftJoin = [\\r\\n    \'Payments\' => [\\r\\n        \'class\' => \'msDeliveryMember\',\\r\\n    ],\\r\\n    \'msPayment\' => [\\r\\n        \'class\' => \'msPayment\',\\r\\n        \'on\' => \'Payments.payment_id = msPayment.id\',\\r\\n    ],\\r\\n];\\r\\n\\r\\n\\/\\/ Select columns\\r\\n$select = [\\r\\n    \'msDelivery\' => $modx->getSelectColumns(\'msDelivery\', \'msDelivery\', \'delivery_\'),\\r\\n    \'msPayment\' => $modx->getSelectColumns(\'msPayment\', \'msPayment\', \'payment_\'),\\r\\n];\\r\\n\\r\\n\\/\\/ Add user parameters\\r\\nforeach ([\'where\', \'leftJoin\', \'select\'] as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $scriptProperties[$v];\\r\\n        if (!is_array($tmp)) {\\r\\n            $tmp = json_decode($tmp, true);\\r\\n        }\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n$pdoFetch->addTime(\'Conditions prepared\');\\r\\n\\r\\n\\/\\/ Default parameters\\r\\n$default = [\\r\\n    \'class\' => \'msDelivery\',\\r\\n    \'where\' => $where,\\r\\n    \'leftJoin\' => $leftJoin,\\r\\n    \'select\' => $select,\\r\\n    \'sortby\' => \'msDelivery.rank asc, msPayment.rank\',\\r\\n    \'sortdir\' => \'asc\',\\r\\n    \'limit\' => 0,\\r\\n    \'return\' => \'data\',\\r\\n    \'nestedChunkPrefix\' => \'minishop2_\',\\r\\n];\\r\\n\\/\\/ Merge all properties and run!\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\r\\n$rows = $pdoFetch->run();\\r\\n\\r\\n$deliveries = $payments = [];\\r\\nforeach ($rows as $row) {\\r\\n    $delivery = [];\\r\\n    $payment = [];\\r\\n    foreach ($row as $key => $value) {\\r\\n        if (strpos($key, \'delivery_\') === 0) {\\r\\n            $delivery[substr($key, 9)] = $value;\\r\\n        } else {\\r\\n            $payment[substr($key, 8)] = $value;\\r\\n        }\\r\\n    }\\r\\n\\r\\n    if (!isset($deliveries[$delivery[\'id\']])) {\\r\\n        $delivery[\'payments\'] = [];\\r\\n        $deliveries[$delivery[\'id\']] = $delivery;\\r\\n    }\\r\\n    if (!empty($payment[\'id\'])) {\\r\\n        $deliveries[$delivery[\'id\']][\'payments\'][] = (int)$payment[\'id\'];\\r\\n        if (!isset($payments[$payment[\'id\']])) {\\r\\n            $payments[$payment[\'id\']] = $payment;\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\n$form = [];\\r\\n\\/\\/ Get user data\\r\\n$profile = [];\\r\\nif ($modx->user->isAuthenticated($modx->context->key)) {\\r\\n    $profile = array_merge($modx->user->Profile->toArray(), $modx->user->toArray());\\r\\n}\\r\\n$fields = [\\r\\n    \'receiver\' => \'fullname\',\\r\\n    \'phone\' => \'phone\',\\r\\n    \'email\' => \'email\',\\r\\n    \'comment\' => \'extended[comment]\',\\r\\n    \'index\' => \'zip\',\\r\\n    \'country\' => \'country\',\\r\\n    \'region\' => \'state\',\\r\\n    \'city\' => \'city\',\\r\\n    \'street\' => \'address\',\\r\\n    \'building\' => \'extended[building]\',\\r\\n    \'room\' => \'extended[room]\',\\r\\n    \'entrance\' => \'extended[entrance]\',\\r\\n    \'floor\' => \'extended[floor]\',\\r\\n    \'text_address\' => \'extended[address]\',\\r\\n];\\r\\n\\/\\/ Apply custom fields\\r\\nif (!empty($userFields)) {\\r\\n    if (!is_array($userFields)) {\\r\\n        $userFields = json_decode($userFields, true);\\r\\n    }\\r\\n    if (is_array($userFields)) {\\r\\n        $fields = array_merge($fields, $userFields);\\r\\n    }\\r\\n}\\r\\n\\/\\/ Set user fields\\r\\nforeach ($fields as $key => $value) {\\r\\n    if (!empty($profile) && !empty($value)) {\\r\\n        if (strpos($value, \'extended\') !== false) {\\r\\n            $tmp = substr($value, 9, -1);\\r\\n            $value = !empty($profile[\'extended\'][$tmp])\\r\\n                ? $profile[\'extended\'][$tmp]\\r\\n                : \'\';\\r\\n        } else {\\r\\n            $value = $profile[$value];\\r\\n        }\\r\\n        $response = $miniShop2->order->add($key, $value);\\r\\n        if ($response[\'success\'] && !empty($response[\'data\'][$key])) {\\r\\n            $form[$key] = $response[\'data\'][$key];\\r\\n        }\\r\\n    }\\r\\n    if (empty($form[$key]) && !empty($order[$key])) {\\r\\n        $form[$key] = $order[$key];\\r\\n        unset($order[$key]);\\r\\n    }\\r\\n}\\r\\n\\r\\n\\/\\/ Check for errors\\r\\n$errors = [];\\r\\nif (!empty($_POST)) {\\r\\n    $response = $miniShop2->order->getDeliveryRequiresFields();\\r\\n    if ($requires = $response[\'data\'][\'requires\']) {\\r\\n        foreach ($_POST as $field => $val) {\\r\\n            $validated = $miniShop2->order->validate($field, $val);\\r\\n            if ((in_array($field, $requires) && empty($validated))) {\\r\\n                $errors[] = $field;\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\n$output = $pdoFetch->getChunk($tpl, [\\r\\n    \'order\' => $order,\\r\\n    \'form\' => $form,\\r\\n    \'deliveries\' => $deliveries,\\r\\n    \'payments\' => $payments,\\r\\n    \'errors\' => $errors,\\r\\n    \'scriptProperties\' => $scriptProperties\\r\\n]);\\r\\n\\r\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\r\\n    $output .= \'<pre class=\\"msOrderLog\\">\' . print_r($pdoFetch->getTime(), true) . \'<\\/pre>\';\\r\\n}\\r\\n\\r\\nreturn $output;"}',
        'guid' => '58a1e7f3fbf19e2a731a2edbce925f04',
        'native_key' => 0,
        'signature' => '54ebd66695239301abba30de5a3c3c9b',
      ),
      'c316a44357b8fed94ef5072d6d5ca306' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"msGetOrder","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var modX $modx *\\/\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var miniShop2 $miniShop2 *\\/\\r\\n$miniShop2 = $modx->getService(\'miniShop2\');\\r\\n$miniShop2->initialize($modx->context->key);\\r\\n\\/** @var pdoFetch $pdoFetch *\\/\\r\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\r\\n$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', true);\\r\\nif ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {\\r\\n    $pdoFetch = new $pdoClass($modx, $scriptProperties);\\r\\n} else {\\r\\n    return false;\\r\\n}\\r\\n$pdoFetch->addTime(\'pdoTools loaded.\');\\r\\n\\r\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msGetOrder\');\\r\\n\\r\\nif (empty($id) && !empty($_GET[\'msorder\'])) {\\r\\n    $id = (int)$_GET[\'msorder\'];\\r\\n}\\r\\nif (empty($id)) {\\r\\n    return;\\r\\n}\\r\\n\\/** @var msOrder $order *\\/\\r\\nif (!$order = $modx->getObject(\'msOrder\', compact(\'id\'))) {\\r\\n    return $modx->lexicon(\'ms2_err_order_nf\');\\r\\n}\\r\\n$canView = (!empty($_SESSION[\'minishop2\'][\'orders\']) && in_array($id, $_SESSION[\'minishop2\'][\'orders\'])) ||\\r\\n    $order->get(\'user_id\') == $modx->user->id || $modx->user->hasSessionContext(\\r\\n        \'mgr\'\\r\\n    ) || !empty($scriptProperties[\'id\']);\\r\\nif (!$canView) {\\r\\n    return \'\';\\r\\n}\\r\\n\\r\\n\\/\\/ Select ordered products\\r\\n$where = [\\r\\n    \'msOrderProduct.order_id\' => $id,\\r\\n];\\r\\n\\r\\n\\/\\/ Include products properties\\r\\n$leftJoin = [\\r\\n    \'msProduct\' => [\\r\\n        \'class\' => \'msProduct\',\\r\\n        \'on\' => \'msProduct.id = msOrderProduct.product_id\',\\r\\n    ],\\r\\n    \'Data\' => [\\r\\n        \'class\' => \'msProductData\',\\r\\n        \'on\' => \'msProduct.id = Data.id\',\\r\\n    ],\\r\\n    \'Vendor\' => [\\r\\n        \'class\' => \'msVendor\',\\r\\n        \'on\' => \'Data.vendor = Vendor.id\',\\r\\n    ],\\r\\n];\\r\\n\\r\\n\\/\\/ Select columns\\r\\n$select = [\\r\\n    \'msProduct\' => !empty($includeContent)\\r\\n        ? $modx->getSelectColumns(\'msProduct\', \'msProduct\')\\r\\n        : $modx->getSelectColumns(\'msProduct\', \'msProduct\', \'\', [\'content\'], true),\\r\\n    \'Data\' => $modx->getSelectColumns(\\r\\n            \'msProductData\',\\r\\n            \'Data\',\\r\\n            \'\',\\r\\n            [\'id\'],\\r\\n            true\\r\\n        ) . \',`Data`.`price` as `original_price`\',\\r\\n    \'Vendor\' => $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', [\'id\'], true),\\r\\n    \'OrderProduct\' => $modx->getSelectColumns(\\r\\n            \'msOrderProduct\',\\r\\n            \'msOrderProduct\',\\r\\n            \'\',\\r\\n            [\'id\'],\\r\\n            true\\r\\n        ) . \', `msOrderProduct`.`id` as `order_product_id`\',\\r\\n];\\r\\n\\r\\n\\/\\/ Include products thumbnails\\r\\nif (!empty($includeThumbs)) {\\r\\n    $thumbs = array_map(\'trim\', explode(\',\', $includeThumbs));\\r\\n    if (!empty($thumbs[0])) {\\r\\n        foreach ($thumbs as $thumb) {\\r\\n            $leftJoin[$thumb] = [\\r\\n                \'class\' => \'msProductFile\',\\r\\n                \'on\' => \\"`{$thumb}`.product_id = msProduct.id AND `{$thumb}`.parent != 0 AND `{$thumb}`.path LIKE \'%\\/{$thumb}\\/%\'\\",\\r\\n            ];\\r\\n            $select[$thumb] = \\"`{$thumb}`.url as \'{$thumb}\'\\";\\r\\n        }\\r\\n        $pdoFetch->addTime(\'Included list of thumbnails: <b>\' . implode(\', \', $thumbs) . \'<\\/b>.\');\\r\\n    }\\r\\n}\\r\\n\\r\\n\\/\\/ Add user parameters\\r\\nforeach ([\'where\', \'leftJoin\', \'select\'] as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $scriptProperties[$v];\\r\\n        if (!is_array($tmp)) {\\r\\n            $tmp = json_decode($tmp, true);\\r\\n        }\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n$pdoFetch->addTime(\'Conditions prepared\');\\r\\n\\r\\n\\/\\/ Tables for joining\\r\\n$default = [\\r\\n    \'class\' => \'msOrderProduct\',\\r\\n    \'where\' => $where,\\r\\n    \'leftJoin\' => $leftJoin,\\r\\n    \'select\' => $select,\\r\\n    \'joinTVsTo\' => \'msProduct\',\\r\\n    \'sortby\' => \'msOrderProduct.id\',\\r\\n    \'sortdir\' => \'asc\',\\r\\n    \'groupby\' => \'msOrderProduct.id\',\\r\\n    \'fastMode\' => false,\\r\\n    \'limit\' => 0,\\r\\n    \'return\' => \'data\',\\r\\n    \'decodeJSON\' => true,\\r\\n    \'nestedChunkPrefix\' => \'minishop2_\',\\r\\n];\\r\\n\\/\\/ Merge all properties and run!\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), true);\\r\\n$rows = $pdoFetch->run();\\r\\n\\r\\n$products = [];\\r\\n$cart_count = 0;\\r\\n$cart_discount_cost = 0;\\r\\nforeach ($rows as $product) {\\r\\n    $old_price = $product[\'original_price\'] > $product[\'price\']\\r\\n        ? $product[\'original_price\']\\r\\n        : $product[\'old_price\'];\\r\\n\\r\\n    $discount_price = $old_price > 0 ? $old_price - $product[\'price\'] : 0;\\r\\n\\r\\n    $product[\'old_price\'] = $miniShop2->formatPrice($old_price);\\r\\n    $product[\'price\'] = $miniShop2->formatPrice($product[\'price\']);\\r\\n    $product[\'cost\'] = $miniShop2->formatPrice($product[\'cost\']);\\r\\n    $product[\'weight\'] = $miniShop2->formatWeight($product[\'weight\']);\\r\\n    $product[\'discount_price\'] = $miniShop2->formatPrice($discount_price);\\r\\n    $product[\'discount_cost\'] = $miniShop2->formatPrice($product[\'count\'] * $discount_price);\\r\\n\\r\\n    $product[\'id\'] = (int)$product[\'id\'];\\r\\n    if (empty($product[\'name\'])) {\\r\\n        $product[\'name\'] = $product[\'pagetitle\'];\\r\\n    } else {\\r\\n        $product[\'pagetitle\'] = $product[\'name\'];\\r\\n    }\\r\\n\\r\\n    \\/\\/ Additional properties of product\\r\\n    if (!empty($product[\'options\']) && is_array($product[\'options\'])) {\\r\\n        foreach ($product[\'options\'] as $option => $value) {\\r\\n            $product[\'option.\' . $option] = $value;\\r\\n        }\\r\\n    }\\r\\n\\r\\n    \\/\\/ Add option values\\r\\n    $options = $modx->call(\'msProductData\', \'loadOptions\', [$modx, $product[\'id\']]);\\r\\n    $products[] = array_merge($product, $options);\\r\\n\\r\\n    \\/\\/ Count total\\r\\n    $cart_count += $product[\'count\'];\\r\\n    $cart_discount_cost += $product[\'count\'] * $discount_price;\\r\\n}\\r\\n\\r\\n$pls = array_merge($scriptProperties, [\\r\\n    \'order\' => $order->toArray(),\\r\\n    \'products\' => $products,\\r\\n    \'user\' => ($tmp = $order->getOne(\'User\'))\\r\\n        ? array_merge($tmp->getOne(\'Profile\')->toArray(), $tmp->toArray())\\r\\n        : [],\\r\\n    \'address\' => ($tmp = $order->getOne(\'Address\'))\\r\\n        ? $tmp->toArray()\\r\\n        : [],\\r\\n    \'delivery\' => ($tmp = $order->getOne(\'Delivery\'))\\r\\n        ? $tmp->toArray()\\r\\n        : [],\\r\\n    \'payment\' => ($payment = $order->getOne(\'Payment\'))\\r\\n        ? $payment->toArray()\\r\\n        : [],\\r\\n    \'total\' => [\\r\\n        \'cost\' => $miniShop2->formatPrice($order->get(\'cost\')),\\r\\n        \'cart_cost\' => $miniShop2->formatPrice($order->get(\'cart_cost\')),\\r\\n        \'delivery_cost\' => $miniShop2->formatPrice($order->get(\'delivery_cost\')),\\r\\n        \'weight\' => $miniShop2->formatWeight($order->get(\'weight\')),\\r\\n        \'cart_weight\' => $miniShop2->formatWeight($order->get(\'weight\')),\\r\\n        \'cart_count\' => $cart_count,\\r\\n        \'cart_discount\' => $cart_discount_cost\\r\\n    ],\\r\\n]);\\r\\n\\r\\n\\/\\/ add \\"payment\\" link\\r\\nif ($payment and $class = $payment->get(\'class\')) {\\r\\n    $status = $modx->getOption(\'payStatus\', $scriptProperties, \'1\');\\r\\n    $status = array_map(\'trim\', explode(\',\', $status));\\r\\n    if (in_array($order->get(\'status\'), $status)) {\\r\\n        $miniShop2->loadCustomClasses(\'payment\');\\r\\n        if (class_exists($class)) {\\r\\n            \\/** @var msPaymentHandler|PayPal $handler *\\/\\r\\n            $handler = new $class($order);\\r\\n            if (method_exists($handler, \'getPaymentLink\')) {\\r\\n                $link = $handler->getPaymentLink($order);\\r\\n                $pls[\'payment_link\'] = $link;\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\n$pls[\'scriptProperties\'] = $scriptProperties;\\r\\n$output = $pdoFetch->getChunk($tpl, $pls);\\r\\n\\r\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\r\\n    $output .= \'<pre class=\\"msGetOrderLog\\">\' . print_r($pdoFetch->getTime(), true) . \'<\\/pre>\';\\r\\n}\\r\\n\\r\\nif (!empty($toPlaceholder)) {\\r\\n    $modx->setPlaceholder($toPlaceholder, $output);\\r\\n} else {\\r\\n    return $output;\\r\\n}","locked":0,"properties":"a:5:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:12:\\"ms2_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:14:\\"tpl.msGetOrder\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"includeTVs\\";a:7:{s:4:\\"name\\";s:10:\\"includeTVs\\";s:4:\\"desc\\";s:19:\\"ms2_prop_includeTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"includeThumbs\\";a:7:{s:4:\\"name\\";s:13:\\"includeThumbs\\";s:4:\\"desc\\";s:22:\\"ms2_prop_includeThumbs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:22:\\"ms2_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:16:\\"ms2_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/snippets\\/snippet.ms_get_order.php","content":"\\/** @var modX $modx *\\/\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var miniShop2 $miniShop2 *\\/\\r\\n$miniShop2 = $modx->getService(\'miniShop2\');\\r\\n$miniShop2->initialize($modx->context->key);\\r\\n\\/** @var pdoFetch $pdoFetch *\\/\\r\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\r\\n$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', true);\\r\\nif ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {\\r\\n    $pdoFetch = new $pdoClass($modx, $scriptProperties);\\r\\n} else {\\r\\n    return false;\\r\\n}\\r\\n$pdoFetch->addTime(\'pdoTools loaded.\');\\r\\n\\r\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msGetOrder\');\\r\\n\\r\\nif (empty($id) && !empty($_GET[\'msorder\'])) {\\r\\n    $id = (int)$_GET[\'msorder\'];\\r\\n}\\r\\nif (empty($id)) {\\r\\n    return;\\r\\n}\\r\\n\\/** @var msOrder $order *\\/\\r\\nif (!$order = $modx->getObject(\'msOrder\', compact(\'id\'))) {\\r\\n    return $modx->lexicon(\'ms2_err_order_nf\');\\r\\n}\\r\\n$canView = (!empty($_SESSION[\'minishop2\'][\'orders\']) && in_array($id, $_SESSION[\'minishop2\'][\'orders\'])) ||\\r\\n    $order->get(\'user_id\') == $modx->user->id || $modx->user->hasSessionContext(\\r\\n        \'mgr\'\\r\\n    ) || !empty($scriptProperties[\'id\']);\\r\\nif (!$canView) {\\r\\n    return \'\';\\r\\n}\\r\\n\\r\\n\\/\\/ Select ordered products\\r\\n$where = [\\r\\n    \'msOrderProduct.order_id\' => $id,\\r\\n];\\r\\n\\r\\n\\/\\/ Include products properties\\r\\n$leftJoin = [\\r\\n    \'msProduct\' => [\\r\\n        \'class\' => \'msProduct\',\\r\\n        \'on\' => \'msProduct.id = msOrderProduct.product_id\',\\r\\n    ],\\r\\n    \'Data\' => [\\r\\n        \'class\' => \'msProductData\',\\r\\n        \'on\' => \'msProduct.id = Data.id\',\\r\\n    ],\\r\\n    \'Vendor\' => [\\r\\n        \'class\' => \'msVendor\',\\r\\n        \'on\' => \'Data.vendor = Vendor.id\',\\r\\n    ],\\r\\n];\\r\\n\\r\\n\\/\\/ Select columns\\r\\n$select = [\\r\\n    \'msProduct\' => !empty($includeContent)\\r\\n        ? $modx->getSelectColumns(\'msProduct\', \'msProduct\')\\r\\n        : $modx->getSelectColumns(\'msProduct\', \'msProduct\', \'\', [\'content\'], true),\\r\\n    \'Data\' => $modx->getSelectColumns(\\r\\n            \'msProductData\',\\r\\n            \'Data\',\\r\\n            \'\',\\r\\n            [\'id\'],\\r\\n            true\\r\\n        ) . \',`Data`.`price` as `original_price`\',\\r\\n    \'Vendor\' => $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', [\'id\'], true),\\r\\n    \'OrderProduct\' => $modx->getSelectColumns(\\r\\n            \'msOrderProduct\',\\r\\n            \'msOrderProduct\',\\r\\n            \'\',\\r\\n            [\'id\'],\\r\\n            true\\r\\n        ) . \', `msOrderProduct`.`id` as `order_product_id`\',\\r\\n];\\r\\n\\r\\n\\/\\/ Include products thumbnails\\r\\nif (!empty($includeThumbs)) {\\r\\n    $thumbs = array_map(\'trim\', explode(\',\', $includeThumbs));\\r\\n    if (!empty($thumbs[0])) {\\r\\n        foreach ($thumbs as $thumb) {\\r\\n            $leftJoin[$thumb] = [\\r\\n                \'class\' => \'msProductFile\',\\r\\n                \'on\' => \\"`{$thumb}`.product_id = msProduct.id AND `{$thumb}`.parent != 0 AND `{$thumb}`.path LIKE \'%\\/{$thumb}\\/%\'\\",\\r\\n            ];\\r\\n            $select[$thumb] = \\"`{$thumb}`.url as \'{$thumb}\'\\";\\r\\n        }\\r\\n        $pdoFetch->addTime(\'Included list of thumbnails: <b>\' . implode(\', \', $thumbs) . \'<\\/b>.\');\\r\\n    }\\r\\n}\\r\\n\\r\\n\\/\\/ Add user parameters\\r\\nforeach ([\'where\', \'leftJoin\', \'select\'] as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $scriptProperties[$v];\\r\\n        if (!is_array($tmp)) {\\r\\n            $tmp = json_decode($tmp, true);\\r\\n        }\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n$pdoFetch->addTime(\'Conditions prepared\');\\r\\n\\r\\n\\/\\/ Tables for joining\\r\\n$default = [\\r\\n    \'class\' => \'msOrderProduct\',\\r\\n    \'where\' => $where,\\r\\n    \'leftJoin\' => $leftJoin,\\r\\n    \'select\' => $select,\\r\\n    \'joinTVsTo\' => \'msProduct\',\\r\\n    \'sortby\' => \'msOrderProduct.id\',\\r\\n    \'sortdir\' => \'asc\',\\r\\n    \'groupby\' => \'msOrderProduct.id\',\\r\\n    \'fastMode\' => false,\\r\\n    \'limit\' => 0,\\r\\n    \'return\' => \'data\',\\r\\n    \'decodeJSON\' => true,\\r\\n    \'nestedChunkPrefix\' => \'minishop2_\',\\r\\n];\\r\\n\\/\\/ Merge all properties and run!\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), true);\\r\\n$rows = $pdoFetch->run();\\r\\n\\r\\n$products = [];\\r\\n$cart_count = 0;\\r\\n$cart_discount_cost = 0;\\r\\nforeach ($rows as $product) {\\r\\n    $old_price = $product[\'original_price\'] > $product[\'price\']\\r\\n        ? $product[\'original_price\']\\r\\n        : $product[\'old_price\'];\\r\\n\\r\\n    $discount_price = $old_price > 0 ? $old_price - $product[\'price\'] : 0;\\r\\n\\r\\n    $product[\'old_price\'] = $miniShop2->formatPrice($old_price);\\r\\n    $product[\'price\'] = $miniShop2->formatPrice($product[\'price\']);\\r\\n    $product[\'cost\'] = $miniShop2->formatPrice($product[\'cost\']);\\r\\n    $product[\'weight\'] = $miniShop2->formatWeight($product[\'weight\']);\\r\\n    $product[\'discount_price\'] = $miniShop2->formatPrice($discount_price);\\r\\n    $product[\'discount_cost\'] = $miniShop2->formatPrice($product[\'count\'] * $discount_price);\\r\\n\\r\\n    $product[\'id\'] = (int)$product[\'id\'];\\r\\n    if (empty($product[\'name\'])) {\\r\\n        $product[\'name\'] = $product[\'pagetitle\'];\\r\\n    } else {\\r\\n        $product[\'pagetitle\'] = $product[\'name\'];\\r\\n    }\\r\\n\\r\\n    \\/\\/ Additional properties of product\\r\\n    if (!empty($product[\'options\']) && is_array($product[\'options\'])) {\\r\\n        foreach ($product[\'options\'] as $option => $value) {\\r\\n            $product[\'option.\' . $option] = $value;\\r\\n        }\\r\\n    }\\r\\n\\r\\n    \\/\\/ Add option values\\r\\n    $options = $modx->call(\'msProductData\', \'loadOptions\', [$modx, $product[\'id\']]);\\r\\n    $products[] = array_merge($product, $options);\\r\\n\\r\\n    \\/\\/ Count total\\r\\n    $cart_count += $product[\'count\'];\\r\\n    $cart_discount_cost += $product[\'count\'] * $discount_price;\\r\\n}\\r\\n\\r\\n$pls = array_merge($scriptProperties, [\\r\\n    \'order\' => $order->toArray(),\\r\\n    \'products\' => $products,\\r\\n    \'user\' => ($tmp = $order->getOne(\'User\'))\\r\\n        ? array_merge($tmp->getOne(\'Profile\')->toArray(), $tmp->toArray())\\r\\n        : [],\\r\\n    \'address\' => ($tmp = $order->getOne(\'Address\'))\\r\\n        ? $tmp->toArray()\\r\\n        : [],\\r\\n    \'delivery\' => ($tmp = $order->getOne(\'Delivery\'))\\r\\n        ? $tmp->toArray()\\r\\n        : [],\\r\\n    \'payment\' => ($payment = $order->getOne(\'Payment\'))\\r\\n        ? $payment->toArray()\\r\\n        : [],\\r\\n    \'total\' => [\\r\\n        \'cost\' => $miniShop2->formatPrice($order->get(\'cost\')),\\r\\n        \'cart_cost\' => $miniShop2->formatPrice($order->get(\'cart_cost\')),\\r\\n        \'delivery_cost\' => $miniShop2->formatPrice($order->get(\'delivery_cost\')),\\r\\n        \'weight\' => $miniShop2->formatWeight($order->get(\'weight\')),\\r\\n        \'cart_weight\' => $miniShop2->formatWeight($order->get(\'weight\')),\\r\\n        \'cart_count\' => $cart_count,\\r\\n        \'cart_discount\' => $cart_discount_cost\\r\\n    ],\\r\\n]);\\r\\n\\r\\n\\/\\/ add \\"payment\\" link\\r\\nif ($payment and $class = $payment->get(\'class\')) {\\r\\n    $status = $modx->getOption(\'payStatus\', $scriptProperties, \'1\');\\r\\n    $status = array_map(\'trim\', explode(\',\', $status));\\r\\n    if (in_array($order->get(\'status\'), $status)) {\\r\\n        $miniShop2->loadCustomClasses(\'payment\');\\r\\n        if (class_exists($class)) {\\r\\n            \\/** @var msPaymentHandler|PayPal $handler *\\/\\r\\n            $handler = new $class($order);\\r\\n            if (method_exists($handler, \'getPaymentLink\')) {\\r\\n                $link = $handler->getPaymentLink($order);\\r\\n                $pls[\'payment_link\'] = $link;\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\n$pls[\'scriptProperties\'] = $scriptProperties;\\r\\n$output = $pdoFetch->getChunk($tpl, $pls);\\r\\n\\r\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\r\\n    $output .= \'<pre class=\\"msGetOrderLog\\">\' . print_r($pdoFetch->getTime(), true) . \'<\\/pre>\';\\r\\n}\\r\\n\\r\\nif (!empty($toPlaceholder)) {\\r\\n    $modx->setPlaceholder($toPlaceholder, $output);\\r\\n} else {\\r\\n    return $output;\\r\\n}"}',
        'guid' => '75b5ba334996ae17351345b4fcabd08c',
        'native_key' => 0,
        'signature' => '15e99d0556baceaa27ca025037d7c07d',
      ),
      '25af36351313b3e17642a2ddea856d0d' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"msProductOptions","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var modX $modx *\\/\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var miniShop2 $miniShop2 *\\/\\r\\n$miniShop2 = $modx->getService(\'miniShop2\');\\r\\n\\r\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msProductOptions\');\\r\\nif (!empty($input) && empty($product)) {\\r\\n    $product = $input;\\r\\n}\\r\\n\\r\\n$product = !empty($product) && $product != $modx->resource->id\\r\\n    ? $modx->getObject(\'msProduct\', [\'id\' => $product])\\r\\n    : $modx->resource;\\r\\nif (!($product instanceof msProduct)) {\\r\\n    return \\"[msProductOptions] The resource with id = {$product->id} is not instance of msProduct.\\";\\r\\n}\\r\\n\\r\\n$ignoreGroups = array_diff(\\r\\n    array_map(\'trim\', explode(\',\', $modx->getOption(\'ignoreGroups\', $scriptProperties, \'\'))),\\r\\n    [\'\']\\r\\n);\\r\\n$ignoreOptions = array_diff(\\r\\n    array_map(\'trim\', explode(\',\', $modx->getOption(\'ignoreOptions\', $scriptProperties, \'\'))),\\r\\n    [\'\']\\r\\n);\\r\\n$sortGroups = array_diff(array_map(\'trim\', explode(\',\', $modx->getOption(\'sortGroups\', $scriptProperties, \'\'))), [\'\']);\\r\\n$sortOptions = array_diff(array_map(\'trim\', explode(\',\', $modx->getOption(\'sortOptions\', $scriptProperties, \'\'))), [\'\']);\\r\\n$onlyOptions = array_diff(array_map(\'trim\', explode(\',\', $modx->getOption(\'onlyOptions\', $scriptProperties, \'\'))), [\'\']);\\r\\nif (empty($sortOptions) && !empty($onlyOptions)) {\\r\\n    $sortOptions = $onlyOptions;\\r\\n}\\r\\n$groups = !empty($groups)\\r\\n    ? array_map(\'trim\', explode(\',\', $groups))\\r\\n    : [];\\r\\n\\/** @var msProductData $data *\\/\\r\\nif ($data = $product->getOne(\'Data\')) {\\r\\n    $optionKeys = $data->getOptionKeys();\\r\\n}\\r\\nif (empty($optionKeys)) {\\r\\n    return \'\';\\r\\n}\\r\\n$productData = $product->loadOptions();\\r\\n\\r\\n$options = [];\\r\\nforeach ($optionKeys as $key) {\\r\\n    \\/\\/ Filter by key\\r\\n    if (!empty($onlyOptions) && $onlyOptions[0] != \'\' && !in_array($key, $onlyOptions)) {\\r\\n        continue;\\r\\n    } elseif (in_array($key, $ignoreOptions)) {\\r\\n        continue;\\r\\n    }\\r\\n    $option = [];\\r\\n    foreach ($productData as $dataKey => $dataValue) {\\r\\n        $dataKey = explode(\'.\', $dataKey);\\r\\n        if ($dataKey[0] == $key && (count($dataKey) > 1)) {\\r\\n            $option[$dataKey[1]] = $dataValue;\\r\\n        }\\r\\n    }\\r\\n\\r\\n    $skip = (!empty($ignoreGroups) && (in_array($option[\'category\'], $ignoreGroups) || in_array(\\r\\n        $option[\'category_name\'],\\r\\n        $ignoreGroups\\r\\n    )))\\r\\n        || (!empty($groups) && !in_array($option[\'category\'], $groups) && !in_array($option[\'category_name\'], $groups));\\r\\n\\r\\n    if (!$skip) {\\r\\n        $option[\'value\'] = $product->get($key);\\r\\n        if (!empty($option[\'value\'])) {\\r\\n            $options[$key] = $option;\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\nif (!empty($sortGroups) && !empty($options)) {\\r\\n    $sortGroups = array_map(\'mb_strtolower\', $sortGroups);\\r\\n    uasort($options, function ($a, $b) use ($sortGroups) {\\r\\n        $ai = array_search(mb_strtolower($a[\'category\'], \'utf-8\'), $sortGroups, true);\\r\\n        $ai = $ai !== false ? $ai : array_search(mb_strtolower($a[\'category_name\'], \'utf-8\'), $sortGroups, true);\\r\\n        $bi = array_search(mb_strtolower($b[\'category\'], \'utf-8\'), $sortGroups, true);\\r\\n        $bi = $bi !== false ? $bi : array_search(mb_strtolower($b[\'category_name\'], \'utf-8\'), $sortGroups, true);\\r\\n        if ($ai === false && $bi === false) {\\r\\n            return 0;\\r\\n        } elseif ($ai === false) {\\r\\n            return 1;\\r\\n        } elseif ($bi === false) {\\r\\n            return -1;\\r\\n        } elseif ($ai < $bi) {\\r\\n            return -1;\\r\\n        } elseif ($ai > $bi) {\\r\\n            return 1;\\r\\n        }\\r\\n        return 0;\\r\\n    });\\r\\n}\\r\\n\\r\\nif (!empty($sortOptions) && !empty($options)) {\\r\\n    $sortOptions = array_map(\'mb_strtolower\', $sortOptions);\\r\\n    uksort($options, function ($a, $b) use ($sortOptions) {\\r\\n        $ai = array_search(mb_strtolower($a, \'utf-8\'), $sortOptions, true);\\r\\n        $bi = array_search(mb_strtolower($b, \'utf-8\'), $sortOptions, true);\\r\\n        if ($ai === false && $bi === false) {\\r\\n            return 0;\\r\\n        } elseif ($ai === false) {\\r\\n            return 1;\\r\\n        } elseif ($bi === false) {\\r\\n            return -1;\\r\\n        } elseif ($ai < $bi) {\\r\\n            return -1;\\r\\n        } elseif ($ai > $bi) {\\r\\n            return 1;\\r\\n        }\\r\\n        return 0;\\r\\n    });\\r\\n}\\r\\n\\r\\n$options = $miniShop2->sortOptionValues($options, $scriptProperties[\'sortOptionValues\']);\\r\\n\\r\\nif (in_array($scriptProperties[\'return\'], [\'data\', \'array\'], true)) {\\r\\n    return $options;\\r\\n}\\r\\n\\r\\n\\/** @var pdoTools $pdoTools *\\/\\r\\n$pdoTools = $modx->getService(\'pdoTools\');\\r\\n\\r\\nreturn $pdoTools->getChunk($tpl, [\\r\\n    \'options\' => $options,\\r\\n    \'scriptProperties\' => $scriptProperties\\r\\n]);","locked":0,"properties":"a:9:{s:7:\\"product\\";a:7:{s:4:\\"name\\";s:7:\\"product\\";s:4:\\"desc\\";s:16:\\"ms2_prop_product\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:12:\\"ms2_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:20:\\"tpl.msProductOptions\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"ignoreGroups\\";a:7:{s:4:\\"name\\";s:12:\\"ignoreGroups\\";s:4:\\"desc\\";s:21:\\"ms2_prop_ignoreGroups\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"ignoreOptions\\";a:7:{s:4:\\"name\\";s:13:\\"ignoreOptions\\";s:4:\\"desc\\";s:22:\\"ms2_prop_ignoreOptions\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"onlyOptions\\";a:7:{s:4:\\"name\\";s:11:\\"onlyOptions\\";s:4:\\"desc\\";s:20:\\"ms2_prop_onlyOptions\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"sortGroups\\";a:7:{s:4:\\"name\\";s:10:\\"sortGroups\\";s:4:\\"desc\\";s:19:\\"ms2_prop_sortGroups\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"sortOptions\\";a:7:{s:4:\\"name\\";s:11:\\"sortOptions\\";s:4:\\"desc\\";s:20:\\"ms2_prop_sortOptions\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"sortOptionValues\\";a:7:{s:4:\\"name\\";s:16:\\"sortOptionValues\\";s:4:\\"desc\\";s:25:\\"ms2_prop_sortOptionValues\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"groups\\";a:7:{s:4:\\"name\\";s:6:\\"groups\\";s:4:\\"desc\\";s:15:\\"ms2_prop_groups\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/snippets\\/snippet.ms_product_options.php","content":"\\/** @var modX $modx *\\/\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var miniShop2 $miniShop2 *\\/\\r\\n$miniShop2 = $modx->getService(\'miniShop2\');\\r\\n\\r\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msProductOptions\');\\r\\nif (!empty($input) && empty($product)) {\\r\\n    $product = $input;\\r\\n}\\r\\n\\r\\n$product = !empty($product) && $product != $modx->resource->id\\r\\n    ? $modx->getObject(\'msProduct\', [\'id\' => $product])\\r\\n    : $modx->resource;\\r\\nif (!($product instanceof msProduct)) {\\r\\n    return \\"[msProductOptions] The resource with id = {$product->id} is not instance of msProduct.\\";\\r\\n}\\r\\n\\r\\n$ignoreGroups = array_diff(\\r\\n    array_map(\'trim\', explode(\',\', $modx->getOption(\'ignoreGroups\', $scriptProperties, \'\'))),\\r\\n    [\'\']\\r\\n);\\r\\n$ignoreOptions = array_diff(\\r\\n    array_map(\'trim\', explode(\',\', $modx->getOption(\'ignoreOptions\', $scriptProperties, \'\'))),\\r\\n    [\'\']\\r\\n);\\r\\n$sortGroups = array_diff(array_map(\'trim\', explode(\',\', $modx->getOption(\'sortGroups\', $scriptProperties, \'\'))), [\'\']);\\r\\n$sortOptions = array_diff(array_map(\'trim\', explode(\',\', $modx->getOption(\'sortOptions\', $scriptProperties, \'\'))), [\'\']);\\r\\n$onlyOptions = array_diff(array_map(\'trim\', explode(\',\', $modx->getOption(\'onlyOptions\', $scriptProperties, \'\'))), [\'\']);\\r\\nif (empty($sortOptions) && !empty($onlyOptions)) {\\r\\n    $sortOptions = $onlyOptions;\\r\\n}\\r\\n$groups = !empty($groups)\\r\\n    ? array_map(\'trim\', explode(\',\', $groups))\\r\\n    : [];\\r\\n\\/** @var msProductData $data *\\/\\r\\nif ($data = $product->getOne(\'Data\')) {\\r\\n    $optionKeys = $data->getOptionKeys();\\r\\n}\\r\\nif (empty($optionKeys)) {\\r\\n    return \'\';\\r\\n}\\r\\n$productData = $product->loadOptions();\\r\\n\\r\\n$options = [];\\r\\nforeach ($optionKeys as $key) {\\r\\n    \\/\\/ Filter by key\\r\\n    if (!empty($onlyOptions) && $onlyOptions[0] != \'\' && !in_array($key, $onlyOptions)) {\\r\\n        continue;\\r\\n    } elseif (in_array($key, $ignoreOptions)) {\\r\\n        continue;\\r\\n    }\\r\\n    $option = [];\\r\\n    foreach ($productData as $dataKey => $dataValue) {\\r\\n        $dataKey = explode(\'.\', $dataKey);\\r\\n        if ($dataKey[0] == $key && (count($dataKey) > 1)) {\\r\\n            $option[$dataKey[1]] = $dataValue;\\r\\n        }\\r\\n    }\\r\\n\\r\\n    $skip = (!empty($ignoreGroups) && (in_array($option[\'category\'], $ignoreGroups) || in_array(\\r\\n        $option[\'category_name\'],\\r\\n        $ignoreGroups\\r\\n    )))\\r\\n        || (!empty($groups) && !in_array($option[\'category\'], $groups) && !in_array($option[\'category_name\'], $groups));\\r\\n\\r\\n    if (!$skip) {\\r\\n        $option[\'value\'] = $product->get($key);\\r\\n        if (!empty($option[\'value\'])) {\\r\\n            $options[$key] = $option;\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\nif (!empty($sortGroups) && !empty($options)) {\\r\\n    $sortGroups = array_map(\'mb_strtolower\', $sortGroups);\\r\\n    uasort($options, function ($a, $b) use ($sortGroups) {\\r\\n        $ai = array_search(mb_strtolower($a[\'category\'], \'utf-8\'), $sortGroups, true);\\r\\n        $ai = $ai !== false ? $ai : array_search(mb_strtolower($a[\'category_name\'], \'utf-8\'), $sortGroups, true);\\r\\n        $bi = array_search(mb_strtolower($b[\'category\'], \'utf-8\'), $sortGroups, true);\\r\\n        $bi = $bi !== false ? $bi : array_search(mb_strtolower($b[\'category_name\'], \'utf-8\'), $sortGroups, true);\\r\\n        if ($ai === false && $bi === false) {\\r\\n            return 0;\\r\\n        } elseif ($ai === false) {\\r\\n            return 1;\\r\\n        } elseif ($bi === false) {\\r\\n            return -1;\\r\\n        } elseif ($ai < $bi) {\\r\\n            return -1;\\r\\n        } elseif ($ai > $bi) {\\r\\n            return 1;\\r\\n        }\\r\\n        return 0;\\r\\n    });\\r\\n}\\r\\n\\r\\nif (!empty($sortOptions) && !empty($options)) {\\r\\n    $sortOptions = array_map(\'mb_strtolower\', $sortOptions);\\r\\n    uksort($options, function ($a, $b) use ($sortOptions) {\\r\\n        $ai = array_search(mb_strtolower($a, \'utf-8\'), $sortOptions, true);\\r\\n        $bi = array_search(mb_strtolower($b, \'utf-8\'), $sortOptions, true);\\r\\n        if ($ai === false && $bi === false) {\\r\\n            return 0;\\r\\n        } elseif ($ai === false) {\\r\\n            return 1;\\r\\n        } elseif ($bi === false) {\\r\\n            return -1;\\r\\n        } elseif ($ai < $bi) {\\r\\n            return -1;\\r\\n        } elseif ($ai > $bi) {\\r\\n            return 1;\\r\\n        }\\r\\n        return 0;\\r\\n    });\\r\\n}\\r\\n\\r\\n$options = $miniShop2->sortOptionValues($options, $scriptProperties[\'sortOptionValues\']);\\r\\n\\r\\nif (in_array($scriptProperties[\'return\'], [\'data\', \'array\'], true)) {\\r\\n    return $options;\\r\\n}\\r\\n\\r\\n\\/** @var pdoTools $pdoTools *\\/\\r\\n$pdoTools = $modx->getService(\'pdoTools\');\\r\\n\\r\\nreturn $pdoTools->getChunk($tpl, [\\r\\n    \'options\' => $options,\\r\\n    \'scriptProperties\' => $scriptProperties\\r\\n]);"}',
        'guid' => '103e7c477068b201cff17a18ed7c9808',
        'native_key' => 0,
        'signature' => '4eaaf67fd741fb0e808fb0563807a6a6',
      ),
    ),
    'Plugins' => 
    array (
      'dcf35d0c8fabcc8b0303ca4eaedfdb51' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modPlugin',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"miniShop2","description":"","editor_type":0,"category":0,"cache_type":0,"plugincode":"\\/** @var modX $modx *\\/\\r\\nswitch ($modx->event->name) {\\r\\n    case \'OnMODXInit\':\\r\\n        \\/\\/ Load extensions\\r\\n        \\/** @var miniShop2 $miniShop2 *\\/\\r\\n        if ($miniShop2 = $modx->getService(\'miniShop2\')) {\\r\\n            $miniShop2->loadMap();\\r\\n        }\\r\\n        break;\\r\\n\\r\\n    case \'OnHandleRequest\':\\r\\n        \\/\\/ Handle ajax requests\\r\\n        $isAjax = !empty($_SERVER[\'HTTP_X_REQUESTED_WITH\']) && $_SERVER[\'HTTP_X_REQUESTED_WITH\'] == \'XMLHttpRequest\';\\r\\n        if (empty($_REQUEST[\'ms2_action\']) || !$isAjax) {\\r\\n            return;\\r\\n        }\\r\\n        \\/** @var miniShop2 $miniShop2 *\\/\\r\\n        if ($miniShop2 = $modx->getService(\'miniShop2\')) {\\r\\n            $response = $miniShop2->handleRequest($_REQUEST[\'ms2_action\'], @$_POST);\\r\\n            @session_write_close();\\r\\n            exit($response);\\r\\n        }\\r\\n        break;\\r\\n\\r\\n    case \'OnManagerPageBeforeRender\':\\r\\n        \\/** @var miniShop2 $miniShop2 *\\/\\r\\n        if ($miniShop2 = $modx->getService(\'miniShop2\')) {\\r\\n            $modx->controller->addLexiconTopic(\'minishop2:default\');\\r\\n            $modx->regClientStartupScript($miniShop2->config[\'jsUrl\'] . \'mgr\\/misc\\/ms2.manager.js\');\\r\\n        }\\r\\n        break;\\r\\n\\r\\n    case \'OnLoadWebDocument\':\\r\\n        \\/** @var miniShop2 $miniShop2 *\\/\\r\\n        $miniShop2 = $modx->getService(\'miniShop2\');\\r\\n        $registerFrontend = $modx->getOption(\'ms2_register_frontend\', null, \'1\');\\r\\n        if ($miniShop2 && $registerFrontend) {\\r\\n            $miniShop2->registerFrontend($modx->context->get(\'key\'));\\r\\n        }\\r\\n        \\/\\/ Handle non-ajax requests\\r\\n        if (!empty($_REQUEST[\'ms2_action\'])) {\\r\\n            if ($miniShop2) {\\r\\n                $miniShop2->handleRequest($_REQUEST[\'ms2_action\'], @$_POST);\\r\\n            }\\r\\n        }\\r\\n        \\/\\/ Set product fields as [[*resource]] tags\\r\\n        if ($modx->resource->get(\'class_key\') == \'msProduct\') {\\r\\n            if ($dataMeta = $modx->getFieldMeta(\'msProductData\')) {\\r\\n                unset($dataMeta[\'id\']);\\r\\n                $modx->resource->_fieldMeta = array_merge(\\r\\n                    $modx->resource->_fieldMeta,\\r\\n                    $dataMeta\\r\\n                );\\r\\n            }\\r\\n        }\\r\\n        break;\\r\\n\\r\\n    case \'OnWebPageInit\':\\r\\n        \\/\\/ Set referrer cookie\\r\\n        \\/** @var msCustomerProfile $profile *\\/\\r\\n        $referrerVar = $modx->getOption(\'ms2_referrer_code_var\', null, \'msfrom\', true);\\r\\n        $cookieVar = $modx->getOption(\'ms2_referrer_cookie_var\', null, \'msreferrer\', true);\\r\\n        $cookieTime = $modx->getOption(\'ms2_referrer_time\', null, 86400 * 365, true);\\r\\n\\r\\n        if (!$modx->user->isAuthenticated() && !empty($_REQUEST[$referrerVar])) {\\r\\n            $code = trim($_REQUEST[$referrerVar]);\\r\\n            if ($profile = $modx->getObject(\'msCustomerProfile\', [\'referrer_code\' => $code])) {\\r\\n                $referrer = $profile->get(\'id\');\\r\\n                setcookie($cookieVar, $referrer, time() + $cookieTime);\\r\\n            }\\r\\n        }\\r\\n        break;\\r\\n\\r\\n    case \'OnUserSave\':\\r\\n        \\/\\/ Save referrer id\\r\\n        \\/** @var string $mode *\\/\\r\\n        if ($mode == modSystemEvent::MODE_NEW) {\\r\\n            \\/** @var modUser $user *\\/\\r\\n            $cookieVar = $modx->getOption(\'ms2_referrer_cookie_var\', null, \'msreferrer\', true);\\r\\n            $cookieTime = $modx->getOption(\'ms2_referrer_time\', null, 86400 * 365, true);\\r\\n            if ($modx->context->key != \'mgr\' && !empty($_COOKIE[$cookieVar])) {\\r\\n                if ($profile = $modx->getObject(\'msCustomerProfile\', [\'id\' => $user->get(\'id\')])) {\\r\\n                    if (!$profile->get(\'referrer_id\') && $_COOKIE[$cookieVar] != $user->get(\'id\')) {\\r\\n                        $profile->set(\'referrer_id\', (int)$_COOKIE[$cookieVar]);\\r\\n                        $profile->save();\\r\\n                    }\\r\\n                }\\r\\n                setcookie($cookieVar, \'\', time() - $cookieTime);\\r\\n            }\\r\\n        }\\r\\n        break;\\r\\n\\r\\n    case \'msOnChangeOrderStatus\':\\r\\n        \\/\\/ Update customer stat\\r\\n        if (empty($status) || $status != 2) {\\r\\n            return;\\r\\n        }\\r\\n\\r\\n        \\/** @var modUser $user *\\/\\r\\n        \\/** @var msOrder $order *\\/\\r\\n        if ($user = $order->getOne(\'User\')) {\\r\\n            $q = $modx->newQuery(\'msOrder\', [\'type\' => 0]);\\r\\n            $q->innerJoin(\'modUser\', \'modUser\', [\'modUser.id = msOrder.user_id\']);\\r\\n            $q->innerJoin(\'msOrderLog\', \'msOrderLog\', [\\r\\n                \'msOrderLog.order_id = msOrder.id\',\\r\\n                \'msOrderLog.action\' => \'status\',\\r\\n                \'msOrderLog.entry\' => $status,\\r\\n            ]);\\r\\n            $q->where([\'msOrder.user_id\' => $user->get(\'id\')]);\\r\\n            $q->groupby(\'msOrder.user_id\');\\r\\n            $q->select(\'SUM(msOrder.cost)\');\\r\\n            if ($q->prepare() && $q->stmt->execute()) {\\r\\n                $spent = $q->stmt->fetchColumn();\\r\\n                \\/** @var msCustomerProfile $profile *\\/\\r\\n                if ($profile = $modx->getObject(\'msCustomerProfile\', [\'id\' => $user->get(\'id\')])) {\\r\\n                    $profile->set(\'spent\', $spent);\\r\\n                    $profile->save();\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n        break;\\r\\n}","locked":0,"properties":null,"disabled":0,"moduleguid":"","static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/plugins\\/plugin.minishop2.php","content":"\\/** @var modX $modx *\\/\\r\\nswitch ($modx->event->name) {\\r\\n    case \'OnMODXInit\':\\r\\n        \\/\\/ Load extensions\\r\\n        \\/** @var miniShop2 $miniShop2 *\\/\\r\\n        if ($miniShop2 = $modx->getService(\'miniShop2\')) {\\r\\n            $miniShop2->loadMap();\\r\\n        }\\r\\n        break;\\r\\n\\r\\n    case \'OnHandleRequest\':\\r\\n        \\/\\/ Handle ajax requests\\r\\n        $isAjax = !empty($_SERVER[\'HTTP_X_REQUESTED_WITH\']) && $_SERVER[\'HTTP_X_REQUESTED_WITH\'] == \'XMLHttpRequest\';\\r\\n        if (empty($_REQUEST[\'ms2_action\']) || !$isAjax) {\\r\\n            return;\\r\\n        }\\r\\n        \\/** @var miniShop2 $miniShop2 *\\/\\r\\n        if ($miniShop2 = $modx->getService(\'miniShop2\')) {\\r\\n            $response = $miniShop2->handleRequest($_REQUEST[\'ms2_action\'], @$_POST);\\r\\n            @session_write_close();\\r\\n            exit($response);\\r\\n        }\\r\\n        break;\\r\\n\\r\\n    case \'OnManagerPageBeforeRender\':\\r\\n        \\/** @var miniShop2 $miniShop2 *\\/\\r\\n        if ($miniShop2 = $modx->getService(\'miniShop2\')) {\\r\\n            $modx->controller->addLexiconTopic(\'minishop2:default\');\\r\\n            $modx->regClientStartupScript($miniShop2->config[\'jsUrl\'] . \'mgr\\/misc\\/ms2.manager.js\');\\r\\n        }\\r\\n        break;\\r\\n\\r\\n    case \'OnLoadWebDocument\':\\r\\n        \\/** @var miniShop2 $miniShop2 *\\/\\r\\n        $miniShop2 = $modx->getService(\'miniShop2\');\\r\\n        $registerFrontend = $modx->getOption(\'ms2_register_frontend\', null, \'1\');\\r\\n        if ($miniShop2 && $registerFrontend) {\\r\\n            $miniShop2->registerFrontend($modx->context->get(\'key\'));\\r\\n        }\\r\\n        \\/\\/ Handle non-ajax requests\\r\\n        if (!empty($_REQUEST[\'ms2_action\'])) {\\r\\n            if ($miniShop2) {\\r\\n                $miniShop2->handleRequest($_REQUEST[\'ms2_action\'], @$_POST);\\r\\n            }\\r\\n        }\\r\\n        \\/\\/ Set product fields as [[*resource]] tags\\r\\n        if ($modx->resource->get(\'class_key\') == \'msProduct\') {\\r\\n            if ($dataMeta = $modx->getFieldMeta(\'msProductData\')) {\\r\\n                unset($dataMeta[\'id\']);\\r\\n                $modx->resource->_fieldMeta = array_merge(\\r\\n                    $modx->resource->_fieldMeta,\\r\\n                    $dataMeta\\r\\n                );\\r\\n            }\\r\\n        }\\r\\n        break;\\r\\n\\r\\n    case \'OnWebPageInit\':\\r\\n        \\/\\/ Set referrer cookie\\r\\n        \\/** @var msCustomerProfile $profile *\\/\\r\\n        $referrerVar = $modx->getOption(\'ms2_referrer_code_var\', null, \'msfrom\', true);\\r\\n        $cookieVar = $modx->getOption(\'ms2_referrer_cookie_var\', null, \'msreferrer\', true);\\r\\n        $cookieTime = $modx->getOption(\'ms2_referrer_time\', null, 86400 * 365, true);\\r\\n\\r\\n        if (!$modx->user->isAuthenticated() && !empty($_REQUEST[$referrerVar])) {\\r\\n            $code = trim($_REQUEST[$referrerVar]);\\r\\n            if ($profile = $modx->getObject(\'msCustomerProfile\', [\'referrer_code\' => $code])) {\\r\\n                $referrer = $profile->get(\'id\');\\r\\n                setcookie($cookieVar, $referrer, time() + $cookieTime);\\r\\n            }\\r\\n        }\\r\\n        break;\\r\\n\\r\\n    case \'OnUserSave\':\\r\\n        \\/\\/ Save referrer id\\r\\n        \\/** @var string $mode *\\/\\r\\n        if ($mode == modSystemEvent::MODE_NEW) {\\r\\n            \\/** @var modUser $user *\\/\\r\\n            $cookieVar = $modx->getOption(\'ms2_referrer_cookie_var\', null, \'msreferrer\', true);\\r\\n            $cookieTime = $modx->getOption(\'ms2_referrer_time\', null, 86400 * 365, true);\\r\\n            if ($modx->context->key != \'mgr\' && !empty($_COOKIE[$cookieVar])) {\\r\\n                if ($profile = $modx->getObject(\'msCustomerProfile\', [\'id\' => $user->get(\'id\')])) {\\r\\n                    if (!$profile->get(\'referrer_id\') && $_COOKIE[$cookieVar] != $user->get(\'id\')) {\\r\\n                        $profile->set(\'referrer_id\', (int)$_COOKIE[$cookieVar]);\\r\\n                        $profile->save();\\r\\n                    }\\r\\n                }\\r\\n                setcookie($cookieVar, \'\', time() - $cookieTime);\\r\\n            }\\r\\n        }\\r\\n        break;\\r\\n\\r\\n    case \'msOnChangeOrderStatus\':\\r\\n        \\/\\/ Update customer stat\\r\\n        if (empty($status) || $status != 2) {\\r\\n            return;\\r\\n        }\\r\\n\\r\\n        \\/** @var modUser $user *\\/\\r\\n        \\/** @var msOrder $order *\\/\\r\\n        if ($user = $order->getOne(\'User\')) {\\r\\n            $q = $modx->newQuery(\'msOrder\', [\'type\' => 0]);\\r\\n            $q->innerJoin(\'modUser\', \'modUser\', [\'modUser.id = msOrder.user_id\']);\\r\\n            $q->innerJoin(\'msOrderLog\', \'msOrderLog\', [\\r\\n                \'msOrderLog.order_id = msOrder.id\',\\r\\n                \'msOrderLog.action\' => \'status\',\\r\\n                \'msOrderLog.entry\' => $status,\\r\\n            ]);\\r\\n            $q->where([\'msOrder.user_id\' => $user->get(\'id\')]);\\r\\n            $q->groupby(\'msOrder.user_id\');\\r\\n            $q->select(\'SUM(msOrder.cost)\');\\r\\n            if ($q->prepare() && $q->stmt->execute()) {\\r\\n                $spent = $q->stmt->fetchColumn();\\r\\n                \\/** @var msCustomerProfile $profile *\\/\\r\\n                if ($profile = $modx->getObject(\'msCustomerProfile\', [\'id\' => $user->get(\'id\')])) {\\r\\n                    $profile->set(\'spent\', $spent);\\r\\n                    $profile->save();\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n        break;\\r\\n}"}',
        'guid' => 'f2e9e76e27c2bbcf5274f9c50fd3c1e5',
        'native_key' => 0,
        'signature' => 'c4b85bc14db4e5703db39ba1c96fbc72',
        'related_objects' => 
        array (
          'PluginEvents' => 
          array (
            '2c0e97811e5b68af3301e264c0fb27d9' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnMODXInit","priority":0,"propertyset":0}',
              'guid' => '0bffe10b0589d3d6503f6f15404a3743',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnMODXInit',
              ),
              'signature' => 'bdc02378bef79ba9deeafa532fa018a8',
            ),
            '2f6206cbc54307bb655d322f167e9415' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnHandleRequest","priority":0,"propertyset":0}',
              'guid' => '02e8338a58f03f24055bc8d44c45038e',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnHandleRequest',
              ),
              'signature' => 'b14c4b9110ca0cc85daf03f519cd0707',
            ),
            '1340a0a22e080ef8ea5c0ff0e5c8a3e0' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnLoadWebDocument","priority":0,"propertyset":0}',
              'guid' => '9b8662ec699e01be6531a683b49d2b59',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnLoadWebDocument',
              ),
              'signature' => 'd5c9d1793b97e4b66a3967752eda03dc',
            ),
            '247f380553dae695f65840effbc431ab' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnWebPageInit","priority":0,"propertyset":0}',
              'guid' => 'e684c50081527fc8897ae2eb46c3268f',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnWebPageInit',
              ),
              'signature' => '642a5910335b97a1b3b46f91bd9e7747',
            ),
            '67641fcdc86a57940e7748e2ed1fb8a4' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnUserSave","priority":0,"propertyset":0}',
              'guid' => 'd3a29eaea7f30047bee76f0a77120338',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnUserSave',
              ),
              'signature' => 'da192c223697a110b004aa58f5cf1355',
            ),
            '577b38d0618ee46a97f5764e94ab8a8b' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"msOnChangeOrderStatus","priority":0,"propertyset":0}',
              'guid' => '1cd42cf6709c24f3f0f85f9b00a9b084',
              'native_key' => 
              array (
                0 => 0,
                1 => 'msOnChangeOrderStatus',
              ),
              'signature' => 'bbeb0186e803183c900c29838966a224',
            ),
            '14e346516794637e5e54e06b4a845df6' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnManagerPageBeforeRender","priority":0,"propertyset":0}',
              'guid' => 'b9c57a7c1ffed6dbf2b7003a29d0eb2d',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnManagerPageBeforeRender',
              ),
              'signature' => 'f99ee8260cbd2184b6a6e7707ab1a1b6',
            ),
          ),
        ),
      ),
    ),
  ),
  'related_object_attributes' => 
  array (
    'Snippets' => 
    array (
      'preserve_keys' => false,
      'update_object' => true,
      'unique_key' => 'name',
    ),
    'Chunks' => 
    array (
      'preserve_keys' => false,
      'update_object' => false,
      'unique_key' => 'name',
    ),
    'Plugins' => 
    array (
      'preserve_keys' => false,
      'update_object' => true,
      'unique_key' => 'name',
    ),
    'PluginEvents' => 
    array (
      'preserve_keys' => true,
      'update_object' => true,
      'unique_key' => 
      array (
        0 => 'pluginid',
        1 => 'event',
      ),
    ),
  ),
  'namespace' => 'minishop2',
  'resolve' => 
  array (
    0 => 
    array (
      'type' => 'file',
      'body' => '{"source":"minishop2-4.1.3-pl\\/modCategory\\/5cffa09efde75eec8bdcde4089fa17f4\\/0\\/","target":"return MODX_ASSETS_PATH . \'components\\/\';","name":"minishop2"}',
    ),
    1 => 
    array (
      'type' => 'file',
      'body' => '{"source":"minishop2-4.1.3-pl\\/modCategory\\/5cffa09efde75eec8bdcde4089fa17f4\\/1\\/","target":"return MODX_CORE_PATH . \'components\\/\';","name":"minishop2"}',
    ),
    2 => 
    array (
      'type' => 'php',
      'body' => '{"source":"minishop2-4.1.3-pl\\/modCategory\\/5cffa09efde75eec8bdcde4089fa17f4.resolve.extension.resolver","type":"php","name":"resolve.extension"}',
    ),
    3 => 
    array (
      'type' => 'php',
      'body' => '{"source":"minishop2-4.1.3-pl\\/modCategory\\/5cffa09efde75eec8bdcde4089fa17f4.resolve.tables.resolver","type":"php","name":"resolve.tables"}',
    ),
    4 => 
    array (
      'type' => 'php',
      'body' => '{"source":"minishop2-4.1.3-pl\\/modCategory\\/5cffa09efde75eec8bdcde4089fa17f4.resolve.policy.resolver","type":"php","name":"resolve.policy"}',
    ),
    5 => 
    array (
      'type' => 'php',
      'body' => '{"source":"minishop2-4.1.3-pl\\/modCategory\\/5cffa09efde75eec8bdcde4089fa17f4.resolve.sources.resolver","type":"php","name":"resolve.sources"}',
    ),
    6 => 
    array (
      'type' => 'php',
      'body' => '{"source":"minishop2-4.1.3-pl\\/modCategory\\/5cffa09efde75eec8bdcde4089fa17f4.resolve.settings.resolver","type":"php","name":"resolve.settings"}',
    ),
    7 => 
    array (
      'type' => 'php',
      'body' => '{"source":"minishop2-4.1.3-pl\\/modCategory\\/5cffa09efde75eec8bdcde4089fa17f4.resolve.chunks.resolver","type":"php","name":"resolve.chunks"}',
    ),
    8 => 
    array (
      'type' => 'php',
      'body' => '{"source":"minishop2-4.1.3-pl\\/modCategory\\/5cffa09efde75eec8bdcde4089fa17f4.resolve.statuses.resolver","type":"php","name":"resolve.statuses"}',
    ),
    9 => 
    array (
      'type' => 'php',
      'body' => '{"source":"minishop2-4.1.3-pl\\/modCategory\\/5cffa09efde75eec8bdcde4089fa17f4.resolve.setup.resolver","type":"php","name":"resolve.setup"}',
    ),
  ),
  'validate' => NULL,
  'vehicle_package' => 'transport',
  'vehicle_class' => 'xPDOObjectVehicle',
  'guid' => '0c97d43131df2f87b9b335332a11d1c8',
  'package' => 'modx',
  'class' => 'modCategory',
  'signature' => '5cffa09efde75eec8bdcde4089fa17f4',
  'native_key' => 1,
  'object' => '{"id":1,"parent":0,"category":"miniShop2","rank":0}',
);